import{r as t,h as e,H as o,g as s}from"./p-c9795ae2.js";import{g as i}from"./p-a7d431c5.js";import{c as n}from"./p-52c3ceb3.js";import{a as r}from"./p-e5f35127.js";import{t as a}from"./p-a6d610dc.js";import"./p-632cbbe7.js";import"./p-c4e5a9dd.js";const c=':host,::slotted(*),*{box-sizing:border-box}:host([disabled]){cursor:not-allowed !important;}:host([disabled]) *,:host([disabled]) ::slotted(*){cursor:not-allowed !important;pointer-events:none !important;}:host{display:flex;flex-grow:1}.content{display:flex;flex:1;flex-flow:row nowrap;gap:var(--button-group-spacing)}:host([alignment="right"]) .content{flex-direction:row-reverse}:host([alignment="left"]) .content{justify-content:flex-start}:host([alignment="split"]) .content{flex-direction:row-reverse;justify-content:flex-end}:host([alignment="split"]) .content ::slotted(.market-button:first-of-type){margin-left:auto}:host([alignment="fill"]) .content{flex-direction:row-reverse}:host([alignment="fill"]) .content ::slotted(.market-button){flex:1}:host([alignment="stack"]) .content{flex-direction:column}[slot="content"]{display:flex;flex-direction:column;gap:var(--button-group-spacing)}::slotted([slot="overflow-buttons"]){width:100%}';const l=c;const d=2;const h=48;const f=16;const b=class{constructor(e){t(this,e);this._buttonEls=[];this._observers={};this.throttledHandleResize=a(this.handleResize.bind(this),f);this.alignment="right";this.popoverStrategy="absolute";this._sortedButtonEls={overflow:[],visible:[]}}getComputedWidth(t){return Number.parseFloat(window.getComputedStyle(t).width)}async findButtonCutoffIndex(){if(this.alignment==="stack"){return this._buttonEls.length}const t=this.getComputedWidth(this.el);const e=document.createElement("div");e.style.width="auto";e.style.position="absolute";e.style.visibility="hidden";this.el.shadowRoot.appendChild(e);let o=0;let s=0;for(const i of this._buttonEls){if(o===d){break}const a=o+1===this._buttonEls.length?0:n.BUTTON_GROUP_SPACING+h;const c=i.cloneNode(true);c.style.display="block";e.appendChild(c);await r();const l=this.getComputedWidth(e);e.removeChild(c);s+=(o>0?n.BUTTON_GROUP_SPACING:0)+l;const f=s+a;if(f>=t){break}++o}this.el.shadowRoot.removeChild(e);e.remove();return o}sortVisibleAndOverflowButtons(){this._sortedButtonEls={visible:this._buttonEls.slice(0,this._buttonCutoffIndex),overflow:this._buttonEls.slice(this._buttonCutoffIndex)};this._sortedButtonEls.visible.forEach((t=>{if(t.getAttribute("slot")==="overflow-buttons"){t.removeAttribute("slot")}}));this._sortedButtonEls.overflow.forEach((t=>{if(t.getAttribute("slot")!=="overflow-buttons"){t.setAttribute("slot","overflow-buttons")}}))}async handleResize(){if(!this.getComputedWidth(this.el)){return}const t=await this.findButtonCutoffIndex();const e=t!==this._buttonCutoffIndex;if(e){this._buttonCutoffIndex=t;await r();this.sortVisibleAndOverflowButtons()}this.el.style.visibility=""}registerSlottedButtons(){const t=i("market-button");this._buttonEls=[...this.el.querySelectorAll(t)]}observeContent(t){if(!this._observers.content){this._observers.content=new ResizeObserver(this.throttledHandleResize);this._observers.content.observe(t)}}connectedCallback(){if(!this._observers.host){this._observers.host=new ResizeObserver(this.throttledHandleResize);this._observers.host.observe(this.el)}}componentWillLoad(){this.el.style.visibility="hidden";this.registerSlottedButtons();this.handleResize()}disconnectedCallback(){Object.entries(this._observers).forEach((([t,e])=>{if(e){e.disconnect();this._observers[t]=undefined}}))}render(){const t=i("market-button-dropdown");const s=i("market-button");const r=i("market-icon");return e(o,{key:"0057bde7c5189dc71782960ea6a0a05ab850ffae",class:"market-button-group"},e("div",{key:"bb2bae68c3f6bcce4a467153493c54e5bf74a8d8",class:"content",ref:t=>this.observeContent(t)},e("slot",{key:"aa97b649151b3dae1d6f98b07b55ebd5b59124a8",onSlotchange:()=>this.registerSlottedButtons()}),this._sortedButtonEls.overflow.length>0&&e(t,{key:"ed1403f69d8bdf9a2b177ab7d16274e78cd1c3bf","no-caret":true,"popover-strategy":this.popoverStrategy},e(s,{key:"633ade9faa3248a77fe539d03c3593778ce2647f",slot:"trigger"},e(r,{key:"61a4cf7a55a68750d827d9950232a564e1664150",slot:"icon",name:n.BUTTON_GROUP_OVERFLOW_BUTTON_ICON_ASSET})),e("div",{key:"1e30bc26ee0d90bbd1ca0324d7054d74beea088e",slot:"content"},e("slot",{key:"f02cea12d210b2170d13c14a10ac8027360cc445",name:"overflow-buttons",slot:"overflow-buttons"})))))}get el(){return s(this)}};b.style=l;export{b as market_button_group};
//# sourceMappingURL=p-a44c69ed.entry.js.map