{"version":3,"names":["marketToasterCss","MarketToasterStyle0","TOAST_VERTICAL_SPACING","TOAST_BOTTOM_MARGIN","TOAST_ANIMATION_TRANSITION_DURATION","MarketToaster","constructor","hostRef","this","toasts","show","toastEl","unshift","classList","add","el","appendChild","window","requestAnimationFrame","positionToasts","bind","Promise","resolve","setTimeout","startAutoDismissTimer","offset","forEach","toast","style","transform","offsetHeight","hide","index","indexOf","splice","remove","removeAll","allActiveToasts","all","map","toastAutoDismissedEventHandler","target","toastManuallyDismissedEventHandler","render","h","Host","key","class"],"sources":["src/components/market-toaster/market-toaster.css?tag=market-toaster&encapsulation=shadow","src/components/market-toaster/market-toaster.tsx"],"sourcesContent":["@import \"../../styles/mixins/component-base.css\";\n\n:host {\n  /* TODO UI-1153 design tokens */\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  /* ensures that toast appear on top of any market-context bc market-context-manager has a z-index of 1000 */\n  z-index: 1010;\n  padding: 0 0 var(--toast-bottom-margin, 24px);\n\n  /* ensure we can click through the market-toaster to underlying elements behind it */\n  pointer-events: none;\n\n  ::slotted(.market-toast) {\n    /* ensure horizontal margins from edge of toaster */\n    width: calc(100% - var(--toast-horizontal-margin, 16px) * 2);\n    margin: var(--toast-vertical-spacing, 16px) auto 0;\n\n    /* clicks pass through market-toaster but should still fire on slotted market-toasts */\n    pointer-events: auto;\n  }\n\n  /*\n    Because some folks are using toasts without the toaster API,\n    we only use transitions if it was added via toaster.show()\n  */\n  ::slotted(.use-transitions) {\n    /* position offscreen just below the bottom of the toaster */\n    position: absolute;\n    top: 100%;\n\n    /* center toast horizontally */\n    left: 50%;\n    margin: 0;\n    transition: transform var(--toast-animation-transition-duration, 200ms) ease-in-out;\n    transform: translate(-50%, 0);\n  }\n}\n","import { Component, Host, Element, Method, h, Listen } from '@stencil/core';\n\n// TODO(UI-1153): add design tokens for these\nconst TOAST_VERTICAL_SPACING = 16;\nconst TOAST_BOTTOM_MARGIN = 24;\nconst TOAST_ANIMATION_TRANSITION_DURATION = 200;\n\n@Component({\n  tag: 'market-toaster',\n  styleUrl: 'market-toaster.css',\n  shadow: true,\n})\nexport class MarketToaster {\n  @Element() el: HTMLMarketToasterElement;\n  toasts: Array<HTMLMarketToastElement> = [];\n\n  /**\n   * Add the passed toastEl to market-toaster and make it visible\n   **/\n  @Method()\n  async show(toastEl) {\n    this.toasts.unshift(toastEl);\n    toastEl.classList.add('use-transitions');\n    this.el.appendChild(toastEl);\n    window.requestAnimationFrame(this.positionToasts.bind(this));\n\n    await new Promise((resolve) => setTimeout(resolve, TOAST_ANIMATION_TRANSITION_DURATION));\n    toastEl.startAutoDismissTimer();\n  }\n\n  positionToasts() {\n    let offset = TOAST_BOTTOM_MARGIN;\n    this.toasts.forEach((toast) => {\n      toast.style.transform = `translate(-50%, calc(-100% - ${offset}px))`;\n      offset += toast.offsetHeight + TOAST_VERTICAL_SPACING;\n    });\n  }\n\n  /**\n   * Remove the passed toastEl from market-toaster\n   **/\n  @Method()\n  async hide(toastEl) {\n    const index = this.toasts.indexOf(toastEl);\n    this.toasts.splice(index, 1);\n    window.requestAnimationFrame(() => {\n      toastEl.style.transform = '';\n      this.positionToasts();\n    });\n\n    await new Promise((resolve) => setTimeout(resolve, TOAST_ANIMATION_TRANSITION_DURATION));\n    toastEl.remove();\n  }\n\n  /**\n   * Remove all market-toasts from market-toaster\n   **/\n  @Method()\n  removeAll() {\n    const allActiveToasts = [...this.toasts];\n    return Promise.all(allActiveToasts.map((toast) => this.hide(toast)));\n  }\n\n  @Listen('marketToastAutoDismissed')\n  toastAutoDismissedEventHandler({ target: toast }) {\n    this.hide(toast);\n  }\n\n  @Listen('marketToastManuallyDismissed')\n  toastManuallyDismissedEventHandler({ target: toast }) {\n    this.hide(toast);\n  }\n\n  render() {\n    return (\n      <Host class=\"market-toaster\">\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"],"mappings":"yDAAA,MAAMA,EAAmB,2qBACzB,MAAAC,EAAeD,ECEf,MAAME,EAAyB,GAC/B,MAAMC,EAAsB,GAC5B,MAAMC,EAAsC,I,MAO/BC,EAAa,MAL1B,WAAAC,CAAAC,G,UAOEC,KAAAC,OAAwC,E,CAMxC,UAAMC,CAAKC,GACTH,KAAKC,OAAOG,QAAQD,GACpBA,EAAQE,UAAUC,IAAI,mBACtBN,KAAKO,GAAGC,YAAYL,GACpBM,OAAOC,sBAAsBV,KAAKW,eAAeC,KAAKZ,aAEhD,IAAIa,SAASC,GAAYC,WAAWD,EAASlB,KACnDO,EAAQa,uB,CAGV,cAAAL,GACE,IAAIM,EAAStB,EACbK,KAAKC,OAAOiB,SAASC,IACnBA,EAAMC,MAAMC,UAAY,gCAAgCJ,QACxDA,GAAUE,EAAMG,aAAe5B,CAAsB,G,CAQzD,UAAM6B,CAAKpB,GACT,MAAMqB,EAAQxB,KAAKC,OAAOwB,QAAQtB,GAClCH,KAAKC,OAAOyB,OAAOF,EAAO,GAC1Bf,OAAOC,uBAAsB,KAC3BP,EAAQiB,MAAMC,UAAY,GAC1BrB,KAAKW,gBAAgB,UAGjB,IAAIE,SAASC,GAAYC,WAAWD,EAASlB,KACnDO,EAAQwB,Q,CAOV,SAAAC,GACE,MAAMC,EAAkB,IAAI7B,KAAKC,QACjC,OAAOY,QAAQiB,IAAID,EAAgBE,KAAKZ,GAAUnB,KAAKuB,KAAKJ,K,CAI9D,8BAAAa,EAAiCC,OAAQd,IACvCnB,KAAKuB,KAAKJ,E,CAIZ,kCAAAe,EAAqCD,OAAQd,IAC3CnB,KAAKuB,KAAKJ,E,CAGZ,MAAAgB,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,2CAACC,MAAM,kBACVH,EAAA,QAAAE,IAAA,6C"}