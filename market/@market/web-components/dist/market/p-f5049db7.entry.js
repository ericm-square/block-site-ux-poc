import{r as e,c as t,h as a,H as i,g as s}from"./p-c9795ae2.js";import{M as n}from"./p-930860a8.js";import{g as r}from"./p-a7d431c5.js";import{r as o,t as d,a as c,g as l}from"./p-051a0642.js";import{i as h,a as f,b as u}from"./p-435da4b9.js";import{v as b}from"./p-19b890a3.js";function v(e,t){o(2,arguments);var a=d(e);var i=c(t);if(isNaN(i)){return new Date(NaN)}if(!i){return a}a.setDate(a.getDate()+i);return a}function m(e,t){o(2,arguments);var a=d(e);var i=c(t);if(isNaN(i)){return new Date(NaN)}if(!i){return a}var s=a.getDate();var n=new Date(a.getTime());n.setMonth(a.getMonth()+i+1,0);var r=n.getDate();if(s>=r){return n}else{a.setFullYear(n.getFullYear(),n.getMonth(),s);return a}}function p(e,t){var a,i,s,n,r,h,f,u;o(1,arguments);var b=l();var v=c((a=(i=(s=(n=t===null||t===void 0?void 0:t.weekStartsOn)!==null&&n!==void 0?n:t===null||t===void 0?void 0:(r=t.locale)===null||r===void 0?void 0:(h=r.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&s!==void 0?s:b.weekStartsOn)!==null&&i!==void 0?i:(f=b.locale)===null||f===void 0?void 0:(u=f.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:0);if(!(v>=0&&v<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var m=d(e);var p=m.getDay();var y=(p<v?7:0)+p-v;m.setDate(m.getDate()-y);m.setHours(0,0,0,0);return m}function y(e,t){o(2,arguments);var a=c(t);var i=a*7;return v(e,i)}function k(e,t){o(2,arguments);var a=c(t);return m(e,a*12)}function g(e){o(1,arguments);var t=d(e);t.setDate(1);t.setHours(0,0,0,0);return t}function w(e){o(1,arguments);var t=d(e);var a=new Date(0);a.setFullYear(t.getFullYear(),0,1);a.setHours(0,0,0,0);return a}function D(e,t){var a,i,s,n,r,h,f,u;o(1,arguments);var b=l();var v=c((a=(i=(s=(n=t===null||t===void 0?void 0:t.weekStartsOn)!==null&&n!==void 0?n:t===null||t===void 0?void 0:(r=t.locale)===null||r===void 0?void 0:(h=r.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&s!==void 0?s:b.weekStartsOn)!==null&&i!==void 0?i:(f=b.locale)===null||f===void 0?void 0:(u=f.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:0);if(!(v>=0&&v<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var m=d(e);var p=m.getDay();var y=(p<v?-7:0)+6-(p-v);m.setDate(m.getDate()+y);m.setHours(23,59,59,999);return m}function x(e){o(1,arguments);var t=d(e);var a=t.getMonth();t.setFullYear(t.getFullYear(),a+1,0);t.setHours(0,0,0,0);return t}function S(e){o(1,arguments);var t=d(e);var a=t.getFullYear();t.setFullYear(a+1,0,0);t.setHours(0,0,0,0);return t}function N(){var e=new Date;var t=e.getFullYear();var a=e.getMonth();var i=e.getDate();var s=new Date(0);s.setFullYear(t,a,i-1);s.setHours(0,0,0,0);return s}function z(e,t){o(2,arguments);var a=c(t);return m(e,-a)}function C(e,t){o(2,arguments);var a=c(t);return y(e,-a)}function T(e,t){o(2,arguments);var a=c(t);return k(e,-a)}const j=':host{display:flex}@media only screen and (max-width: 800px){:host([mobile-menu-position="top"]){flex-direction:column}:host([mobile-menu-position="top"]) list-view{margin-bottom:var(--date-picker-menu-vertical-spacing)}:host([mobile-menu-position="bottom"]){flex-direction:column-reverse}:host([mobile-menu-position="bottom"]) list-view{margin-top:var(--date-picker-menu-vertical-spacing)}}header{height:var(--date-picker-header-minimum-height);margin-bottom:var(--date-picker-header-vertical-spacing)}nav{display:flex;justify-content:space-between;align-items:center}:host([year-view-active]) nav{justify-content:center}[id^="date-picker-label-"]{margin:0}.year-view-button{color:var(--date-picker-month-year-label-color, var(--core-text-10-color))}.year-view-button:hover,.year-view-button:active{background-color:transparent;color:var(--core-emphasis-text-color)}.caret{margin-left:var(--date-picker-header-button-padding)}:host([year-view-active]) .caret{transform:rotate(-180deg)}calendar{min-width:var(--date-picker-minimum-width)}month-view{display:grid;grid-template-rows:repeat(auto-fill, 1fr);grid-template-columns:repeat(7, 1fr);gap:var(--date-picker-grid-item-vertical-padding) var(--date-picker-grid-item-horizontal-padding);box-sizing:border-box}year-section{display:flex;gap:var(--date-picker-grid-item-year-button-vertical-padding, 0)\n    var(--date-picker-grid-item-year-button-horizontal-padding, 12.5px);box-sizing:border-box}year-section .market-icon{width:var(--date-picker-grid-item-year-button-icon-size, var(--accessory-icon-variant-medium-size-height))}month-section{display:grid;grid-template-rows:repeat(3, 1fr);grid-template-columns:repeat(4, 1fr);gap:var(--date-picker-grid-item-month-button-vertical-padding, 16px)\n    var(--date-picker-grid-item-month-button-horizontal-padding, 26.67px);box-sizing:border-box}';const E=j;class M{constructor(){this.date="";this.month=null;this.year=null;this.selected=false;this.selection="none";this.today=false;this.disabled=false}}const O=class{constructor(a){e(this,a);this.marketDateRangeChanged=t(this,"marketDateRangeChanged",7);this.marketMenuSelectionChanged=t(this,"marketMenuSelectionChanged",7);this.yearViewMonthList=[];this.selectionType="single";this.selectedStartDate=undefined;this.selectedEndDate=undefined;this.presetMenuOption=undefined;this.displayMenu=false;this.mobileMenuPosition="top";this.excludeMenuItems="";this.timeframe="present";this.isDateDisabled=undefined;this.locale=navigator.language||"en-US";this.displayedDate=undefined;this.withInputs="";this.invalid=false;this.yearViewActive=false;this.displayedMonth=undefined;this.displayedWeekdays=[];this.yearViewYearsList=[];this.hoveredDate=undefined}buildWeekdays(){this.displayedWeekdays=[];const e=p(new Date,{weekStartsOn:this.getLocaleFirstDayOfWeek()});let t;for(let a=0;a<7;a++){t=e.toLocaleDateString(this.locale,{weekday:"short"});if(this.locale.startsWith("en-")){t=t.slice(0,-1)}this.displayedWeekdays.push(t);e.setDate(e.getDate()+1)}}getLocaleFirstDayOfWeek(){var e,t,a,i,s;const n=new Intl.Locale(this.locale);const r=(s=(t=(e=n===null||n===void 0?void 0:n.weekInfo)===null||e===void 0?void 0:e.firstDay)!==null&&t!==void 0?t:(i=(a=n===null||n===void 0?void 0:n.getWeekInfo)===null||a===void 0?void 0:a.call(n))===null||i===void 0?void 0:i.firstDay)!==null&&s!==void 0?s:0;return r%7}addHoveredDateRangeStyling(e,t){if(!this.hoveredDate){return}const a=new Date(this.selectedStartDate);if(this.selectedStartDate&&!this.selectedEndDate&&h(e,this.hoveredDate)&&f(e,a)){t.selection="range-middle"}if(!u(this.hoveredDate,e)){return}if(!this.selectedStartDate||this.selectedStartDate&&this.selectedEndDate||!f(this.hoveredDate,a)){t.selection="range-first"}else{t.selection="range-last"}}addDateSelectionAttributes(e,t,a,i){if(a&&u(t,a)){e.selected=true;e.selection=this.selectionType==="single"?"single":"range-first"}if(this.selectionType==="range"){this.addHoveredDateRangeStyling(t,e);if(a&&i&&f(t,a)&&h(t,i)){e.selected=true;e.selection="range-middle"}if(i&&u(t,i)){e.selected=true;e.selection="range-last"}}}buildCalendar(){const e=new Date;const t=new Date(this.displayedDate);const a=new Date(t.getFullYear(),t.getMonth(),1);const i=this.getLocaleFirstDayOfWeek();if(a.getDay()===0&&i===1){a.setDate(a.getDate()-6)}else{a.setDate(a.getDate()-(a.getDay()-i))}this.days=[];const s=this.selectedStartDate&&new Date(this.selectedStartDate);const n=this.selectedEndDate&&new Date(this.selectedEndDate);for(let r=0;r<42;r++){const r=new M;r.year=a.getFullYear();r.month=a.getMonth();if(a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()){r.date=a.getDate().toString()}if(u(a,e)){r.today=true}this.addDateSelectionAttributes(r,a,s,n);if(r.date&&this.isDateDisabled){r.disabled=this.isDateDisabled(a)}if(this.timeframe==="future"&&h(a,e)&&!u(a,e)){r.disabled=true}if(this.timeframe==="past"&&f(a,e)&&!u(a,e)){r.disabled=true}this.days.push(r);a.setDate(a.getDate()+1);if(a.getDay()===0+i&&a.getMonth()!==t.getMonth()){break}}}clearDateSelections(){this.selectedStartDate=null;this.selectedEndDate=null}navigateMonth(e){const t=new Date(this.displayedDate);this.displayedDate=new Date(t.getFullYear(),t.getMonth()+e,1).toISOString()}dateInputDateSet({detail:{date:e,input:t}}){const[a,i]=e.split("T");const[s,n,r]=a.split("-").map(Number);this.displayedDate=new Date(s,n-1,1).toString();const[o,d]=this.withInputs==="date-and-time"?i.split(":").map(Number):[];this._selectDate({day:r,month:n-1,year:s,hour:o,minute:d,input:t})}selectDate({detail:{date:e}}){if(e.type!=="day"){this.updateDisplayedHeader(e.type,e.day)}else{this._selectDate({day:e.day})}}hoverDate({detail:{date:e}}){const t=new Date(this.displayedDate);this.hoveredDate=new Date(t.getFullYear(),t.getMonth(),e.day)}mousedOutDate(){this.hoveredDate=null}selectMenuRow(e){const t=e.detail.menuSelection;if(!t){return}this.marketMenuSelectionChanged.emit({menuSelection:t});const a=this.selectedStartDate;const i=this.selectedEndDate;this._setMenuRowOption(t);if(t!==n.CUSTOM){this.marketDateRangeChanged.emit({prevStartDate:a,prevEndDate:i,startDate:this.selectedStartDate,endDate:this.selectedEndDate,menuSelection:t})}}setInvalidState({detail:{invalid:e}}){this.invalid=e}_setMenuRowOption(e){const t=new Date;switch(e){case n.TODAY:this.clearDateSelections();this.selectedStartDate=t.toISOString();break;case n.YESTERDAY:this.clearDateSelections();this.selectedStartDate=N().toISOString();break;case n.THIS_WEEK:this.selectedStartDate=p(t).toISOString();if(this.selectionType==="range"){this.selectedEndDate=D(t).toISOString()}break;case n.LAST_WEEK:{const e=C(t,1);this.selectedStartDate=p(e).toISOString();if(this.selectionType==="range"){this.selectedEndDate=D(e).toISOString()}break}case n.THIS_MONTH:this.selectedStartDate=g(t).toISOString();if(this.selectionType==="range"){this.selectedEndDate=x(t).toISOString()}break;case n.LAST_MONTH:{const e=z(t,1);this.selectedStartDate=g(e).toISOString();if(this.selectionType==="range"){this.selectedEndDate=x(e).toISOString()}break}case n.THIS_YEAR:this.selectedStartDate=w(t).toISOString();if(this.selectionType==="range"){this.selectedEndDate=S(t).toISOString()}break;case n.LAST_YEAR:{const e=T(t,1);this.selectedStartDate=w(e).toISOString();if(this.selectionType==="range"){this.selectedEndDate=S(e).toISOString()}break}}if(e!==n.CUSTOM){this.displayedDate=this.selectedStartDate}}_selectDate(e){var t;const a=this.selectedStartDate;const i=this.selectedEndDate;const s=new Date(this.displayedDate);const o=(t=e.month)!==null&&t!==void 0?t:s.getMonth();const d=new Date(e.year||s.getFullYear(),o,e.day||s.getDate(),e.hour||s.getHours(),e.minute||s.getMinutes()).toISOString();if(this.displayMenu&&!u(new Date(this.selectedStartDate),new Date(d))){const e=this.el.shadowRoot.querySelector(r("market-date-picker-menu"));e._selectCustomRow()}if(this.selectionType==="single"){this.clearDateSelections();this.selectedStartDate=d}else{if(this.selectedStartDate&&!this.selectedEndDate&&d>=this.selectedStartDate){this.selectedEndDate=d}else{if(e.input){if(e.input==="start")this.selectedStartDate=d;if(e.input==="end")this.selectedEndDate=d}else{this.clearDateSelections();this.selectedStartDate=d}}}this.marketDateRangeChanged.emit({prevStartDate:a,prevEndDate:i,startDate:this.selectedStartDate,endDate:this.selectedEndDate,menuSelection:n.CUSTOM})}toggleCaret(){this.yearViewActive=!this.yearViewActive}validateDisplayedDate(e){if(new Date(e).toString()==="Invalid Date"){this.displayedDate=(new Date).toISOString()}}buildInitialYearView(){this.validateDisplayedDate(this.displayedDate);const e=new Date(this.displayedDate);const t=e.getFullYear();this.yearViewYearsList=[(t-1).toString(),t.toString(),(t+1).toString()];for(let e=0;e<12;e++){const t=new Date(2024,e).toLocaleDateString(this.locale,{month:"short"});this.yearViewMonthList.push(t)}}updateDisplayedYearList(e){this.yearViewYearsList=this.yearViewYearsList.map((t=>(Number(t)+e).toString()))}updateDisplayedHeader(e,t){var a;let i;if(e==="year"){i={year:t}}if(e==="month"){const e=new Date(`${t} 1`);const a=e.toLocaleDateString(this.locale,{month:"numeric"});i={month:Number(a)-1};this.toggleCaret()}const s=new Date(this.displayedDate);const n=(a=i===null||i===void 0?void 0:i.month)!==null&&a!==void 0?a:s.getMonth();const r=new Date(i.year||s.getFullYear(),n,1).toISOString();this.displayedDate=r}componentWillLoad(){if(this.presetMenuOption){this._setMenuRowOption(this.presetMenuOption)}this.buildInitialYearView();this.datePickerLabel=`date-picker-label-${b()}`}componentWillRender(){this.validateDisplayedDate(this.displayedDate);this.displayedMonth=new Date(this.displayedDate).toLocaleString(this.locale,{month:"short",year:"numeric"});this.buildWeekdays();this.buildCalendar()}render(){const e=r("market-date-picker-menu");const t=r("market-date-picker-date");const s=r("market-date-picker-input-date");const o=r("market-button");const d=r("market-icon");const c=r("market-divider");const l="chevron-left";const h="chevron-right";const f="arrow-left";const u="arrow-right";return a(i,{key:"c78a7b05df332b7aa06423aed1ed30275e618bc0",class:"market-date-picker"},this.displayMenu&&a("list-view",{key:"ac0a38b70c298576e139cf9d276424b8d31ab7af"},a(e,{key:"f95cc5ab86f56d1a414553371fbfa16c8d37c0af",timeframe:this.timeframe,excludeMenuItems:this.excludeMenuItems,presetMenuOption:this.presetMenuOption},a("slot",{key:"3cc5b7756b2b5a5e1d79a0f630c9b9c5fb61dba5",name:n.TODAY,slot:n.TODAY},"Today"),a("slot",{key:"dcd99d9668b7f6ecfed93e37a3074208ce33f6d1",name:n.YESTERDAY,slot:n.YESTERDAY},"Yesterday"),a("slot",{key:"01b404c3d5ed89bb69e3e5ede661308d1937d6ef",name:n.THIS_WEEK,slot:n.THIS_WEEK},"This week"),a("slot",{key:"1037a8b6ed5b53ff442fe33c22a038551cfb7666",name:n.LAST_WEEK,slot:n.LAST_WEEK},"Last week"),a("slot",{key:"1ae37f2beab8500d77bc9047249f2818c8679df9",name:n.THIS_MONTH,slot:n.THIS_MONTH},"This month"),a("slot",{key:"5aa7900479c4f236ca93614e1d992c147f5adf4c",name:n.LAST_MONTH,slot:n.LAST_MONTH},"Last month"),a("slot",{key:"d64f498efa100bcf1375c1754a396fa90d8f33a4",name:n.THIS_YEAR,slot:n.THIS_YEAR},"This year"),a("slot",{key:"a265f8265ab43a52080a0fee70d86eaf1faf7cb0",name:n.LAST_YEAR,slot:n.LAST_YEAR},"Last year"),a("slot",{key:"a8f9eab3bf9fcc47932e3298f01fa3b623d781c7",name:n.CUSTOM,slot:n.CUSTOM},"Custom"))),a("calendar",{key:"74306dc7f74bf8ab987aa8bcfd052ca0cf218b5a"},a("header",{key:"4bde0079d12ac3c1290260eb9526e30b3ac30710"},a("nav",{key:"33a1fe6d6a15b50d461241106c2b2d035be49529"},!this.yearViewActive&&a(o,{key:"ba20533947d6c6dee2a3069fef4bf9e3600471dd",class:"left-nav",size:"small","aria-label":"Previous month",onClick:()=>this.navigateMonth(-1)},a(d,{key:"ca3ecb61171ff64efce990de4353fa6be2b4e398",slot:"icon",name:f})),a(o,{key:"60a7f627185b9c0d6bf3af21eb8467be6ea8570d",class:"year-view-button","aria-label":"Toggle year view",onClick:()=>this.toggleCaret(),caret:this.yearViewActive?"up":"down",rank:"tertiary"},a("h2",{key:"09150c4c973668a250052523c621bd3bc0de9c44",id:this.datePickerLabel},this.displayedMonth)),!this.yearViewActive&&a(o,{key:"93f69cba83dee974a878176b9a38b39b37f3212d",size:"small","aria-label":"Next month",onClick:()=>this.navigateMonth(1)},a(d,{key:"4f4a71fac7f937b7786331b23b05d5d24a68bf58",slot:"icon",name:u})))),!this.yearViewActive&&a("month-view",{key:"fc0709e315caf71fb7674aa1954d8e51102d16c6",role:"grid","aria-labelledby":this.datePickerLabel},this.displayedWeekdays.map((e=>a(t,{class:"weekday-header",disabled:true,day:e}))),this.days.map((e=>a(t,{disabled:e.disabled,selection:e.selection,today:e.today,selected:e.selected,day:e.date||null,type:"day"})))),this.yearViewActive&&a("year-view",{key:"6cdd043108fedfd459815f538c693d0bd4e8f75b","aria-labelledby":this.datePickerLabel},a("year-section",{key:"80534d9d3973be8708d224efde75a84ed167f9a7"},a(o,{key:"6724cb67424c6c25df2fd43a098bd7a065112f78",size:"small",rank:"tertiary","aria-label":"Previous year",onClick:()=>this.updateDisplayedYearList(-1)},a(d,{key:"f06c2e8ae425af9690325352dadece71761059cb",slot:"icon",name:l})),this.yearViewYearsList.map((e=>a(t,{day:e,type:"year"}))),a(o,{key:"47818e59632afab8f514f691b6df885ac27dcad0",size:"small",rank:"tertiary","aria-label":"Next year",onClick:()=>this.updateDisplayedYearList(1)},a(d,{key:"6a5d4cc241a1fccc5276a719cb30a03478fa6884",slot:"icon",name:h}))),a(c,{key:"a2532c37506458317c88f2e1a134a7adaa9104d5",size:"thin"}),a("month-section",{key:"f48b27b6528a2ff1f53e78b31f9cf8383f9fe7bf",role:"grid"},this.yearViewMonthList.map((e=>a(t,{day:e,type:"month"}))))),this.withInputs&&a(s,{key:"57aed426810970887e893dd8d60c28bda6b02663",class:"date-input-top-margin",range:this.selectionType==="range",isDateDisabled:this.isDateDisabled,selectedStartDate:this.selectedStartDate,selectedEndDate:this.selectedEndDate,withTime:this.withInputs==="date-and-time",timeframe:this.timeframe},a("slot",{key:"304e7f7e99bf489c7853cd9f623fc9399f508c45",name:"start-date",slot:"start-date"},this.selectionType==="range"?"Start ":"","Date"),a("slot",{key:"5a738f898bdca337206719367b81288c5b20f991",name:"end-date",slot:"end-date"},"End Date"),a("slot",{key:"2a0606961a10798604f47e0bb0a31237187bd2f1",name:"start-time",slot:"start-time"},this.selectionType==="range"?"Start ":"","Time"),a("slot",{key:"3027c801069e38f923baa0ac2d91d83b0d74d3a2",name:"end-time",slot:"end-time"},"End Time"),a("slot",{key:"21026dbc719cafd2109f3c31b9553628ada54480",name:"range-error",slot:"range-error"},"Enter a valid date range"))))}get el(){return s(this)}};O.style=E;export{O as market_date_picker};
//# sourceMappingURL=p-f5049db7.entry.js.map