{"version":3,"names":["marketSegmentedControlCss","MarketSegmentedControlStyle0","isValueEmpty","value","undefined","MarketSegmentedControl","valueWatcher","this","setSelectionsFromValue","disabledChangeHandler","_a","items","forEach","item","disabled","setSelectedState","setSliderPosition","setInternalState","el","querySelectorAll","getNamespacedTagFor","selectedSlider","shadowRoot","getElementById","length","setSliderSize","style","setProperty","SEGMENTED_CONTROL_PADDING_HORIZONTAL","selectedItem","newSelectionIndex","indexOf","defaultSlotchangeHandler","marketSegmentSelectedEventHandler","e","newSelection","target","prevSelection","querySelector","marketSegmentedSelectionDidChange","emit","selectedSegment","selectedSegmentValue","deselectedSegment","deselectedSegmentValue","render","h","Host","key","class","onSlotchange"],"sources":["src/components/market-segmented-control/market-segmented-control.css?tag=market-segmented-control&encapsulation=shadow","src/components/market-segmented-control/market-segmented-control.tsx"],"sourcesContent":["@import \"../../styles/mixins/component-base.css\";\n\n:host {\n  position: relative;\n  display: inline-flex;\n  flex-direction: row;\n  gap: calc(var(--segmented-control-padding-horizontal) * 2);\n  align-items: center;\n  min-width: 100%;\n  padding: var(--segmented-control-padding-vertical) var(--segmented-control-padding-horizontal);\n  border-radius: var(--segmented-control-background-radius);\n  background: var(--segmented-control-background-normal-state-color);\n}\n\n:host([disabled]) {\n  background: var(--segmented-control-background-disabled-state-color);\n  color: var(--segmented-control-option-label-disabled-state-color);\n}\n\n::slotted(.market-segment) {\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n}\n\n:host::before {\n  content: \"\";\n  position: absolute;\n  left: var(--selected-slider-left);\n  z-index: 1;\n  width: var(--selected-slider-width);\n  height: calc(100% - var(--segmented-control-padding-vertical) * 2);\n  border-radius: var(--segmented-control-option-background-radius);\n  background: var(--segmented-control-option-background-selected-state-color);\n  box-shadow: var(--elevation-10-shadow);\n  transition: left var(--segmented-control-animation-duration);\n}\n","import { SEGMENTED_CONTROL_PADDING_HORIZONTAL } from '@market/market-theme/js/cjs/index.js';\nimport { Component, Host, Prop, h, Listen, Element, Watch, State, Event, EventEmitter } from '@stencil/core';\nimport { getNamespacedTagFor } from '../../utils/namespace';\n\nfunction isValueEmpty(value: unknown): boolean {\n  return value === '' || value === ' ' || value === null || value === undefined;\n}\n@Component({\n  tag: 'market-segmented-control',\n  styleUrl: 'market-segmented-control.css',\n  shadow: true,\n})\nexport class MarketSegmentedControl {\n  selectedSlider: HTMLElement;\n  @Element() el: HTMLMarketSegmentedControlElement;\n  @State() items: NodeListOf<HTMLMarketSegmentElement>;\n\n  /**\n   * A string specifying a value for the segmented-control.\n   * This value determines which segment is selected based on the segment value.\n   */\n  @Prop({ mutable: true, reflect: true }) value: string = '';\n\n  /**\n   * A boolean representing whether the market-segmented-control is disabled or not.\n   * This visually and functionally will disable the control area.\n   */\n  @Prop({ reflect: true }) readonly disabled: boolean = false;\n\n  @Watch('value')\n  valueWatcher() {\n    this.setSelectionsFromValue();\n  }\n\n  /**\n   * If a segment gets slotted in, set the value to match that of the row\n   */\n  @Watch('disabled')\n  disabledChangeHandler() {\n    this.items?.forEach((item) => (item.disabled = this.disabled));\n  }\n\n  /**\n   * Fired when the a new segment is selected\n   */\n  @Event({ bubbles: true, composed: true }) marketSegmentedSelectionDidChange: EventEmitter<{\n    selectedSegment: HTMLMarketSegmentElement;\n    selectedSegmentValue: string;\n    deselectedSegment: HTMLMarketSegmentElement;\n    deselectedSegmentValue: string;\n  }>;\n\n  /**\n   * Select item that corresponds to passed value, or clear all values if value is empty string.\n   */\n  setSelectionsFromValue() {\n    this.items?.forEach((item) => {\n      if (this.value === item.value) {\n        item.setSelectedState(true);\n        this.setSliderPosition(item);\n      } else {\n        item.setSelectedState(false);\n      }\n    });\n  }\n\n  /**\n   * Sets the initial state of the segmented-control by updating and propagating props and setting\n   * default value.\n   */\n  setInternalState() {\n    this.items = this.el.querySelectorAll(`${getNamespacedTagFor('market-segment')}`);\n    this.selectedSlider = this.el.shadowRoot.getElementById('selected-slider');\n    if (this.items.length > 0) {\n      if (isValueEmpty(this.value)) {\n        this.value = this.items[0].value;\n      }\n      this.setSelectionsFromValue();\n    }\n  }\n\n  /**\n   * Sets slider size to be the size of a segment\n   */\n  setSliderSize() {\n    this.el.style.setProperty(\n      '--selected-slider-width',\n      `calc(${100 / this.items?.length}% - ${SEGMENTED_CONTROL_PADDING_HORIZONTAL * 2}px)`,\n    );\n  }\n\n  /**\n   * Sets slider position (left offset) based on the currently selected item\n   */\n  setSliderPosition(selectedItem = undefined) {\n    if (!selectedItem) {\n      this.el.style.setProperty('--selected-slider-left', `${SEGMENTED_CONTROL_PADDING_HORIZONTAL}px`);\n      return;\n    }\n\n    const newSelectionIndex = [...this.items].indexOf(selectedItem);\n    this.el.style.setProperty(\n      '--selected-slider-left',\n      `calc(${(newSelectionIndex / this.items.length) * 100}% + ${SEGMENTED_CONTROL_PADDING_HORIZONTAL}px)`,\n    );\n  }\n\n  /**\n   * Sets the initial state of the segmented-control by updating and propagating props and setting\n   * default value.\n   */\n\n  defaultSlotchangeHandler() {\n    this.setInternalState();\n    this.setSliderSize();\n  }\n\n  @Listen('marketSegmentSelectedChanged')\n  marketSegmentSelectedEventHandler(e: CustomEvent) {\n    const newSelection = e.target as HTMLMarketSegmentElement;\n\n    const prevSelection = this.el.querySelector(`${getNamespacedTagFor('market-segment')}[selected]`) as\n      | HTMLMarketSegmentElement\n      | undefined;\n\n    prevSelection?.setSelectedState(false);\n    newSelection.setSelectedState(true);\n\n    this.setSliderPosition(newSelection);\n\n    this.marketSegmentedSelectionDidChange.emit({\n      selectedSegment: newSelection,\n      selectedSegmentValue: newSelection.value,\n      deselectedSegment: prevSelection,\n      deselectedSegmentValue: prevSelection?.value,\n    });\n  }\n\n  render() {\n    return (\n      <Host class=\"market-segmented-control\">\n        <slot onSlotchange={() => this.defaultSlotchangeHandler()}></slot>\n      </Host>\n    );\n  }\n}\n"],"mappings":"wIAAA,MAAMA,EAA4B,+rCAClC,MAAAC,EAAeD,ECGf,SAASE,EAAaC,GACpB,OAAOA,IAAU,IAAMA,IAAU,KAAOA,IAAU,MAAQA,IAAUC,SACtE,C,MAMaC,EAAsB,M,8IASuB,G,cAMF,K,CAGtD,YAAAC,GACEC,KAAKC,wB,CAOP,qBAAAC,G,OACEC,EAAAH,KAAKI,SAAK,MAAAD,SAAA,SAAAA,EAAEE,SAASC,GAAUA,EAAKC,SAAWP,KAAKO,U,CAgBtD,sBAAAN,G,OACEE,EAAAH,KAAKI,SAAK,MAAAD,SAAA,SAAAA,EAAEE,SAASC,IACnB,GAAIN,KAAKJ,QAAUU,EAAKV,MAAO,CAC7BU,EAAKE,iBAAiB,MACtBR,KAAKS,kBAAkBH,E,KAClB,CACLA,EAAKE,iBAAiB,M,KAS5B,gBAAAE,GACEV,KAAKI,MAAQJ,KAAKW,GAAGC,iBAAiB,GAAGC,EAAoB,qBAC7Db,KAAKc,eAAiBd,KAAKW,GAAGI,WAAWC,eAAe,mBACxD,GAAIhB,KAAKI,MAAMa,OAAS,EAAG,CACzB,GAAItB,EAAaK,KAAKJ,OAAQ,CAC5BI,KAAKJ,MAAQI,KAAKI,MAAM,GAAGR,K,CAE7BI,KAAKC,wB,EAOT,aAAAiB,G,MACElB,KAAKW,GAAGQ,MAAMC,YACZ,0BACA,QAAQ,MAAMjB,EAAAH,KAAKI,SAAK,MAAAD,SAAA,SAAAA,EAAEc,cAAaI,uCAAuC,O,CAOlF,iBAAAZ,CAAkBa,EAAezB,WAC/B,IAAKyB,EAAc,CACjBtB,KAAKW,GAAGQ,MAAMC,YAAY,yBAA0B,GAAGC,4CACvD,M,CAGF,MAAME,EAAoB,IAAIvB,KAAKI,OAAOoB,QAAQF,GAClDtB,KAAKW,GAAGQ,MAAMC,YACZ,yBACA,QAASG,EAAoBvB,KAAKI,MAAMa,OAAU,UAAUI,4C,CAShE,wBAAAI,GACEzB,KAAKU,mBACLV,KAAKkB,e,CAIP,iCAAAQ,CAAkCC,GAChC,MAAMC,EAAeD,EAAEE,OAEvB,MAAMC,EAAgB9B,KAAKW,GAAGoB,cAAc,GAAGlB,EAAoB,+BAInEiB,IAAa,MAAbA,SAAa,SAAbA,EAAetB,iBAAiB,OAChCoB,EAAapB,iBAAiB,MAE9BR,KAAKS,kBAAkBmB,GAEvB5B,KAAKgC,kCAAkCC,KAAK,CAC1CC,gBAAiBN,EACjBO,qBAAsBP,EAAahC,MACnCwC,kBAAmBN,EACnBO,uBAAwBP,IAAa,MAAbA,SAAa,SAAbA,EAAelC,O,CAI3C,MAAA0C,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,2CAACC,MAAM,4BACVH,EAAA,QAAAE,IAAA,2CAAME,aAAc,IAAM3C,KAAKyB,6B"}