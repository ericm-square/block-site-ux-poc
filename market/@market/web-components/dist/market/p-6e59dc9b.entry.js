import{r as t,c as e,h as i,H as r,g as s}from"./p-c9795ae2.js";import{i as n,g as o}from"./p-1a71929d.js";import{a,h as d,p as h}from"./p-0e71a2b9.js";import{t as c}from"./p-a6d610dc.js";import"./p-632cbbe7.js";import"./p-c4e5a9dd.js";const p=":host{--primary-gradient-height:var(--color-picker-adjustments-hue-min-height);--gradient-border-radius:var(--color-picker-adjustments-hue-radius);--gradient-margin:var(--color-picker-vertical-spacing);--secondary-gradient-height:calc(var(--color-picker-adjustments-saturation-brightness-min-height) * 1px);--gradient-pointer-width:12px;--gradient-pointer-height:12px;--gradient-pointer-border:2px white solid;--gradient-pointer-border-radius:50%;display:block}.primary-gradient{position:relative;width:100%;height:var(--primary-gradient-height);border-radius:var(--gradient-border-radius);background:linear-gradient(\n      to right,\n      hsl(0deg 100% 50%),\n      hsl(60deg 100% 50%),\n      hsl(120deg 100% 50%),\n      hsl(180deg 100% 50%),\n      hsl(240deg 100% 50%),\n      hsl(300deg 100% 50%),\n      hsl(0deg 100% 50%)\n    )}.secondary-gradient{position:relative;width:100%;height:var(--secondary-gradient-height);margin-top:var(--gradient-margin);border-radius:var(--gradient-border-radius)}.pointer{position:absolute;z-index:2;width:var(--gradient-pointer-width);height:var(--gradient-pointer-height);border:var(--gradient-pointer-border);border-radius:var(--gradient-pointer-border-radius);box-shadow:var(--elevation-20-shadow)}#primary-pointer{top:calc(50% - 8px)}";const l=p;const g=16;const u="primary-pointer";const m="secondary-pointer";const b=[50,50];const v=[95,10];const f=class{constructor(i){t(this,i);this.marketColorPickerGradientValueChange=e(this,"marketColorPickerGradientValueChange",7);this.secondaryPointerCoordinates=v;this.boundOnDragMove=this.onDragMove.bind(this);this.boundOnDragEnd=this.onDragEnd.bind(this);this.throttledUpdatePointerOnDrag=c(this.updatePointerOnDrag.bind(this),g);this.value=undefined}onDragStart(t,e){t.preventDefault();t.stopPropagation();if(!n(t)&&t.button!==0)return;const i=o(t);this.updatePointerOnDrag(i.x,i.y,e);this.draggablePointer=e;document.addEventListener("mousemove",this.boundOnDragMove);document.addEventListener("mouseup",this.boundOnDragEnd);document.addEventListener("touchmove",this.boundOnDragMove,{passive:false});document.addEventListener("touchend",this.boundOnDragEnd,{passive:false})}onDragMove(t){t.preventDefault();const e=o(t);this.throttledUpdatePointerOnDrag(e.x,e.y,this.draggablePointer)}onDragEnd(t){t.preventDefault();this.draggablePointer=null;document.removeEventListener("mousemove",this.boundOnDragMove);document.removeEventListener("mouseup",this.boundOnDragEnd);document.removeEventListener("touchmove",this.boundOnDragMove);document.removeEventListener("touchend",this.boundOnDragEnd)}updatePointerOnDrag(t,e,i){const r=i.parentElement;if(!r){return}const s=r.getBoundingClientRect();const n=s.left;const o=s.top;const a=s.width;const d=s.height;let h=(t-n)/a;let c=(e-o)/d;h=Math.max(Math.min(h,1),0);c=Math.max(Math.min(c,1),0);this.setPointerCoordinates({pointer:i,x:h*100,y:c*100})}setPointerCoordinates(t){const{pointer:e,x:i,y:r=50,emitEvent:s=true,colorType:n=""}=t;const o=e.offsetWidth/2;e.style.left=`calc(${i}% - ${o}px)`;if(e.id===u){this.setPrimaryGradientColor(i/100,s)}else if(e.id===m){e.style.top=`calc(${r}% - ${o}px)`;this.setSecondaryGradientColor(i/100,r/100,s,n)}}setPrimaryGradientColor(t,e=true){this.primaryHue=t*360;this.primaryPointer.style.background=`hsl(${this.primaryHue}, 100%, 50%)`;this.updateSecondaryGradient(e)}setSecondaryGradientColor(t,e,i=true,r=""){const s=t*100;const n=100-e*100;let o;let h;if(r==="rgba"){o=a(this.primaryHue,s,n);h=`rgb(${o[0]}, ${o[1]}, ${o[2]})`}else{o=d(this.primaryHue,s,n);h=`#${o.join("")}`}this.secondaryPointer.style.background=h;this.secondaryPointerCoordinates=[t,e];if(i){this.marketColorPickerGradientValueChange.emit({value:h})}}updateSecondaryGradient(t=true){const e=this.el.shadowRoot.querySelector(".secondary-gradient");e.style.background=`\n      linear-gradient(to top, rgb(0, 0, 0), transparent),\n      linear-gradient(to left, hsl(${this.primaryHue}, 100%, 50%), rgb(255, 255, 255))\n    `;this.setSecondaryGradientColor(...this.secondaryPointerCoordinates,t)}updateGradientsByValue(){const t=h(this.value);if(t.values&&this.primaryPointer&&this.secondaryPointer){const e=t.values[0];const i=t.values[1];const r=t.values[2];const s=100*e/360;const n=i;const o=100-r;const a={pointer:this.primaryPointer,x:s,emitEvent:false};const d={pointer:this.secondaryPointer,x:n,y:o,colorType:t.colorType,emitEvent:false};this.setPointerCoordinates(a);this.setPointerCoordinates(d);return true}return false}setInitialPointers(){const t=[this.primaryPointer,this.secondaryPointer];const e=[b,v];t.forEach(((t,i)=>{const r={pointer:t,x:e[i][0],y:e[i][1],emitEvent:false};this.setPointerCoordinates(r)}))}componentDidLoad(){this.primaryPointer=this.el.shadowRoot.querySelector(`#${u}`);this.secondaryPointer=this.el.shadowRoot.querySelector(`#${m}`);const t=this.updateGradientsByValue();if(!t){this.setInitialPointers()}}render(){return i(r,{key:"27b14b18a7e6c1035e8c062f8125918f7cc4a2c2",class:"market-color-picker-gradient"},i("slot",{key:"5abf8dc220282ff102cd8b5011849a35e79a4596"}),i("div",{key:"036d0b665d8f536d8e89e9e44a11c0a323ebe648",class:"primary-gradient",role:"input",onMouseDown:t=>this.onDragStart(t,this.primaryPointer),onTouchStart:t=>this.onDragStart(t,this.primaryPointer)},i("div",{key:"96d5a6573888eb84d0c8833f493a4feb2869466c",id:u,class:"pointer"})),i("div",{key:"825d8adfc5eb558d5114d540b9d054b8085967a5",class:"secondary-gradient",role:"input",onMouseDown:t=>this.onDragStart(t,this.secondaryPointer),onTouchStart:t=>this.onDragStart(t,this.secondaryPointer)},i("div",{key:"3b8b8955b967f45d3bac7b57b5904c52d71f1d34",id:m,class:"pointer"})))}get el(){return s(this)}static get watchers(){return{value:["updateGradientsByValue"]}}};f.style=l;export{f as market_color_picker_gradient};
//# sourceMappingURL=p-6e59dc9b.entry.js.map