{"version":3,"names":["getReadableFilesize","bytes","decimals","Number","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","marketFileUploadCss","MarketFileUploadStyle0","MarketFileUpload","watchValueHandler","newValue","Array","isArray","this","files","multiple","watchDisabledHandler","slottedCompactButtons","forEach","el","disabled","hasSingleFileSelected","length","interactiveElementTagnames","Set","getNamespacedTagFor","querySelector","children","filter","has","tagName","toLowerCase","draggingOver","e","isDraggingOver","preventDefault","endDrag","type","dataTransfer","addFiles","handleButtonClick","fileInputElement","click","handleDeleteKeydown","index","key","removeFile","splice","emitFileChange","labelContainerClassNames","classNames","push","onInputChange","target","value","marketFileUploadValueChange","emit","handleCompactSlotChange","removeEventListener","bind","addEventListener","componentWillLoad","componentDidLoad","renderFilesAsMarketRows","MarketRowTagName","MarketAccessoryTagName","MarketIconTagName","map","file","rowConfig","_a","fileMetadata","find","row","filename","name","leadingIcon","startsWith","trailingIcon","secondaryText","fileSubtext","status","message","leadingIconName","h","interactive","transient","slot","size","fidelity","tabindex","role","deleteButtonAriaLabel","onKeyDown","onClick","render","MarketListTagName","MarketFieldTagName","MarketButtonTagName","fileMarketRows","showUploadLabel","showList","Host","class","ondragenter","ondragover","ondragleave","ondrop","invalid","onSlotchange","rank","ref","onChange","accept","hidden"],"sources":["src/utils/filesize/index.ts","src/components/market-file-upload/market-file-upload.css?tag=market-file-upload&encapsulation=shadow","src/components/market-file-upload/market-file-upload.tsx"],"sourcesContent":["/**\n * Returns byte size as a human-readable string.\n * Cribbed from https://stackoverflow.com/a/18650828\n *\n * @param bytes File size in bytes\n * @param decimals Decimal precision\n */\nexport const getReadableFilesize = (bytes: number, decimals = 2) => {\n  if (!Number(bytes)) return '0 bytes';\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['bytes', 'kB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${Number.parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n","/* TODO: add design tokens for component */\n\n@import \"../../styles/mixins/component-base.css\";\n@import \"../../styles/mixins/typography.css\";\n\n.label-container {\n  border-width: var(--file-upload-border-width, 1px);\n  border-style: var(--file-upload-normal-state-border-style, dashed);\n  border-color: var(--file-upload-normal-state-border-color, var(--core-fill-30-color));\n  border-radius: var(--file-upload-border-radius, 6px);\n  transition: background-color border-color 0.2s;\n\n  & > label {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding:\n      var(--file-upload-dropzone-vertical-padding, var(--core-metrics-spacing-400))\n      var(--file-upload-dropzone-horizontal-padding, var(--core-metrics-spacing-400));\n    text-align: center;\n    cursor: pointer;\n\n    .market-icon {\n      color: var(--file-upload-label-fill-color, var(--core-text-10-color));\n    }\n  }\n\n  /* Overriding market-row margin since it overflows the container natively */\n  & > .market-row {\n    margin: 0;\n  }\n}\n\nbutton,\n.market-button,\n::slotted(button),\n::slotted(.market-button),\n::slotted(.market-link) {\n  @extend %semibold-30;\n\n  padding: 0;\n}\n\nslot:not([name=\"compact\"]) {\n  button,\n  .market-button,\n  ::slotted(button),\n  ::slotted(.market-button),\n  ::slotted(.market-link) {\n    /* removes the default button styling for drop zone content */\n    border: none;\n    background-color: inherit;\n    color: var(--file-upload-button-label-color, var(--button-normal-variant-tertiary-rank-normal-state-label-color));\n    font-family: inherit;\n    text-align: right;\n    cursor: pointer;\n  }\n}\n\n.has-file-selected {\n  /* stylelint-disable-next-line declaration-no-important */\n  border-style: var(--file-upload-file-selected-state-border-style, solid) !important;\n  border-color: var(--file-upload-file-selected-state-border-color, var(--core-fill-30-color));\n}\n\n@media (hover: hover) {\n  :host(:hover) .label-container {\n    border-style: var(--file-upload-hover-state-border-style, dashed);\n    border-color: var(--file-upload-hover-state-border-color, var(--core-emphasis-fill-color));\n    background-color: var(--file-upload-hover-state-background-color, var(--core-emphasis-40-color));\n  }\n}\n\n:host(:active) {\n  .label-container,\n  .is-dragging-over {\n    border-style: var(--file-upload-active-state-border-style, dashed);\n    border-color: var(--file-upload-active-state-border-color, var(--core-emphasis-fill-color));\n    background-color: var(--file-upload-active-state-background-color, var(--core-emphasis-30-color));\n  }\n}\n\n:host([disabled]) {\n  .label-container {\n    border-style: var(--file-upload-disabled-state-border-style, dashed);\n    border-color: var(--file-upload-disabled-state-border-color, var(--field-disabled-state-border-color));\n    background-color: var(--file-upload-disabled-state-background-color, var(--field-disabled-state-background-color));\n    color: var(--file-upload-disabled-state-label-color, var(--field-disabled-state-empty-phase-label-color));\n  }\n\n  button,\n  ::slotted(button),\n  ::slotted(.market-button),\n  ::slotted(.market-icon),\n  ::slotted(.market-link),\n  label .market-icon,\n  label ::slotted(.market-icon) {\n    opacity: 30%;\n  }\n}\n\n/* COMPACT MODE */\n\nslot[name=\"compact-action\"] {\n  display: none;\n}\n\n:host([compact]) {\n  slot[name=\"compact-action\"] {\n    display: block;\n    width: 100%;\n  }\n\n  slot:not([name=\"compact-action\"]) {\n    display: none;\n  }\n\n  .label-container {\n    border-style: unset;\n    border-color: unset;\n    background-color: unset;\n\n    & > label {\n      padding: 0;\n    }\n  }\n\n  .market-button,\n  .market-link,\n  ::slotted(.market-button),\n  ::slotted(.market-link) {\n    width: 100%;\n  }\n}\n\n/* FILE ROWS */\n\n.market-list {\n  margin-top: var(--file-upload-dropzone-vertical-margin, var(--core-metrics-spacing-100));\n}\n\n/* leading accessory */\n.market-accessory[slot=\"leading-accessory\"] {\n  border-radius: var(--file-upload-border-radius, 6px);\n  background-color: var(--file-upload-leading-accessory-background-color, var(--core-fill-40-color));\n}\n\n/* trailing accessory */\n.market-accessory[slot=\"trailing-accessory\"] {\n  cursor: pointer;\n\n  .market-icon {\n    color: var(--file-upload-delete-fill-color, var(--core-fill-20-color));\n  }\n}\n\n/*  error/success/loading rows */\n[data-status]:not([data-status=\"\"]) .market-accessory[slot=\"leading-accessory\"] {\n  background-color: unset;\n}\n\n[data-status=\"error\"] [slot=\"subtext\"],\n[data-status=\"error\"] .market-accessory[slot=\"leading-accessory\"] {\n  color: var(--file-upload-leading-accessory-error-color, var(--core-critical-fill-color));\n}\n\n:host([disabled]) [data-status=\"error\"] [slot=\"subtext\"] {\n  opacity: 30%;\n}\n\n[data-status=\"success\"] .market-accessory[slot=\"leading-accessory\"] {\n  color: var(--file-upload-leading-accessory-success-color, var(--core-success-fill-color));\n}\n\n[data-status=\"loading\"] .market-accessory[slot=\"leading-accessory\"] {\n  animation: market-file-upload-loading-rotation 1s infinite linear;\n}\n\n@keyframes market-file-upload-loading-rotation {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* DEPRECATED FEATURES / SLOTS */\n\n:host([invalid]) {\n  .label-container {\n    border-color: var(--field-normal-state-invalid-validity-border-color);\n  }\n}\n\n::slotted([slot=\"bottom-accessory\"]) {\n  color: var(--core-text-20-color);\n}\n","import { Component, Element, Event, Host, h, State, Prop, EventEmitter, Watch } from '@stencil/core';\nimport { getReadableFilesize } from '../../utils/filesize';\nimport { getNamespacedTagFor } from '../../utils/namespace';\nimport { TMarketFileUploadFileConfig } from './types';\n\n/**\n * @slot - Used for drop zone content. Intended for an icon (optional), main text, and secondary text (optional).\n * @slot compact-action - Used for \"compact\" mode content. Intended for use with a `market-button` or `market-link`. When this\n * slot is used, default slot content must also be provided. Visible when `compact` is true.\n * @slot bottom-accessory - DEPRECATED: Used for the bottom accessory text. We recommend using the default slot\n * to add secondary text to the drop zone content instead.\n * @slot error - DEPRECATED: Used for input-level error text. We recommend using the fileMetadata prop to set error\n * status and messages on the file level instead.\n */\n\n@Component({\n  tag: 'market-file-upload',\n  styleUrl: 'market-file-upload.css',\n  shadow: true,\n})\nexport class MarketFileUpload {\n  @Element() el: HTMLMarketFileUploadElement;\n\n  /**\n   * String that is a list of file types the uploader should accept. This is\n   * passed to the internal `<input type=\"file\"/>` tag. For more info, see the\n   * [MDN docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept).\n   */\n  @Prop() readonly accept: string = '';\n\n  /**\n   * An array of File objects that can be passed in. (If using vanilla JS, this must be set using JS and not in the HTML markup.)\n   */\n  @Prop() readonly value: Array<File> = [];\n\n  /**\n   * Functionally and visually disables the file picker.\n   */\n  @Prop({ reflect: true }) readonly disabled: boolean = false;\n\n  /**\n   * DEPRECATED: Represents whether the input is invalid or not. This represents input-level error states.\n   * We recommend using the fileMetadata prop to set error status and messages on the file level instead.\n   */\n  @Prop({ reflect: true }) readonly invalid: boolean = false;\n\n  /**\n   * Represents whether the selector allows multiple files\n   * to be selected.\n   */\n  @Prop({ reflect: true }) readonly multiple: boolean = false;\n\n  /**\n   * Used to toggle \"compact mode\" (for use on mobile devices and when space is limited)\n   */\n  @Prop({ reflect: true }) readonly compact: boolean = false;\n\n  /**\n   * What type of secondary information, if any, to display on all file rows\n   */\n  @Prop() readonly fileSubtext?: 'size' | 'type';\n\n  /**\n   * What type of custom information, if any, to display on specified file rows.\n   * Expects an array of TMarketFileUploadFileConfig objects (must be set using JS and not in the HTML markup), which\n   * must include `filename` and can include an optional `status`, `message`, or `leadingIconName`.\n   * Note that `message` is only shown when `status` is `'error'`, and `leadingIconName` expects the semantic or\n   * descriptive name of an existing `market-icon`.\n   */\n  @Prop() readonly fileMetadata?: Array<TMarketFileUploadFileConfig>;\n\n  /**\n   * Optional property passed to the delete icons on selected file\n   * rows that will function as its aria-label. Defaults to \"Delete\".\n   */\n  @Prop({ reflect: true }) readonly deleteButtonAriaLabel: string = 'Delete';\n\n  /**\n   * Tracks whether a file is being dragged over the component.\n   */\n  @State() isDraggingOver: boolean = false;\n\n  /**\n   * Files that have been selected by the user either via drag & drop or\n   * the file selector.\n   */\n  @State() files: Array<File>;\n\n  /**\n   * Triggered when the selected files array changes.\n   */\n  @Event() marketFileUploadValueChange: EventEmitter<{ value: Array<File> }>;\n\n  @Watch('value')\n  watchValueHandler(newValue: Array<File>) {\n    if (Array.isArray(newValue)) {\n      this.files = this.multiple ? [...newValue] : [newValue[0]];\n    }\n  }\n\n  @Watch('disabled')\n  watchDisabledHandler() {\n    this.slottedCompactButtons.forEach((el) => (el.disabled = this.disabled));\n  }\n\n  /**\n   * We want to disable certain functions if multiple is false and a file has been selected\n   */\n  get hasSingleFileSelected(): boolean {\n    return !this.multiple && this.files.length === 1;\n  }\n\n  /* returns `market-button` or `market-link` elements in the \"compact\" slot */\n  get slottedCompactButtons() {\n    const interactiveElementTagnames = new Set([\n      getNamespacedTagFor('market-button'),\n      getNamespacedTagFor('market-link'),\n    ]) as Set<string>;\n    return [...this.el.querySelector('[slot=\"compact-action\"]').children].filter((el) =>\n      interactiveElementTagnames.has(el.tagName.toLowerCase()),\n    ) as [HTMLMarketButtonElement | HTMLMarketLinkElement];\n  }\n\n  private fileInputElement: HTMLInputElement;\n\n  draggingOver(e) {\n    if (this.disabled || this.hasSingleFileSelected) {\n      return;\n    }\n\n    this.isDraggingOver = true;\n    e.preventDefault();\n  }\n\n  endDrag(e) {\n    e.preventDefault();\n    if (this.disabled || this.hasSingleFileSelected) {\n      return;\n    }\n\n    this.isDraggingOver = false;\n    if (e.type === 'drop' && e.dataTransfer) {\n      this.addFiles(e.dataTransfer.files);\n    }\n  }\n\n  handleButtonClick() {\n    this.fileInputElement.click();\n  }\n\n  handleDeleteKeydown(e, index) {\n    if (e.key === 'Enter' && !this.disabled) {\n      this.removeFile(index);\n    }\n  }\n\n  removeFile(index: number) {\n    this.files.splice(index, 1);\n    this.files = [...this.files];\n    this.emitFileChange();\n  }\n\n  labelContainerClassNames() {\n    const classNames = [];\n    if (this.isDraggingOver) {\n      classNames.push('is-dragging-over');\n    }\n    if (this.hasSingleFileSelected) {\n      classNames.push('has-file-selected');\n    }\n\n    return classNames;\n  }\n\n  onInputChange(e) {\n    this.addFiles(e.target.files);\n    // unset the file input value so that we can re-add files\n    // if they are removed by the user\n    this.fileInputElement.value = '';\n  }\n\n  addFiles(files: Array<File>) {\n    if (files) {\n      if (!this.multiple) {\n        this.files = [files[0]];\n      } else {\n        this.files = [...files, ...this.files];\n      }\n    }\n    this.emitFileChange();\n  }\n\n  emitFileChange() {\n    this.marketFileUploadValueChange.emit({ value: this.files });\n  }\n\n  handleCompactSlotChange() {\n    this.slottedCompactButtons.forEach((el) => {\n      el.removeEventListener('click', this.handleButtonClick.bind(this));\n      if (!this.disabled) {\n        el.addEventListener('click', this.handleButtonClick.bind(this));\n      }\n      el.disabled = this.disabled;\n    });\n  }\n\n  componentWillLoad() {\n    if (this.value) {\n      this.files = [...this.value];\n    } else {\n      this.files = [];\n    }\n  }\n\n  componentDidLoad() {\n    this.handleCompactSlotChange();\n  }\n\n  renderFilesAsMarketRows() {\n    const MarketRowTagName = getNamespacedTagFor('market-row');\n    const MarketAccessoryTagName = getNamespacedTagFor('market-accessory');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n\n    return this.files.map((file, index) => {\n      const rowConfig = this.fileMetadata?.find((row) => row.filename === file.name);\n\n      // set default icons\n      let leadingIcon = file.type.startsWith('image/') ? 'picture' : 'file';\n      let trailingIcon = 'delete';\n\n      // set default secondary text\n      let secondaryText;\n      switch (this.fileSubtext) {\n        case 'size':\n          secondaryText = getReadableFilesize(file[this.fileSubtext]);\n          break;\n        case 'type':\n          secondaryText = file[this.fileSubtext];\n          break;\n        default:\n          break;\n      }\n\n      // row config status overrides default row appearance\n      switch (rowConfig?.status) {\n        case 'error':\n          leadingIcon = 'warning';\n          trailingIcon = 'clear';\n          // message only displayed if status = error\n          secondaryText = rowConfig?.message;\n          break;\n        case 'loading':\n          leadingIcon = 'loading';\n          trailingIcon = 'clear';\n          break;\n        case 'success':\n          leadingIcon = 'success';\n          break;\n        default:\n          break;\n      }\n\n      // row config custom icon overrides previously set leading icon\n      leadingIcon = rowConfig?.leadingIconName || leadingIcon;\n\n      return (\n        <MarketRowTagName\n          disabled={this.disabled}\n          interactive\n          transient\n          data-index={index}\n          data-status={rowConfig?.status}\n        >\n          <label slot=\"label\">{file.name}</label>\n          {secondaryText && <p slot=\"subtext\">{secondaryText}</p>}\n          <MarketAccessoryTagName slot=\"leading-accessory\" size=\"image\">\n            <MarketIconTagName name={leadingIcon} fidelity={24}></MarketIconTagName>\n          </MarketAccessoryTagName>\n          <MarketAccessoryTagName\n            slot=\"trailing-accessory\"\n            size=\"icon\"\n            tabindex={this.disabled ? -1 : 0}\n            role=\"button\"\n            aria-label={this.deleteButtonAriaLabel}\n            onKeyDown={(e) => this.handleDeleteKeydown(e, index)}\n            onClick={() => this.removeFile(index)}\n          >\n            <MarketIconTagName name={trailingIcon} fidelity={24}></MarketIconTagName>\n          </MarketAccessoryTagName>\n        </MarketRowTagName>\n      );\n    });\n  }\n\n  render() {\n    const MarketListTagName = getNamespacedTagFor('market-list');\n    const MarketAccessoryTagName = getNamespacedTagFor('market-accessory');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n    const MarketFieldTagName = getNamespacedTagFor('market-field');\n    const MarketButtonTagName = getNamespacedTagFor('market-button');\n\n    const fileMarketRows = this.renderFilesAsMarketRows();\n    const showUploadLabel = this.multiple || fileMarketRows.length === 0;\n    const showList = this.multiple && fileMarketRows.length > 0;\n\n    return (\n      <Host\n        class=\"market-file-upload\"\n        ondragenter={(e) => this.draggingOver(e)}\n        ondragover={(e) => this.draggingOver(e)}\n        ondragleave={(e) => this.endDrag(e)}\n        ondrop={(e) => this.endDrag(e)}\n      >\n        <MarketFieldTagName disabled={this.disabled} invalid={this.invalid}>\n          <div class={`label-container ${this.labelContainerClassNames()}`}>\n            {!showUploadLabel && fileMarketRows[0]}\n            {showUploadLabel && (\n              // the input is correctly wrapped inside its label, but eslint gets confused by label > span > slot > text\n              // eslint-disable-next-line jsx-a11y/label-has-associated-control\n              <label>\n                <slot>\n                  <MarketAccessoryTagName size=\"image\">\n                    <MarketIconTagName name=\"file\" fidelity={24}></MarketIconTagName>\n                  </MarketAccessoryTagName>\n                  <span>\n                    <button onClick={() => this.handleButtonClick()}>Choose a file</button> or drag and drop it here\n                  </span>\n                </slot>\n                <slot name=\"compact-action\" onSlotchange={() => this.handleCompactSlotChange()}>\n                  <MarketButtonTagName rank=\"primary\" disabled={this.disabled} onClick={() => this.handleButtonClick()}>\n                    Upload file\n                  </MarketButtonTagName>\n                </slot>\n                <input\n                  ref={(el) => (this.fileInputElement = el)}\n                  onChange={(e) => this.onInputChange(e)}\n                  type=\"file\"\n                  name=\"files[]\"\n                  multiple={this.multiple}\n                  accept={this.accept}\n                  hidden\n                />\n              </label>\n            )}\n          </div>\n          {/* DEPRECATED: bottom-accessory slot, to be removed in future major version */}\n          <slot name=\"bottom-accessory\">\n            <small slot=\"bottom-accessory\"></small>\n          </slot>\n          {/* DEPRECATED: error slot, to be removed in future major version */}\n          <slot name=\"error\">\n            <small slot=\"error\"></small>\n          </slot>\n        </MarketFieldTagName>\n        {showList && (\n          <MarketListTagName interactive transient>\n            {fileMarketRows}\n          </MarketListTagName>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"oGAOO,MAAMA,EAAsB,CAACC,EAAeC,EAAW,KAC5D,IAAKC,OAAOF,GAAQ,MAAO,UAC3B,MAAMG,EAAI,KACV,MAAMC,EAAKH,EAAW,EAAI,EAAIA,EAC9B,MAAMI,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,MAC1C,MAAMC,EAAIC,KAAKC,MAAMD,KAAKE,IAAIT,GAASO,KAAKE,IAAIN,IAChD,MAAO,GAAGD,OAAOQ,YAAYV,EAAQO,KAAKI,IAAIR,EAAGG,IAAIM,QAAQR,OAAQC,EAAMC,IAAI,ECbjF,MAAMO,EAAsB,yrKAC5B,MAAAC,EAAeD,E,MCmBFE,EAAgB,M,8GAQO,G,WAKI,G,cAKgB,M,aAMD,M,cAMC,M,aAKD,M,kFAoBa,S,oBAK/B,M,qBAcnC,iBAAAC,CAAkBC,GAChB,GAAIC,MAAMC,QAAQF,GAAW,CAC3BG,KAAKC,MAAQD,KAAKE,SAAW,IAAIL,GAAY,CAACA,EAAS,G,EAK3D,oBAAAM,GACEH,KAAKI,sBAAsBC,SAASC,GAAQA,EAAGC,SAAWP,KAAKO,U,CAMjE,yBAAIC,GACF,OAAQR,KAAKE,UAAYF,KAAKC,MAAMQ,SAAW,C,CAIjD,yBAAIL,GACF,MAAMM,EAA6B,IAAIC,IAAI,CACzCC,EAAoB,iBACpBA,EAAoB,iBAEtB,MAAO,IAAIZ,KAAKM,GAAGO,cAAc,2BAA2BC,UAAUC,QAAQT,GAC5EI,EAA2BM,IAAIV,EAAGW,QAAQC,gB,CAM9C,YAAAC,CAAaC,GACX,GAAIpB,KAAKO,UAAYP,KAAKQ,sBAAuB,CAC/C,M,CAGFR,KAAKqB,eAAiB,KACtBD,EAAEE,gB,CAGJ,OAAAC,CAAQH,GACNA,EAAEE,iBACF,GAAItB,KAAKO,UAAYP,KAAKQ,sBAAuB,CAC/C,M,CAGFR,KAAKqB,eAAiB,MACtB,GAAID,EAAEI,OAAS,QAAUJ,EAAEK,aAAc,CACvCzB,KAAK0B,SAASN,EAAEK,aAAaxB,M,EAIjC,iBAAA0B,GACE3B,KAAK4B,iBAAiBC,O,CAGxB,mBAAAC,CAAoBV,EAAGW,GACrB,GAAIX,EAAEY,MAAQ,UAAYhC,KAAKO,SAAU,CACvCP,KAAKiC,WAAWF,E,EAIpB,UAAAE,CAAWF,GACT/B,KAAKC,MAAMiC,OAAOH,EAAO,GACzB/B,KAAKC,MAAQ,IAAID,KAAKC,OACtBD,KAAKmC,gB,CAGP,wBAAAC,GACE,MAAMC,EAAa,GACnB,GAAIrC,KAAKqB,eAAgB,CACvBgB,EAAWC,KAAK,mB,CAElB,GAAItC,KAAKQ,sBAAuB,CAC9B6B,EAAWC,KAAK,oB,CAGlB,OAAOD,C,CAGT,aAAAE,CAAcnB,GACZpB,KAAK0B,SAASN,EAAEoB,OAAOvC,OAGvBD,KAAK4B,iBAAiBa,MAAQ,E,CAGhC,QAAAf,CAASzB,GACP,GAAIA,EAAO,CACT,IAAKD,KAAKE,SAAU,CAClBF,KAAKC,MAAQ,CAACA,EAAM,G,KACf,CACLD,KAAKC,MAAQ,IAAIA,KAAUD,KAAKC,M,EAGpCD,KAAKmC,gB,CAGP,cAAAA,GACEnC,KAAK0C,4BAA4BC,KAAK,CAAEF,MAAOzC,KAAKC,O,CAGtD,uBAAA2C,GACE5C,KAAKI,sBAAsBC,SAASC,IAClCA,EAAGuC,oBAAoB,QAAS7C,KAAK2B,kBAAkBmB,KAAK9C,OAC5D,IAAKA,KAAKO,SAAU,CAClBD,EAAGyC,iBAAiB,QAAS/C,KAAK2B,kBAAkBmB,KAAK9C,M,CAE3DM,EAAGC,SAAWP,KAAKO,QAAQ,G,CAI/B,iBAAAyC,GACE,GAAIhD,KAAKyC,MAAO,CACdzC,KAAKC,MAAQ,IAAID,KAAKyC,M,KACjB,CACLzC,KAAKC,MAAQ,E,EAIjB,gBAAAgD,GACEjD,KAAK4C,yB,CAGP,uBAAAM,GACE,MAAMC,EAAmBvC,EAAoB,cAC7C,MAAMwC,EAAyBxC,EAAoB,oBACnD,MAAMyC,EAAoBzC,EAAoB,eAE9C,OAAOZ,KAAKC,MAAMqD,KAAI,CAACC,EAAMxB,K,MAC3B,MAAMyB,GAAYC,EAAAzD,KAAK0D,gBAAY,MAAAD,SAAA,SAAAA,EAAEE,MAAMC,GAAQA,EAAIC,WAAaN,EAAKO,OAGzE,IAAIC,EAAcR,EAAK/B,KAAKwC,WAAW,UAAY,UAAY,OAC/D,IAAIC,EAAe,SAGnB,IAAIC,EACJ,OAAQlE,KAAKmE,aACX,IAAK,OACHD,EAAgBvF,EAAoB4E,EAAKvD,KAAKmE,cAC9C,MACF,IAAK,OACHD,EAAgBX,EAAKvD,KAAKmE,aAC1B,MAMJ,OAAQX,IAAS,MAATA,SAAS,SAATA,EAAWY,QACjB,IAAK,QACHL,EAAc,UACdE,EAAe,QAEfC,EAAgBV,IAAS,MAATA,SAAS,SAATA,EAAWa,QAC3B,MACF,IAAK,UACHN,EAAc,UACdE,EAAe,QACf,MACF,IAAK,UACHF,EAAc,UACd,MAMJA,GAAcP,IAAS,MAATA,SAAS,SAATA,EAAWc,kBAAmBP,EAE5C,OACEQ,EAACpB,EAAgB,CACf5C,SAAUP,KAAKO,SACfiE,YAAW,KACXC,UAAS,kBACG1C,EAAK,cACJyB,IAAS,MAATA,SAAS,SAATA,EAAWY,QAExBG,EAAA,SAAOG,KAAK,SAASnB,EAAKO,MACzBI,GAAiBK,EAAA,KAAGG,KAAK,WAAWR,GACrCK,EAACnB,EAAsB,CAACsB,KAAK,oBAAoBC,KAAK,SACpDJ,EAAClB,EAAiB,CAACS,KAAMC,EAAaa,SAAU,MAElDL,EAACnB,EAAsB,CACrBsB,KAAK,qBACLC,KAAK,OACLE,SAAU7E,KAAKO,UAAY,EAAI,EAC/BuE,KAAK,SAAQ,aACD9E,KAAK+E,sBACjBC,UAAY5D,GAAMpB,KAAK8B,oBAAoBV,EAAGW,GAC9CkD,QAAS,IAAMjF,KAAKiC,WAAWF,IAE/BwC,EAAClB,EAAiB,CAACS,KAAMG,EAAcW,SAAU,MAElC,G,CAKzB,MAAAM,GACE,MAAMC,EAAoBvE,EAAoB,eAC9C,MAAMwC,EAAyBxC,EAAoB,oBACnD,MAAMyC,EAAoBzC,EAAoB,eAC9C,MAAMwE,EAAqBxE,EAAoB,gBAC/C,MAAMyE,EAAsBzE,EAAoB,iBAEhD,MAAM0E,EAAiBtF,KAAKkD,0BAC5B,MAAMqC,EAAkBvF,KAAKE,UAAYoF,EAAe7E,SAAW,EACnE,MAAM+E,EAAWxF,KAAKE,UAAYoF,EAAe7E,OAAS,EAE1D,OACE8D,EAACkB,EAAI,CAAAzD,IAAA,2CACH0D,MAAM,qBACNC,YAAcvE,GAAMpB,KAAKmB,aAAaC,GACtCwE,WAAaxE,GAAMpB,KAAKmB,aAAaC,GACrCyE,YAAczE,GAAMpB,KAAKuB,QAAQH,GACjC0E,OAAS1E,GAAMpB,KAAKuB,QAAQH,IAE5BmD,EAACa,EAAkB,CAAApD,IAAA,2CAACzB,SAAUP,KAAKO,SAAUwF,QAAS/F,KAAK+F,SACzDxB,EAAA,OAAAvC,IAAA,2CAAK0D,MAAO,mBAAmB1F,KAAKoC,+BAChCmD,GAAmBD,EAAe,GACnCC,GAGChB,EAAA,SAAAvC,IAAA,4CACEuC,EAAA,QAAAvC,IAAA,4CACEuC,EAACnB,EAAsB,CAAApB,IAAA,2CAAC2C,KAAK,SAC3BJ,EAAClB,EAAiB,CAAArB,IAAA,2CAAC8B,KAAK,OAAOc,SAAU,MAE3CL,EAAA,QAAAvC,IAAA,4CACEuC,EAAA,UAAAvC,IAAA,2CAAQiD,QAAS,IAAMjF,KAAK2B,qBAAmB,iBAAwB,8BAG3E4C,EAAA,QAAAvC,IAAA,2CAAM8B,KAAK,iBAAiBkC,aAAc,IAAMhG,KAAK4C,2BACnD2B,EAACc,EAAmB,CAAArD,IAAA,2CAACiE,KAAK,UAAU1F,SAAUP,KAAKO,SAAU0E,QAAS,IAAMjF,KAAK2B,qBAAmB,gBAItG4C,EAAA,SAAAvC,IAAA,2CACEkE,IAAM5F,GAAQN,KAAK4B,iBAAmBtB,EACtC6F,SAAW/E,GAAMpB,KAAKuC,cAAcnB,GACpCI,KAAK,OACLsC,KAAK,UACL5D,SAAUF,KAAKE,SACfkG,OAAQpG,KAAKoG,OACbC,OAAM,SAMd9B,EAAA,QAAAvC,IAAA,2CAAM8B,KAAK,oBACTS,EAAA,SAAAvC,IAAA,2CAAO0C,KAAK,sBAGdH,EAAA,QAAAvC,IAAA,2CAAM8B,KAAK,SACTS,EAAA,SAAAvC,IAAA,2CAAO0C,KAAK,YAGfc,GACCjB,EAACY,EAAiB,CAAAnD,IAAA,2CAACwC,YAAW,KAACC,UAAS,MACrCa,G"}