import{r as t,c as e,h as o,H as r,g as a}from"./p-c9795ae2.js";import{g as i}from"./p-a7d431c5.js";import{R as l}from"./p-4628ce60.js";import{i as s}from"./p-6ae1bfc9.js";import{s as n}from"./p-5446e664.js";import"./p-e5f35127.js";import"./p-8e7315f7.js";import"./p-051a0642.js";import"./p-d06038ab.js";const d=':host,*{box-sizing:border-box}:host{--table-cell-state-normal-background-color:var(--core-surface-10-color);position:relative;display:block;overflow:auto;width:100%;background-color:var(--table-cell-state-normal-background-color);font-feature-settings:"tnum"}:host [role="table"]{display:table;vertical-align:middle;width:100%;height:100%;border-spacing:0;border-collapse:separate;table-layout:auto;text-align:left}:host slot{vertical-align:inherit;text-align:inherit}:host([layout="fixed"]) [role="table"]{table-layout:fixed}:host([align="left"]) [role="table"]{text-align:left}:host([align="center"]) [role="table"]{text-align:center}:host([align="right"]) [role="table"]{text-align:right}:host([valign="top"]) [role="table"]{vertical-align:top}:host([valign="middle"]) [role="table"]{vertical-align:middle}:host([valign="bottom"]) [role="table"]{vertical-align:bottom}::slotted(.market-drag-cursor){--drag-cursor-height:4px;position:absolute;right:0;left:0;display:block;height:0;outline:calc(var(--drag-cursor-height) / 2) solid var(--core-emphasis-fill-color);pointer-events:none}';const c=d;const h=class{constructor(o){t(this,o);this.marketTableV2RowsReordered=e(this,"marketTableV2RowsReordered",7);this.align=undefined;this.collapsible=false;this.layout="auto";this.reorderable=undefined;this.reorderMode="default";this.selected="false";this.valign=undefined}async onMarketTableV2SelectionChange(t){const{header:e,footer:o}=this;const{target:r,detail:a}=t;const i=a.current;t.stopPropagation();if(r===e||r===o){await this.setSelected(i,{silent:true})}else{await this.setSelectedFromChildEvent(t)}}onMarketTableV2CellSortClicked(t){const{el:e,header:o,children:r,groups:a,footer:i}=this;const l=t.target;if(l.parentElement!==o)return;const{current:s}=t.detail;const d=[...o.children];const c=d.indexOf(l);const{sortStrategy:h,sortStrategyFormat:u}=l;const f=n({items:r,order:s,column:c,strategy:h,format:u});a===null||a===void 0?void 0:a.forEach((t=>{t.sort({order:s,column:c,strategy:h,format:u})}));l.sortOrder=s;d.forEach((t=>{t.sortOrder=t===l?s:undefined}));f.forEach((t=>{e.append(t)}));if(i)e.append(i)}onDragMove(t){var e;(e=this.reorder)===null||e===void 0?void 0:e.dragMove(t)}onDragLeave(){var t;(t=this.reorder)===null||t===void 0?void 0:t.dragLeave()}onDragEnd(t){var e;(e=this.reorder)===null||e===void 0?void 0:e.dragEnd(t)}onDragDrop(t){var e;(e=this.reorder)===null||e===void 0?void 0:e.dragDrop(t)}watchCollapsible(){const{rows:t,groups:e,collapsible:o}=this;e.forEach((t=>{t.collapsible=o;t.indent=0}));t.forEach((t=>{if(t.header||t.footer)return;t.indent=o&&e.length>0?1:0}))}watchReorderable(){const{el:t,reorder:e,reorderable:o,reorderMode:r,marketTableV2RowsReordered:a}=this;e===null||e===void 0?void 0:e.destroy();const s=["internal","external"].includes(o);if(s){const e=i("market-table-v2-row");const o=i("market-table-v2-group");this.reorder=new l({el:t,accepts:[`${e}:not([header]):not([footer]):not([slot="parent"])`,o],event:a,mode:r})}this.syncDragEnabled()}async setSelected(t,{silent:e=false}={}){const{header:o,footer:r,children:a,selected:i}=this;if(i===t)return Promise.resolve();this.selected=t;await(o===null||o===void 0?void 0:o.setSelected(t,{silent:e}));await(r===null||r===void 0?void 0:r.setSelected(t,{silent:e}));a===null||a===void 0?void 0:a.forEach((async o=>{await o.setSelected(t,{silent:e})}));return Promise.resolve()}async setSelectedFromChildEvent(t){const{header:e,footer:o,children:r,selected:a}=this;const{target:i,detail:l}=t;const{current:s}=l;const n=r.map((t=>{if(i===t)return s;return t.selected}));const d=n.every((t=>t==="true"))?"true":n.every((t=>t==="false"))?"false":"indeterminate";if(a===d)return;this.selected=d;await(e===null||e===void 0?void 0:e.setSelected(d,{silent:true}));await(o===null||o===void 0?void 0:o.setSelected(d,{silent:true}))}getElements(){this.rows=[...this.el.children].filter((t=>t.tagName===i("market-table-v2-row").toUpperCase()));this.groups=[...this.el.children].filter((t=>t.tagName===i("market-table-v2-group").toUpperCase()));this.header=this.rows.find((t=>t.header));this.footer=this.rows.find((t=>t.footer));this.children=[...this.groups,...this.rows.filter((t=>!t.header&&!t.footer))]}syncDragEnabled(){const{header:t,footer:e,rows:o,groups:r,reorderable:a,reorderMode:i}=this;const l=["internal","external"].includes(a);if(t)t.dragEnabled=l;if(e)e.dragEnabled=l;o===null||o===void 0?void 0:o.forEach((t=>{if(!s(t))return;t.dragEnabled=l}));r===null||r===void 0?void 0:r.forEach((t=>{t.dragEnabled=l;t.reorderable=a;t.reorderMode=i}))}onSlotChange(){this.getElements();this.watchCollapsible();this.syncDragEnabled()}connectedCallback(){this.getElements();this.watchCollapsible();this.syncDragEnabled()}componentDidRender(){this.watchReorderable()}render(){return o(r,{key:"e149228f1e4d3e136f9571d5cb385c7e0f4670e9",class:"market-table-v2"},o("div",{key:"b28e0fe40fbbd5e7dac970e3a5adce848f88c64c",role:"table",part:"table"},o("slot",{key:"555aa3b36f06ad72a913161c62169f6029fe3f3f",onSlotchange:()=>this.onSlotChange()})))}get el(){return a(this)}static get watchers(){return{collapsible:["watchCollapsible"],reorderable:["watchReorderable"]}}};h.style=c;export{h as market_table_v2};
//# sourceMappingURL=p-ade462a5.entry.js.map