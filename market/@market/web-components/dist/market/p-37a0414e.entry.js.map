{"version":3,"names":["marketDragHandleCss","MarketDragHandleStyle0","MarketDragHandle","constructor","hostRef","this","boundOnDragMove","onDragMove","bind","boundOnDragEnd","onDragEnd","onDragStart","e","preventDefault","stopPropagation","isTouchEvent","button","marketDragHandleDragStart","coords","getCoordsFromEvent","defaultPrevented","emit","document","addEventListener","passive","marketDragHandleDragMove","removeEventListener","marketDragHandleDragEnd","render","h","Host","key","class","onMouseDown","onTouchStart","width","height","viewBox","xmlns","d"],"sources":["src/components/market-drag-handle/market-drag-handle.css?tag=market-drag-handle&encapsulation=shadow","src/components/market-drag-handle/market-drag-handle.tsx"],"sourcesContent":[":host {\n  cursor: grab;\n}\n\n:host(:active) {\n  cursor: grabbing;\n}\n\nsvg {\n  display: block;\n  fill: var(--drag-handle-normal-state-color, var(--core-fill-20-color));\n}\n\n:host(:hover) svg {\n  fill: var(--drag-handle-hover-state-color, var(--core-fill-10-color));\n}\n","import { Component, Event, EventEmitter, Host, h } from '@stencil/core';\nimport { TMarketDragCoords, TMouseOrTouchEvent } from '../../utils/gesture/types';\nimport { isTouchEvent, getCoordsFromEvent } from '../../utils/gesture/utils';\n\n@Component({\n  tag: 'market-drag-handle',\n  shadow: true,\n  styleUrl: 'market-drag-handle.css',\n})\nexport class MarketDragHandle {\n  /**\n   * Fired whenever a drag is started.\n   */\n  @Event({ bubbles: true, composed: true }) marketDragHandleDragStart: EventEmitter<TMarketDragCoords>;\n\n  /**\n   * Fired whenever a drag is moved.\n   */\n  @Event({ bubbles: true, composed: true }) marketDragHandleDragMove: EventEmitter<TMarketDragCoords>;\n\n  /**\n   * Fired whenever a drag is ended.\n   */\n  @Event({ bubbles: true, composed: true }) marketDragHandleDragEnd: EventEmitter<TMarketDragCoords>;\n\n  // These bound func refs are so we can remove them later\n  boundOnDragMove = this.onDragMove.bind(this);\n  boundOnDragEnd = this.onDragEnd.bind(this);\n\n  onDragStart(e: TMouseOrTouchEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // only start drag on touch events or left mouse clicks\n    if (!isTouchEvent(e) && e.button !== 0) return;\n\n    const { marketDragHandleDragStart, boundOnDragMove, boundOnDragEnd } = this;\n    const coords = getCoordsFromEvent(e);\n\n    const { defaultPrevented } = marketDragHandleDragStart.emit(coords);\n    if (defaultPrevented) return;\n\n    document.addEventListener('mousemove', boundOnDragMove);\n    document.addEventListener('mouseup', boundOnDragEnd);\n\n    // don't use passive touch event listeners so we can call preventDefault()\n    document.addEventListener('touchmove', boundOnDragMove, { passive: false });\n    document.addEventListener('touchend', boundOnDragEnd, { passive: false });\n  }\n\n  onDragMove(e: TMouseOrTouchEvent) {\n    e.preventDefault();\n\n    const { marketDragHandleDragMove, boundOnDragMove, boundOnDragEnd } = this;\n    const coords = getCoordsFromEvent(e);\n\n    const { defaultPrevented } = marketDragHandleDragMove.emit(coords);\n\n    if (defaultPrevented) {\n      // cancel the drag\n      document.removeEventListener('mousemove', boundOnDragMove);\n      document.removeEventListener('mouseup', boundOnDragEnd);\n      document.removeEventListener('touchmove', boundOnDragMove);\n      document.removeEventListener('touchend', boundOnDragEnd);\n    }\n  }\n\n  onDragEnd(e: TMouseOrTouchEvent) {\n    e.preventDefault();\n\n    const { marketDragHandleDragEnd, boundOnDragMove, boundOnDragEnd } = this;\n    const coords = getCoordsFromEvent(e);\n\n    const { defaultPrevented } = marketDragHandleDragEnd.emit(coords);\n    if (defaultPrevented) return;\n\n    document.removeEventListener('mousemove', boundOnDragMove);\n    document.removeEventListener('mouseup', boundOnDragEnd);\n    document.removeEventListener('touchmove', boundOnDragMove);\n    document.removeEventListener('touchend', boundOnDragEnd);\n  }\n\n  render() {\n    return (\n      <Host\n        class=\"market-drag-handle\"\n        onMouseDown={(e: MouseEvent) => this.onDragStart(e)}\n        onTouchStart={(e: TouchEvent) => this.onDragStart(e)}\n        // Marked as hidden for screen readers since we don't currently support keyboard-controlled rearrangement. This\n        // is a temporary solution until we can implement keyboard control. In the meantime, component users should\n        // implement their own alternative keyboard-based support for rearranging items.\n        aria-hidden=\"true\"\n      >\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            fill-rule=\"evenodd\"\n            clip-rule=\"evenodd\"\n            d=\"M15 8C16.1046 8 17 7.10457 17 6C17 4.89543 16.1046 4 15 4C13.8954 4 13 4.89543 13 6C13 7.10457 13.8954 8 15 8ZM15 14C16.1046 14 17 13.1046 17 12C17 10.8954 16.1046 10 15 10C13.8954 10 13 10.8954 13 12C13 13.1046 13.8954 14 15 14ZM11 18C11 19.1046 10.1046 20 9 20C7.89543 20 7 19.1046 7 18C7 16.8954 7.89543 16 9 16C10.1046 16 11 16.8954 11 18ZM17 18C17 19.1046 16.1046 20 15 20C13.8954 20 13 19.1046 13 18C13 16.8954 13.8954 16 15 16C16.1046 16 17 16.8954 17 18ZM11 12C11 13.1046 10.1046 14 9 14C7.89543 14 7 13.1046 7 12C7 10.8954 7.89543 10 9 10C10.1046 10 11 10.8954 11 12ZM11 6C11 7.10457 10.1046 8 9 8C7.89543 8 7 7.10457 7 6C7 4.89543 7.89543 4 9 4C10.1046 4 11 4.89543 11 6Z\"\n          />\n        </svg>\n      </Host>\n    );\n  }\n}\n"],"mappings":"oGAAA,MAAMA,EAAsB,mOAC5B,MAAAC,EAAeD,E,MCQFE,EAAgB,MAL7B,WAAAC,CAAAC,G,mNAsBEC,KAAAC,gBAAkBD,KAAKE,WAAWC,KAAKH,MACvCA,KAAAI,eAAiBJ,KAAKK,UAAUF,KAAKH,K,CAErC,WAAAM,CAAYC,GACVA,EAAEC,iBACFD,EAAEE,kBAGF,IAAKC,EAAaH,IAAMA,EAAEI,SAAW,EAAG,OAExC,MAAMC,0BAAEA,EAAyBX,gBAAEA,EAAeG,eAAEA,GAAmBJ,KACvE,MAAMa,EAASC,EAAmBP,GAElC,MAAMQ,iBAAEA,GAAqBH,EAA0BI,KAAKH,GAC5D,GAAIE,EAAkB,OAEtBE,SAASC,iBAAiB,YAAajB,GACvCgB,SAASC,iBAAiB,UAAWd,GAGrCa,SAASC,iBAAiB,YAAajB,EAAiB,CAAEkB,QAAS,QACnEF,SAASC,iBAAiB,WAAYd,EAAgB,CAAEe,QAAS,O,CAGnE,UAAAjB,CAAWK,GACTA,EAAEC,iBAEF,MAAMY,yBAAEA,EAAwBnB,gBAAEA,EAAeG,eAAEA,GAAmBJ,KACtE,MAAMa,EAASC,EAAmBP,GAElC,MAAMQ,iBAAEA,GAAqBK,EAAyBJ,KAAKH,GAE3D,GAAIE,EAAkB,CAEpBE,SAASI,oBAAoB,YAAapB,GAC1CgB,SAASI,oBAAoB,UAAWjB,GACxCa,SAASI,oBAAoB,YAAapB,GAC1CgB,SAASI,oBAAoB,WAAYjB,E,EAI7C,SAAAC,CAAUE,GACRA,EAAEC,iBAEF,MAAMc,wBAAEA,EAAuBrB,gBAAEA,EAAeG,eAAEA,GAAmBJ,KACrE,MAAMa,EAASC,EAAmBP,GAElC,MAAMQ,iBAAEA,GAAqBO,EAAwBN,KAAKH,GAC1D,GAAIE,EAAkB,OAEtBE,SAASI,oBAAoB,YAAapB,GAC1CgB,SAASI,oBAAoB,UAAWjB,GACxCa,SAASI,oBAAoB,YAAapB,GAC1CgB,SAASI,oBAAoB,WAAYjB,E,CAG3C,MAAAmB,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,2CACHC,MAAM,qBACNC,YAAcrB,GAAkBP,KAAKM,YAAYC,GACjDsB,aAAetB,GAAkBP,KAAKM,YAAYC,GAAE,cAIxC,QAEZiB,EAAA,OAAAE,IAAA,2CAAKI,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,MAAM,8BACpDT,EAAA,QAAAE,IAAA,uDACY,UAAS,YACT,UACVQ,EAAE,+qB"}