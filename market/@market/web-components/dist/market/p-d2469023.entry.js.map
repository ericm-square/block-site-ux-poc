{"version":3,"names":["marketHeaderCss","MarketHeaderStyle0","MarketHeader","handleCompact","this","compact","el","shadowRoot","querySelector","minHeight","Number","parseInt","getComputedStyle","height","style","undefined","handleSlottedNavigation","customNavEl","showNavigation","addEventListener","handleSlottedNavClick","bind","handleSlottedActions","actions","showActions","handleCloseButtonClick","event","marketHeaderNavigate","emit","action","componentWillLoad","checkForNavigation","cloneDefaultHeadingToCompactHeading","observer","MutationObserver","handleMutation","observe","childList","characterData","subtree","componentDidRender","mutationList","shouldClone","forEach","mutation","type","addedNodes","length","node","slot","hasModalParent","closest","getNamespacedTagFor","hasCustomNavigation","compactSlottedContent","querySelectorAll","removeChild","wayfindingEl","subheadingEl","clone","cloneNode","classList","add","appendChild","defaultSlotContent","children","filter","getAttribute","renderDefaultNavigation","MarketButtonTagName","MarketIconTagName","h","rank","closeButtonAriaLabel","disabled","disableCloseButton","onClick","name","HEADER_CLOSE_BUTTON_ICON_ASSET","render","Host","key","class","onSlotchange","part"],"sources":["src/components/market-header/market-header.css?tag=market-header&encapsulation=shadow","src/components/market-header/market-header.tsx"],"sourcesContent":["@import \"../../styles/mixins/component-base.css\";\n@import \"../../styles/mixins/typography.css\";\n\n:host {\n  --header-animation-duration: 0.2s;\n\n  display: block;\n}\n\n/* remove margin from slotted elements */\n::slotted(*) {\n  margin: 0;\n}\n\n::slotted(.wayfinding),\n::slotted([slot=\"wayfinding\"]) {\n  @extend %paragraph-20;\n\n  display: block;\n  margin-bottom: var(--header-sub-text-spacing-bottom-size);\n  color: var(--header-sub-text-text-color);\n}\n\n::slotted(.subheading),\n::slotted([slot=\"subheading\"]) {\n  @extend %paragraph-20;\n\n  display: block;\n  margin-top: var(--header-sub-text-spacing-bottom-size);\n  color: var(--header-sub-text-text-color);\n}\n\n/* If you change these properties also update their counterparts in styles/components.css */\n:host([show-navigation]) {\n  ::slotted([slot=\"compact\"]:not(.wayfinding):not(.subheading)) {\n    font-weight: var(--core-type-heading-20-weight);\n    font-size: var(--core-type-heading-20-size);\n    font-family: var(--core-type-heading-20-font-family);\n    line-height: var(--core-type-heading-20-leading);\n    letter-spacing: var(--core-type-heading-20-tracking);\n    text-transform: var(--core-type-heading-20-case);\n  }\n}\n\n/* navigation w/ close button */\nnav {\n  padding-right: var(--header-main-text-horizontal-spacing);\n}\n\n/* actions menu w/ buttons */\nmenu {\n  display: none;\n  grid-auto-flow: column;\n  align-items: start;\n  margin: 0;\n  padding-left: var(--header-main-text-horizontal-spacing);\n  column-gap: var(--button-group-spacing);\n\n  :host([show-actions]) & {\n    display: grid;\n  }\n}\n\n.grid {\n  display: none;\n\n  :host([show-actions]) & {\n    /*\n      If actions are present, grid has 2 columns,\n      so stretch the first column (.compact) */\n    display: grid;\n    grid-template-columns: auto minmax(max-content, 1fr);\n  }\n\n  :host([show-navigation]) & {\n    /*\n      If navigation is present, grid has 3 columns.\n      Perfectly center the middle column (.compact) if possible,\n      regardless of the content on the left/right columns.\n      ref: https://stackoverflow.com/a/68292664/17019161 */\n    display: grid;\n    grid-template-columns: minmax(max-content, 1fr) auto minmax(max-content, 1fr);\n  }\n}\n\n.navigation {\n  display: none;\n\n  :host([show-navigation]) & {\n    display: flex;\n  }\n}\n\n.actions {\n  display: flex;\n  place-content: flex-end;\n}\n\n/* vertically center the eyebrow & title in the grid */\n.compact {\n  display: flex;\n  flex-direction: column;\n  place-content: center;\n}\n\n::slotted(p) {\n  margin-top: var(--header-bottom-padding-size);\n}\n\n::slotted(p[slot=\"compact\"]) {\n  display: none;\n}\n\n/* Styles only applied if heading content cloned into center of 3-column layout */\n:host([show-navigation]) .compact {\n  overflow: hidden;\n  text-align: center;\n  opacity: 0%;\n  visibility: hidden;\n\n  /* fade out - delay hiding visibility until after opacity transition */\n  transition:\n    opacity var(--header-animation-duration) ease-in-out,\n    visibility 0s linear var(--header-animation-duration);\n\n  /* truncate compact text to one line */\n  ::slotted([slot=\"compact\"]) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.heading {\n  display: block;\n\n  /* fade in - immediately show visibility before opacity transition */\n  transition: opacity var(--header-animation-duration) ease-in-out, visibility 0s;\n\n  :host([show-navigation]) & {\n    margin-top: var(--header-nav-icon-button-spacing-buttom-size);\n  }\n\n  :host([show-actions]:not([show-navigation])) & {\n    display: none;\n  }\n}\n\n:host([show-navigation][compact]) {\n  .compact {\n    opacity: 100%;\n    visibility: visible;\n\n    /* fade in - immediately show visibility before opacity transition */\n    transition: opacity var(--header-animation-duration) ease-in-out, visibility 0s;\n  }\n\n  .heading {\n    opacity: 0%;\n    visibility: hidden;\n\n    /* fade out - delay hiding visibility until after opacity transition */\n    transition:\n      opacity var(--header-animation-duration) ease-in-out,\n      visibility 0s linear var(--header-animation-duration);\n  }\n}\n\n/*\n  .regular and .wide are added to the host's classList in market-modal-full.tsx.\n  These apply header positioning depending on the `layout` prop on market-modal-full.\n*/\n:host(.regular) {\n  .heading {\n    /* TODO: This token should be renamed to modal-full-regular-layout-width */\n    max-width: var(--modal-full-fixed-layout-width);\n    margin-right: auto;\n    margin-left: auto;\n  }\n}\n\n:host(.wide) {\n  .heading {\n    /* TODO: add a design token for modal full layout=wide */\n    max-width: 1200px;\n    margin-right: auto;\n    margin-left: auto;\n  }\n}\n","import { Component, Host, State, Prop, Element, Event, Watch, EventEmitter, h } from '@stencil/core';\nimport { HEADER_CLOSE_BUTTON_ICON_ASSET } from '@market/market-theme/js/cjs/index.js';\nimport { getNamespacedTagFor } from '../../utils/namespace';\nimport { TMarketHeaderNavigateEventDetail } from './events';\n\n/**\n * @slot - The title. The position of the title varies based on the presence of other slots\n * @slot navigation - navigation buttons, ex close, back, forward, on the left side of the header\n * @slot wayfinding - the smaller \"eyebrow\" text displayed above the title, e.g. \"Step 1 of 2\"\n * @slot actions - for button(s) to perform actions, on the right side of the header\n * @slot subheading - Secondary text for the row\n * @part heading - the heading area where the default, wayfinding, and subheading slot is contained in\n */\n@Component({\n  tag: 'market-header',\n  styleUrl: 'market-header.css',\n  shadow: true,\n})\nexport class MarketHeader {\n  @Element() el: HTMLMarketHeaderElement;\n  customNavEl: any;\n\n  /**\n   * Whether or not the navigation slot is shown\n   */\n  @Prop({ mutable: true, reflect: true }) showNavigation: boolean | null = null;\n\n  /**\n   * String to use for the aria-label accessibility attribute of the default close \"x\" button.\n   */\n  @Prop({ reflect: true }) readonly closeButtonAriaLabel: string = 'Close';\n\n  /**\n   * Disables the default close \"x\" button.\n   */\n  @Prop() readonly disableCloseButton: boolean = false;\n\n  /**\n   * Whether or not the header is in compact mode\n   * when navigation is present.\n   */\n  @Prop({ reflect: true }) readonly compact: boolean = false;\n\n  @State() showActions: boolean = false;\n\n  /**\n   * Emitted when the close icon in the navigation slot is clicked.\n   */\n  @Event() marketHeaderNavigate: EventEmitter<TMarketHeaderNavigateEventDetail>;\n\n  @Watch('compact')\n  handleCompact() {\n    if (this.compact) {\n      const compact = this.el.shadowRoot.querySelector('.grid .compact');\n      const minHeight = Number.parseInt(getComputedStyle(compact).height, 10);\n      this.el.style.height = minHeight !== undefined ? `${minHeight}px` : '';\n    } else {\n      this.el.style.height = '';\n    }\n  }\n\n  handleSlottedNavigation() {\n    // If there is custom navigation passed in, we need to\n    // attach event handlers to the slotted elements manually\n    const customNavEl = this.el.querySelector('[slot=\"navigation\"]');\n    if (customNavEl) {\n      this.showNavigation = true;\n      customNavEl.addEventListener('click', this.handleSlottedNavClick.bind(this));\n    }\n  }\n\n  handleSlottedActions() {\n    const actions = this.el.querySelector('[slot=\"actions\"]');\n    this.showActions = actions ? true : false;\n  }\n\n  handleCloseButtonClick(event) {\n    this.marketHeaderNavigate.emit({\n      event,\n      action: 'close',\n    });\n  }\n\n  handleSlottedNavClick(event) {\n    this.marketHeaderNavigate.emit({\n      event,\n      action: 'custom',\n    });\n  }\n\n  componentWillLoad() {\n    this.checkForNavigation();\n    this.cloneDefaultHeadingToCompactHeading();\n\n    // watch for changes in slotted children content\n    const observer = new MutationObserver(this.handleMutation.bind(this));\n    observer.observe(this.el, { childList: true, characterData: true, subtree: true });\n  }\n\n  componentDidRender() {\n    // this function requires layout computation,\n    // so we need to wait until render to call.\n    this.handleCompact();\n  }\n\n  handleMutation(mutationList) {\n    // We don't want to re-clone the default slot content if\n    // the mutation was already the result of the cloning\n    // because then we would get into an infinite loop!\n    // So we have to look at the mutation data to check if a\n    // compact slotted element was added to prevent re-cloning.\n    let shouldClone = true;\n    mutationList.forEach((mutation) => {\n      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n        mutation.addedNodes.forEach((node) => {\n          if (node.slot === 'compact') {\n            shouldClone = false;\n          }\n        });\n      }\n    });\n\n    if (shouldClone) {\n      this.cloneDefaultHeadingToCompactHeading();\n    }\n  }\n\n  checkForNavigation() {\n    // We want to force the header to be navigable when slotted in modals\n    const hasModalParent = this.el.closest(`\n      ${getNamespacedTagFor('market-modal-full')},\n      ${getNamespacedTagFor('market-modal-partial')}\n    `);\n\n    // The same if custom navigation is slotted in\n    const hasCustomNavigation = this.el.querySelector('[slot=\"navigation\"]');\n\n    // Only set this if the prop hasn't been passed in manually\n    if (this.showNavigation === null) {\n      this.showNavigation = hasModalParent || hasCustomNavigation ? true : false;\n    }\n  }\n\n  cloneDefaultHeadingToCompactHeading() {\n    // clear existing compact slotted content\n    const compactSlottedContent = this.el.querySelectorAll('[slot=\"compact\"]');\n    for (const node of compactSlottedContent) {\n      this.el.removeChild(node);\n    }\n\n    // clone the wayfinding or subheading slot into compact slot\n    const wayfindingEl = this.el.querySelector('[slot=\"wayfinding\"]');\n    const subheadingEl = this.el.querySelector('[slot=\"subheading\"]');\n\n    if (wayfindingEl) {\n      const clone = wayfindingEl.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      clone.classList.add('wayfinding');\n      this.el.appendChild(clone);\n    }\n\n    // clone the rest of the default slot content into compact slot\n    const defaultSlotContent = [...this.el.children].filter((el) => !el.getAttribute('slot'));\n    for (const node of defaultSlotContent) {\n      const clone = node.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      this.el.appendChild(clone);\n    }\n\n    if (!wayfindingEl && subheadingEl) {\n      const clone = subheadingEl.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      clone.classList.add('subheading');\n      this.el.appendChild(clone);\n    }\n  }\n\n  renderDefaultNavigation() {\n    const MarketButtonTagName = getNamespacedTagFor('market-button');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n\n    return (\n      <MarketButtonTagName\n        rank=\"secondary\"\n        slot=\"navigation\"\n        aria-label={this.closeButtonAriaLabel}\n        disabled={this.disableCloseButton}\n        onClick={(event) => this.handleCloseButtonClick(event)}\n      >\n        <MarketIconTagName slot=\"icon\" name={HEADER_CLOSE_BUTTON_ICON_ASSET}></MarketIconTagName>\n      </MarketButtonTagName>\n    );\n  }\n\n  render() {\n    return (\n      <Host class=\"market-header\" show-actions={this.showActions}>\n        <div class=\"grid\">\n          <div class=\"navigation\">\n            <nav>\n              <slot name=\"navigation\" onSlotchange={() => this.handleSlottedNavigation()}>\n                {this.renderDefaultNavigation()}\n              </slot>\n            </nav>\n          </div>\n          <div class=\"compact\">\n            <slot name=\"compact\"></slot>\n          </div>\n          <div class=\"actions\">\n            <menu>\n              <slot name=\"actions\" onSlotchange={() => this.handleSlottedActions()}></slot>\n            </menu>\n          </div>\n        </div>\n        <div class=\"heading\" part=\"heading\">\n          <slot name=\"wayfinding\"></slot>\n          <slot></slot>\n          <slot name=\"subheading\"></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}