import{r as t,c as e,h as i,H as s,g as o}from"./p-c9795ae2.js";import{g as r}from"./p-a7d431c5.js";const l=":host{--transition-duration:0.2s;position:relative;display:grid;grid-column:1 / -1;grid-auto-columns:1fr;grid-auto-flow:column;border-bottom:var(--table-border-width, 1px) solid var(--table-row-border-color, var(--core-divider-20-color));transition:background-color var(--transition-duration)}@media (hover: hover){:host{}:host([interactive]:hover) ::slotted(.market-table-cell){background-color:var(--table-cell-hover-state-background-color, var(--core-fill-50-color))}}:host([header]){border-bottom:var(--table-border-width, 1px) solid var(--table-heading-border-color, var(--core-divider-10-color))}:host([footer]) ::slotted(.market-table-cell){border-bottom:none;font-weight:var(--table-footing-primary-text-font-weight, 500);font-size:var(--table-footing-primary-text-font-size, var(--core-type-semibold-20-size));line-height:var(--table-footing-primary-text-line-height, var(--core-type-semibold-20-leading))}:host([interactive]) ::slotted(.market-table-cell){cursor:pointer}:host([active]) ::slotted(.market-table-cell),:host([interactive]:active) ::slotted(.market-table-cell){background-color:var(--table-cell-pressed-state-background-color, var(--core-emphasis-40-color))}:host([interactive]:focus){outline:none;}:host([interactive]:not([disabled]):focus) ::slotted(.market-table-cell){background-color:var(--table-cell-focus-state-background-color, var(--core-fill-50-color))}:host([interactive][disabled]){pointer-events:none}:host([disabled]) ::slotted(.market-table-cell){background-color:transparent;color:var(--table-cell-disabled-state-text-color, var(--core-text-30-color));pointer-events:none}:host([nested]) ::slotted(.market-table-cell:first-of-type){padding-left:calc(\n        (\n          var(--cell-indent-level) *\n          var(--table-row-indentation-padding, 40px)\n        ) +\n        var(--table-cell-padding, 8px) +\n        var(--table-accordion-content-width, 30px)\n      )}:host([slot='custom-trigger']) ::slotted(.market-table-cell:first-of-type),:host([slot='header']) ::slotted(.market-table-cell:first-of-type),:host([slot='footer']) ::slotted(.market-table-cell:first-of-type){padding-left:var(--table-cell-padding, 8px)}:host ::slotted(.market-table-cell:first-of-type){padding-left:calc(\n      var(--table-cell-padding, 8px) +\n      (var(--cell-indent-level) * var(--table-row-indentation-padding, 40px))\n    )}";const a=l;const n=class{constructor(i){t(this,i);this.marketTableHeaderLoaded=e(this,"marketTableHeaderLoaded",7);this.marketTableRowClicked=e(this,"marketTableRowClicked",7);this.marketTableRowStick=e(this,"marketTableRowStick",7);this.marketTableRowUnstick=e(this,"marketTableRowUnstick",7);this.marketAccordionToggled=e(this,"marketAccordionToggled",7);this.marketNestedRowToggled=e(this,"marketNestedRowToggled",7);this.componentLoaded=false;this.leadingIndentation=0;this.stickTo=false;this.sticky=undefined;this.active=false;this.interactive=false;this.disabled=false;this.selected=false;this.header=false;this.footer=false;this.originalSlot=undefined;this.index=0;this.tableColumns=undefined;this.cells=undefined;this.gridTemplateMain=[];this.gridTemplateLeft=[];this.gridTemplateRight=[];this.expanded=false;this.nested=false;this.styleDeclaration=undefined;this.gridTemplate=[];this.nestedRowToggleButton=undefined}formNewGridTemplate(){this.gridTemplate=[...this.gridTemplateLeft,...this.gridTemplateMain,...this.gridTemplateRight];if(this.tableAreaLeft){this.tableAreaLeft.placement=[1,this.gridTemplateLeft.length]}if(this.tableAreaMain){this.tableAreaMain.placement=[this.gridTemplateLeft.length+1,this.gridTemplateMain.length]}if(this.tableAreaRight){this.tableAreaRight.placement=[this.gridTemplateLeft.length+this.gridTemplateMain.length+1,this.gridTemplateRight.length]}}gridTemplateObserver(t,e){if(t!==e){this.el.style.gridTemplateColumns=t.join(" ")}}stickyObserver(t,e){if(t!==e){this.emitStickyEvents()}}columnsObserver(t){this.setCellColumnProperties(t)}updateCellProperties(t,e){if(t!==e){this.setCellColumnProperties(this.tableColumns)}}updateFirstCellProperties(){this._setFirstCellProperties()}updateNestedRowButton(){if(this.nestedRowToggleButton){this.nestedRowToggleButton.ariaExpanded=`${this.expanded}`;const t=this.nestedRowToggleButton.querySelector("svg");if(t){if(this.expanded){t.style.transform="rotate(-180deg)"}else{t.style.transform="rotate(0deg)"}}}}updateSlottedControlCheckedValue(){var t;(t=this.slottedControl)===null||t===void 0?void 0:t.setSelection(this.selected)}updateSlottedControlDisabledValue(){var t;(t=this.slottedControl)===null||t===void 0?void 0:t.setDisabled(this.disabled)}handleMarketCheckboxValueChange(t){if(t.target!==this.slottedControl){return}this.selected=t.detail.current}stick(t){if(t){this.stickTo=t}else if(this.header||this.footer){this.sticky=true}return Promise.resolve()}unstick(){this.sticky=false;this.stickTo=false;return Promise.resolve()}async _stickColumn(t,e){const i=this.el.querySelector(`[name="${t}"], [column="${t}"]`);if(i){await i._stickSelf(e)}else{console.warn("cannot stick cell to unknown position")}}async _unstickColumn(t){const e=this.el.querySelector(`[name="${t}"], [column="${t}"]`);if(e){await e._unstickSelf()}else{console.warn("cannot unstick cell from unknown position")}}_syncColumnVisibilityWithCells(t,e){const i=this.el.querySelector(`[name="${t}"], [column="${t}"]`);if(i){i.hidden=e}return Promise.resolve()}_setFirstCellProperties(){var t,e,i;if(((t=this.cells)===null||t===void 0?void 0:t.length)&&this.isStylableCell(this.cells[0])){(i=(e=this.cells[0])._updateFirstCellProperties)===null||i===void 0?void 0:i.call(e,this.el)}return Promise.resolve()}setLeadingIndentation(t){this.leadingIndentation=t;return Promise.resolve()}toggleNestedRow(){this.expanded=!this.expanded;this.marketAccordionToggled.emit({expanded:this.expanded});this.marketNestedRowToggled.emit({expanded:this.expanded});return Promise.resolve()}isStylableCell(t){return t._updateColumnRelatedProperties!==undefined&&t._updateFirstCellProperties!==undefined}setCellColumnProperties(t){if(this.cells&&t&&t.length>0){this.cells.forEach(((e,i)=>{if(this.isStylableCell(e)){const s=t[i];e._updateColumnRelatedProperties(s)}}))}}emitStickyEvents(){let t;if(this.stickTo){t=this.stickTo}else if(this.header){t="top"}else if(this.footer){t="bottom"}if(this.sticky||this.stickTo){this.marketTableRowStick.emit({position:t,index:this.index})}else if(this.componentLoaded){this.marketTableRowUnstick.emit({position:t,index:this.index})}}componentWillLoad(){this.originalSlot=this.el.slot;this.header=this.originalSlot==="header";this.footer=this.originalSlot==="footer";this.cells=this.el.querySelectorAll(r("market-table-cell"))}handleSlotChange(){this.cells=this.el.querySelectorAll(`${r("market-table-cell")}, ${r("market-table-column")}`);if(this.header){this.marketTableHeaderLoaded.emit({columns:this.el.querySelectorAll(r("market-table-column"))})}this.emitStickyEvents()}_getMarketRowElement(t){return t.querySelector(r("market-table-row"))}_addCaretButtonToFirstCell(){if(this.cells&&this.cells[0]){this.nestedRowToggleButton=document.createElement("button");Object.assign(this.nestedRowToggleButton,{slot:"nested-row-indicator",type:"button",ariaExpanded:`${this.expanded}`,onclick:()=>this.toggleNestedRow()});this.nestedRowToggleButton.innerHTML=`<svg class="caret" width="14" height="8" viewBox="0 0 14 8" fill="none" style="transition-duration:300ms;" xmlns="http://www.w3.org/2000/svg">\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M7.70715 7.70711C7.31663 8.09763 6.68346 8.09763 6.29294 7.70711L0.29294 1.70711L1.70715 0.292892L7.00005 5.58579L12.2929 0.292893L13.7072 1.70711L7.70715 7.70711Z"\n            fill="currentColor"\n          />\n        </svg>`;this.cells[0].append(this.nestedRowToggleButton)}}_registerSlottedControl(){this.slottedControl=this.el.querySelector([`[slot="control"] ${r("market-checkbox")}`,`[slot="control"] ${r("market-toggle")}`].join(","));if(this.slottedControl){this.slottedControl.setDisabled(this.disabled);this.slottedControl.setSelection(this.selected)}}componentDidRender(){var t,e;const i=this.el.closest(r("market-accordion-item"));if(i){let s;if(this.el.slot==="custom-trigger"){const e=(t=i.parentElement)===null||t===void 0?void 0:t.closest(r("market-accordion-item"));if(e){s=[...e.children].find((t=>t.slot==="custom-trigger"))}}else{s=[...i.children].find((t=>t.slot==="custom-trigger"))}this.leadingIndentation=s?((e=s.leadingIndentation)!==null&&e!==void 0?e:0)+1:0}this._setFirstCellProperties()}componentDidLoad(){this.componentLoaded=true;if(this.el.slot==="custom-trigger"){this._addCaretButtonToFirstCell();const t=this.nestedRowToggleButton.querySelector("svg");if(t&&this.expanded){t.style.transform="rotate(-180deg)"}}}handleClick(t){const e=[r("market-accessory"),r("market-button"),r("market-button-dropdown"),r("market-checkbox"),r("market-link"),r("market-toggle"),"button","a"];const i=e.some((e=>t.target.closest(e)));if(i){return}if(this.interactive){this.marketTableRowClicked.emit()}}handleKeydown(t){if(t.target!==this.el){return}switch(t.key){case"Enter":this.handleClick(t);break;case" ":this.handleClick(t);t.preventDefault();break}}render(){const{disabled:t,footer:e,gridTemplateLeft:o,gridTemplateMain:l,gridTemplateRight:a,header:n,interactive:d,selected:h,slottedControl:c}=this;const f=r("market-table-area");return i(s,{key:"b21f7e4205a1bdeedb0e5b954cca59fa929759b6","aria-selected":c?Boolean(h).toString():null,class:"market-table-row",role:"row",tabindex:d&&!t?"0":null,header:n,footer:e,onClick:t=>this.handleClick(t),onKeydown:t=>this.handleKeydown(t)},i(f,{key:"1ec156add1e9edfbc896c2bf4b4ed2dec6abc853",orientation:"vertical","stick-to":"left",gridTemplate:o,ref:t=>this.tableAreaLeft=t},i("slot",{key:"cc0b2f616a2ce5ee5cff172f71cfa061c5a19d39",name:"sticky-left"})),i(f,{key:"6c16c71570af888f249ed17e208cf7ba529ed408",orientation:"vertical",gridTemplate:l,ref:t=>this.tableAreaMain=t,active:true},i("slot",{key:"3fa9a13284967ade7ca15968a9be73b097c2934e",name:"control",onSlotchange:()=>this._registerSlottedControl()}),i("slot",{key:"3ce80946bd17ff03315262bff77d728f92fc9fe0",onSlotchange:()=>this.handleSlotChange()})),i(f,{key:"8c37a017089cc05a86be2228bdb56d3ce7da6d5b",orientation:"vertical","stick-to":"right",gridTemplate:a,ref:t=>this.tableAreaRight=t},i("slot",{key:"4144f5e42d7371d60733da1d8cc584a16f6d9eb0",name:"sticky-right"})))}get el(){return o(this)}static get watchers(){return{gridTemplateMain:["formNewGridTemplate"],gridTemplateLeft:["formNewGridTemplate"],gridTemplateRight:["formNewGridTemplate"],gridTemplate:["gridTemplateObserver"],stickTo:["stickyObserver"],sticky:["stickyObserver"],tableColumns:["columnsObserver"],cells:["updateCellProperties"],leadingIndentation:["updateFirstCellProperties"],expanded:["updateNestedRowButton"],selected:["updateSlottedControlCheckedValue"],disabled:["updateSlottedControlDisabledValue"]}}};n.style=a;export{n as market_table_row};
//# sourceMappingURL=p-b0299806.entry.js.map