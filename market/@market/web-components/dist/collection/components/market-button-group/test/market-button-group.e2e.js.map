{"version":3,"file":"market-button-group.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-button-group/test/market-button-group.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage, E2EPage, E2EElement } from '@stencil/core/testing';\n\ndescribe('market-button-group', () => {\n  it('renders with defaults', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-button-group></market-button-group>');\n\n    const element = await page.find('market-button-group');\n    expect(element).not.toBeNull();\n    expect(element).toHaveAttribute('hydrated');\n    expect(element).toEqualAttribute('alignment', 'right');\n\n    const dropdownMenuEl = await element.find('pierce/market-button-dropdown-menu');\n    expect(dropdownMenuEl).toBeNull();\n  });\n\n  it('renders with buttons', async () => {\n    const page = await newE2EPage();\n    await page.setContent(`\n      <market-button-group>\n        <market-button rank=\"primary\">Button 1</market-button>\n        <market-button>Button 2</market-button>\n      </market-button-group>\n    `);\n\n    const element = await page.find('market-button-group');\n\n    const buttons = await element.findAll('market-button');\n    expect(await buttons[0].isVisible()).toBe(true);\n    expect(await buttons[1].isVisible()).toBe(true);\n\n    // no overflow\n    const dropdownMenuEl = await element.find('pierce/market-button-dropdown-menu');\n    expect(dropdownMenuEl).toBeNull();\n  });\n\n  describe('overflow', () => {\n    let page: E2EPage;\n    let element: E2EElement;\n    let buttons: Array<E2EElement>;\n    let dropdownMenuEl: E2EElement;\n    let dropdownMenuButtonEl: E2EElement;\n    let popoverEl: E2EElement;\n\n    const openDropdown = async () => {\n      popoverEl = await dropdownMenuEl.find('pierce/market-popover');\n      expect(await popoverEl.isVisible()).toBe(false);\n      await dropdownMenuButtonEl.click();\n      expect(await popoverEl.isVisible()).toBe(true);\n    };\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(`\n        <market-button-group>\n          <market-button rank=\"primary\">Button 1</market-button>\n          <market-button>Button 2</market-button>\n          <market-button>Button 3</market-button>\n          <market-button>Button 4</market-button>\n        </market-button-group>\n      `);\n      await page.waitForChanges();\n      element = await page.find('market-button-group');\n      buttons = await element.findAll('market-button');\n      dropdownMenuEl = await element.find('pierce/market-button-dropdown');\n      dropdownMenuButtonEl = await dropdownMenuEl.find('pierce/market-button');\n    });\n\n    it('does not show more than 2 buttons', async () => {\n      // first two buttons visible\n      expect(await buttons[0].isVisible()).toBe(true);\n      expect(await buttons[1].isVisible()).toBe(true);\n\n      // overflow button is visible\n      expect(await dropdownMenuButtonEl.isVisible()).toBe(true);\n\n      // last two buttons hidden in dropdown\n      expect(await buttons[2].isVisible()).toBe(false);\n      expect(await buttons[3].isVisible()).toBe(false);\n    });\n\n    it('moves the overflowed buttons to the dropdown', async () => {\n      await openDropdown();\n      expect(await buttons[0].isVisible()).toBe(true);\n      expect(await buttons[1].isVisible()).toBe(true);\n      expect(await buttons[2].isVisible()).toBe(true);\n      expect(await buttons[3].isVisible()).toBe(true);\n    });\n\n    it(\"moves buttons that don't fit into the dropdown\", async () => {\n      expect(await buttons[0].isVisible()).toBe(true);\n      expect(await buttons[1].isVisible()).toBe(true);\n      expect(await buttons[2].isVisible()).toBe(false);\n      expect(await buttons[3].isVisible()).toBe(false);\n\n      // 200 is kind of a magic number here, but was measured in storybook\n      page.setViewport({ width: 200, height: 800 });\n      await page.waitForChanges();\n\n      expect(await buttons[0].isVisible()).toBe(true);\n      expect(await buttons[1].isVisible()).toBe(false);\n      expect(await buttons[2].isVisible()).toBe(false);\n      expect(await buttons[3].isVisible()).toBe(false);\n\n      await openDropdown();\n      expect(await buttons[0].isVisible()).toBe(true);\n      expect(await buttons[1].isVisible()).toBe(true);\n      expect(await buttons[2].isVisible()).toBe(true);\n      expect(await buttons[3].isVisible()).toBe(true);\n    });\n\n    it('preserves events attached to the button', async () => {\n      // attach a mock event to the 2nd <market-button>\n      const mockCallBack = jest.fn();\n      await page.exposeFunction('callback', mockCallBack);\n      await page.$$eval('market-button', (buttons: Array<HTMLMarketButtonElement>) => {\n        buttons[1].addEventListener('click', (window as any).callback); // eslint-disable-line @typescript-eslint/no-explicit-any\n      });\n      await page.waitForChanges();\n\n      // click 2nd button\n      expect(await buttons[1].isVisible()).toBe(true);\n      await buttons[1].click();\n      expect(mockCallBack.mock.calls.length).toEqual(1);\n\n      // 200 is kind of a magic number here, but was measured in storybook\n      page.setViewport({ width: 200, height: 800 });\n      await page.waitForChanges();\n\n      // click 2nd button (now in overflow menu)\n      expect(await buttons[1].isVisible()).toBe(false);\n      await openDropdown();\n      expect(await buttons[1].isVisible()).toBe(true);\n      await buttons[1].click();\n      expect(mockCallBack.mock.calls.length).toEqual(2);\n    });\n  });\n});\n"]}