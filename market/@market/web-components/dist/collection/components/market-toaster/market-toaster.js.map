{"version":3,"file":"market-toaster.js","sourceRoot":"","sources":["../../../../src/components/market-toaster/market-toaster.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAE5E,6CAA6C;AAC7C,MAAM,sBAAsB,GAAG,EAAE,CAAC;AAClC,MAAM,mBAAmB,GAAG,EAAE,CAAC;AAC/B,MAAM,mCAAmC,GAAG,GAAG,CAAC;AAOhD,MAAM,OAAO,aAAa;IAL1B;QAOE,WAAM,GAAkC,EAAE,CAAC;KAkE5C;IAhEC;;QAEI;IAEJ,KAAK,CAAC,IAAI,CAAC,OAAO;QAChB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC7B,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACzC,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAC7B,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE7D,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,mCAAmC,CAAC,CAAC,CAAC;QACzF,OAAO,CAAC,qBAAqB,EAAE,CAAC;IAClC,CAAC;IAED,cAAc;QACZ,IAAI,MAAM,GAAG,mBAAmB,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YAC5B,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,gCAAgC,MAAM,MAAM,CAAC;YACrE,MAAM,IAAI,KAAK,CAAC,YAAY,GAAG,sBAAsB,CAAC;QACxD,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;QAEI;IAEJ,KAAK,CAAC,IAAI,CAAC,OAAO;QAChB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAC,qBAAqB,CAAC,GAAG,EAAE;YAChC,OAAO,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;YAC7B,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;QAEH,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,mCAAmC,CAAC,CAAC,CAAC;QACzF,OAAO,CAAC,MAAM,EAAE,CAAC;IACnB,CAAC;IAED;;QAEI;IAEJ,SAAS;QACP,MAAM,eAAe,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QACzC,OAAO,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACvE,CAAC;IAGD,8BAA8B,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE;QAC9C,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC;IAGD,kCAAkC,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE;QAClD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC;IAED,MAAM;QACJ,OAAO,CACL,EAAC,IAAI,qDAAC,KAAK,EAAC,gBAAgB;YAC1B,8DAAa,CACR,CACR,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, Element, Method, h, Listen } from '@stencil/core';\n\n// TODO(UI-1153): add design tokens for these\nconst TOAST_VERTICAL_SPACING = 16;\nconst TOAST_BOTTOM_MARGIN = 24;\nconst TOAST_ANIMATION_TRANSITION_DURATION = 200;\n\n@Component({\n  tag: 'market-toaster',\n  styleUrl: 'market-toaster.css',\n  shadow: true,\n})\nexport class MarketToaster {\n  @Element() el: HTMLMarketToasterElement;\n  toasts: Array<HTMLMarketToastElement> = [];\n\n  /**\n   * Add the passed toastEl to market-toaster and make it visible\n   **/\n  @Method()\n  async show(toastEl) {\n    this.toasts.unshift(toastEl);\n    toastEl.classList.add('use-transitions');\n    this.el.appendChild(toastEl);\n    window.requestAnimationFrame(this.positionToasts.bind(this));\n\n    await new Promise((resolve) => setTimeout(resolve, TOAST_ANIMATION_TRANSITION_DURATION));\n    toastEl.startAutoDismissTimer();\n  }\n\n  positionToasts() {\n    let offset = TOAST_BOTTOM_MARGIN;\n    this.toasts.forEach((toast) => {\n      toast.style.transform = `translate(-50%, calc(-100% - ${offset}px))`;\n      offset += toast.offsetHeight + TOAST_VERTICAL_SPACING;\n    });\n  }\n\n  /**\n   * Remove the passed toastEl from market-toaster\n   **/\n  @Method()\n  async hide(toastEl) {\n    const index = this.toasts.indexOf(toastEl);\n    this.toasts.splice(index, 1);\n    window.requestAnimationFrame(() => {\n      toastEl.style.transform = '';\n      this.positionToasts();\n    });\n\n    await new Promise((resolve) => setTimeout(resolve, TOAST_ANIMATION_TRANSITION_DURATION));\n    toastEl.remove();\n  }\n\n  /**\n   * Remove all market-toasts from market-toaster\n   **/\n  @Method()\n  removeAll() {\n    const allActiveToasts = [...this.toasts];\n    return Promise.all(allActiveToasts.map((toast) => this.hide(toast)));\n  }\n\n  @Listen('marketToastAutoDismissed')\n  toastAutoDismissedEventHandler({ target: toast }) {\n    this.hide(toast);\n  }\n\n  @Listen('marketToastManuallyDismissed')\n  toastManuallyDismissedEventHandler({ target: toast }) {\n    this.hide(toast);\n  }\n\n  render() {\n    return (\n      <Host class=\"market-toaster\">\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"]}