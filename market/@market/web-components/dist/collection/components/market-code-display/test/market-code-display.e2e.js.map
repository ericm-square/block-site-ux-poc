{"version":3,"file":"market-code-display.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-code-display/test/market-code-display.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage, E2EElement, E2EPage } from '@stencil/core/testing';\n\ndescribe('market-code-display', () => {\n  it('renders with defaults', async () => {\n    const page = await newE2EPage();\n    await page.setContent(`\n      <market-code-display>\n        <span slot=\"code\">1234</span>\n      </market-code-display>\n    `);\n\n    const el = await page.find('market-code-display');\n\n    expect(el).not.toBeNull();\n\n    expect(await el.getProperty('disabled')).toBe(false);\n    expect(await el.getProperty('focused')).toBe(false);\n    expect(await el.find('pierce/.code-container')).not.toBeNull();\n    expect(await page.findAll('pierce/.code-char')).toHaveLength(6);\n    expect(await el.find('pierce/button')).not.toBeNull();\n    expect(await page.findAll('[slot=\"actions\"]')).toHaveLength(1);\n  });\n\n  it('strips whitespace from inputted codes', async () => {\n    const page = await newE2EPage();\n    await page.setContent(`\n      <market-code-display>\n        <span slot=\"code\">4    3 12   </span>\n      </market-code-display>\n    `);\n\n    const el = await page.find('market-code-display');\n\n    expect(el).not.toBeNull();\n    expect(await page.findAll('pierce/.code-char')).toHaveLength(6);\n  });\n\n  describe('codes of different lengths', () => {\n    let page: E2EPage;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n    });\n\n    it('puts a code of 6 characters into 6 groups of 1', async () => {\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">6CHARS</span>\n        </market-code-display>\n      `);\n\n      const el = await page.find('market-code-display');\n\n      expect(el).not.toBeNull();\n\n      expect(await el.find('pierce/.code-container')).not.toBeNull();\n      // 6 characters + 2 blanks total (front & back)\n      expect(await page.findAll('pierce/.code-char')).toHaveLength(8);\n    });\n\n    it('puts a code of 12 characters into 3 groups of 4', async () => {\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">THISHAS12CHS</span>\n        </market-code-display>\n      `);\n\n      const el = await page.find('market-code-display');\n\n      expect(el).not.toBeNull();\n\n      expect(await el.find('pierce/.code-container')).not.toBeNull();\n      // 12 characters + 4 blanks total (every 4 chars)\n      expect(await page.findAll('pierce/.code-char')).toHaveLength(16);\n    });\n\n    it('puts a code of 16 characters into 4 groups of 4', async () => {\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">16ISALOTTACHARAS</span>\n        </market-code-display>\n      `);\n\n      const el = await page.find('market-code-display');\n\n      expect(el).not.toBeNull();\n\n      expect(await el.find('pierce/.code-container')).not.toBeNull();\n      // 16 characters + 5 blanks total (every 4 chars)\n      expect(await page.findAll('pierce/.code-char')).toHaveLength(21);\n    });\n  });\n\n  describe('accepts additional slotted actions', () => {\n    let page: E2EPage;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n    });\n\n    it('accepts a slotted button', async () => {\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">A12B</span>\n          <button slot=\"actions\">Test</button>\n        </market-code-display>\n      `);\n\n      const el = await page.find('market-code-display');\n\n      expect(el).not.toBeNull();\n\n      expect(await el.find('pierce/button')).not.toBeNull();\n      expect(await page.findAll('[slot=\"actions\"]')).toHaveLength(2);\n    });\n\n    it('accepts a slotted link', async () => {\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">HELLOO</span>\n          <a slot=\"actions\">TestLink</a>\n        </market-code-display>\n      `);\n\n      const el = await page.find('market-code-display');\n\n      expect(el).not.toBeNull();\n\n      expect(await el.find('pierce/button')).not.toBeNull();\n      expect(await page.findAll('[slot=\"actions\"]')).toHaveLength(2);\n    });\n  });\n\n  it('allows user to insert alternative text for the Copy button', async () => {\n    const page = await newE2EPage();\n    await page.setContent(`\n      <market-code-display>\n        <span slot=\"code\">1234</span>\n        <span slot=\"copy-text\">Copiar</span>\n      </market-code-display>\n    `);\n    const el = await page.find('market-code-display');\n\n    expect(el).not.toBeNull();\n\n    const copyButton = await el.find('[slot=\"copy-text\"]');\n    expect(copyButton.textContent).toBe('Copiar');\n  });\n\n  describe('accessibility', () => {\n    let page: E2EPage;\n    let el: E2EElement;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">1234</span>\n        </market-code-display>\n      `);\n      el = await page.find('market-code-display');\n    });\n\n    it('can be tabbed into', async () => {\n      await el.focus();\n      expect(await page.find(':focus')).toEqual(el);\n    });\n\n    it('can be tabbed out of', async () => {\n      // Focus on overall component\n      await el.focus();\n      expect(await page.find(':focus')).toEqual(el);\n\n      // Move focus outside of the component\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(await page.find(':focus')).not.toEqual(el);\n    });\n\n    it('cannot be tabbed into when disabled', async () => {\n      el.setProperty('disabled', true);\n      await el.focus();\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(await page.find(':focus')).not.toEqual(el);\n    });\n  });\n\n  describe('when the Copy button is clicked', () => {\n    let page: E2EPage;\n    let el: E2EElement;\n    let copyButton: E2EElement;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(`\n        <market-code-display>\n          <span slot=\"code\">1234</span>\n        </market-code-display>\n      `);\n\n      // Allow test DOM to access clipboard\n      const context = await page.browserContext();\n      await context.clearPermissionOverrides();\n      await context.overridePermissions(page.url(), ['clipboard-read', 'clipboard-sanitized-write']);\n\n      el = await page.find('market-code-display');\n      copyButton = await el.find('pierce/button');\n    });\n\n    it('emits a marketCodeCopied event', async () => {\n      const eventSpy = await el.spyOnEvent('marketCodeCopied');\n      await copyButton.click();\n      await page.waitForChanges();\n      expect(eventSpy).toHaveReceivedEventTimes(1);\n    });\n\n    it('copies code to clipboard', async () => {\n      await copyButton.click();\n      expect(await page.evaluate(() => navigator.clipboard.readText())).toEqual('1234');\n    });\n  });\n});\n"]}