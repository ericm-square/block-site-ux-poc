{"version":3,"file":"market-blade.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-blade/test/market-blade.e2e.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,uBAAuB,CAAC;AAEnD,QAAQ,CAAC,cAAc,EAAE,GAAG,EAAE;IAC5B,EAAE,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;QACvB,MAAM,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;QAChC,MAAM,IAAI,CAAC,UAAU,CAAC;;;OAGnB,CAAC,CAAC;QAEL,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,MAAM,EAAE,GAAG,EAAE;QACpB,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC3C,MAAM,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAChC,MAAM,IAAI,CAAC,UAAU,CAAC;;;KAGvB,CAAC,CAAC;YAED,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAChD,MAAM,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;YAChD,MAAM,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAChC,MAAM,IAAI,CAAC,UAAU,CAAC;;;;KAIvB,CAAC,CAAC;YAED,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAChD,MAAM,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;QACpE,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oCAAoC,EAAE,GAAG,EAAE;QAClD,IAAI,IAAI,CAAC;QACT,IAAI,MAAM,CAAC;QAEX,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAC1B,MAAM,IAAI,CAAC,UAAU,CACnB;;;;;yBAKiB,CAClB,CAAC;YACF,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qEAAqE,EAAE,KAAK,IAAI,EAAE;YACnF,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAE9C,uDAAuD;YACvD,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAE1C,yDAAyD;YACzD,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,0CAA0C,EAAE,GAAG,EAAE;QACxD,IAAI,IAAI,CAAC;QACT,IAAI,MAAM,CAAC;QAEX,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAC1B,MAAM,IAAI,CAAC,UAAU,CACnB;;;;;yBAKiB,CAClB,CAAC;YACF,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6EAA6E,EAAE,KAAK,IAAI,EAAE;YAC3F,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAE1C,8DAA8D;YAC9D,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAE1C,iEAAiE;YACjE,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClE,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,kCAAkC;IAClC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACjE,MAAM,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAChC,MAAM,IAAI,CAAC,UAAU,CAAC;;;;;;;;;;;;;;;;;;OAkBrB,CAAC,CAAC;YAEH,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACxD,MAAM,WAAW,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;YACjF,MAAM,YAAY,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;YAC9F,MAAM,YAAY,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;YAC9F,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;YAEtF,MAAM,KAAK,CAAC,KAAK,EAAE,CAAC;YACpB,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,WAAW,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAC/C,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAChD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAChD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,IAAI,GAAG,MAAM,UAAU,EAAE,CAAC;YAChC,MAAM,IAAI,CAAC,UAAU,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAiCrB,CAAC,CAAC;YACH,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAChD,MAAM,WAAW,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;YACjF,MAAM,eAAe,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;YAC5F,MAAM,aAAa,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;YACxF,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,oDAAoD,CAAC,CAAC;YAC9F,MAAM,aAAa,GAAG,MAAM,KAAK,CAAC,IAAI,CAAC,mDAAmD,CAAC,CAAC;YAE5F,iDAAiD;YACjD,MAAM,KAAK,CAAC,KAAK,EAAE,CAAC;YACpB,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,WAAW,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAC/C,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,eAAe,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YACnD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YACjD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,cAAc,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAClD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAEjD,4CAA4C;YAC5C,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,CAAC,WAAW,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { newE2EPage } from '@stencil/core/testing';\n\ndescribe('market-blade', () => {\n  it('renders', async () => {\n    const page = await newE2EPage();\n    await page.setContent(`\n        <market-blade>\n        </market-blade>\n      `);\n\n    const element = await page.find('market-blade');\n    expect(element).toHaveAttribute('hydrated');\n  });\n\n  describe('a11y', () => {\n    it('allows aria-label to be set', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n      <market-blade aria-label=\"Test hidden label\">\n      </market-blade>\n    `);\n\n      const element = await page.find('market-blade');\n      expect(element).toEqualAttribute('aria-label', 'Test hidden label');\n    });\n\n    it('allows aria-labelledby to be set', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n      <market-blade aria-labelledby=\"test-label\">\n        <market-header><h2 id=\"test-label\">Test visible label</h2></market-header>\n      </market-blade>\n    `);\n\n      const element = await page.find('market-blade');\n      expect(element).toEqualAttribute('aria-labelledby', 'test-label');\n    });\n  });\n\n  describe('when a header and main are present', () => {\n    let page;\n    let header;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(\n        `<market-blade style=\"height: 200px\">\n          <market-header show-navigation><h2>A heading</h2></market-header>\n          <section class=\"main\">\n            <div style=\"height: 1000px\"></div>\n          </section>\n         </market-blade>`,\n      );\n      header = await page.find('market-header');\n    });\n\n    it('it toggles compact mode on the header when main section is scrolled', async () => {\n      expect(header).not.toHaveAttribute('compact');\n\n      // scroll main section down 1px to trigger compact mode\n      await page.$eval('section.main', (el) => el.scrollTo({ top: 1 }));\n      await page.waitForChanges();\n      expect(header).toHaveAttribute('compact');\n\n      // scroll main section back to top to revert compact mode\n      await page.$eval('section.main', (el) => el.scrollTo({ top: 0 }));\n      await page.waitForChanges();\n      expect(header).not.toHaveAttribute('compact');\n    });\n  });\n\n  describe('when a header is already in compact mode', () => {\n    let page;\n    let header;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(\n        `<market-blade style=\"height: 200px\">\n          <market-header show-navigation compact><h2>A heading</h2></market-header>\n          <section class=\"main\">\n            <div style=\"height: 1000px\"></div>\n          </section>\n         </market-blade>`,\n      );\n      header = await page.find('market-header');\n    });\n\n    it('it does not toggle compact mode on the header when main section is scrolled', async () => {\n      expect(header).toHaveAttribute('compact');\n\n      // scroll main section down 1px should not affect compact mode\n      await page.$eval('section.main', (el) => el.scrollTo({ top: 1 }));\n      await page.waitForChanges();\n      expect(header).toHaveAttribute('compact');\n\n      // scroll main section back to top should not affect compact mode\n      await page.$eval('section.main', (el) => el.scrollTo({ top: 0 }));\n      await page.waitForChanges();\n      expect(header).toHaveAttribute('compact');\n    });\n  });\n\n  // became flaky with puppeteer v21\n  describe.skip('focus trap', () => {\n    it('does not trap focus with trap-focus prop disabled', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-blade>\n          <market-header show-navigation>\n            <market-button\n              data-test-id=\"blade-button-1\"\n              slot=\"actions\"\n            >\n              Button\n            </market-button>\n            <market-button\n              data-test-id=\"blade-button-2\"\n              slot=\"actions\"\n            >\n              Button\n            </market-button>\n          </market-header>\n        </market-blade>\n        <market-button data-test-id=\"outside-button\">Focusable</market-button>\n      `);\n\n      const blade = await page.find('market-blade');\n      const header = await blade.find('pierce/market-header');\n      const closeButton = await header.find('pierce/market-button[slot=\"navigation\"]');\n      const bladeButton1 = await header.find('pierce/market-button[data-test-id=\"blade-button-1\"]');\n      const bladeButton2 = await header.find('pierce/market-button[data-test-id=\"blade-button-2\"]');\n      const outsideButton = await page.find('market-button[data-test-id=\"outside-button\"]');\n\n      await blade.click();\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(closeButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(bladeButton1).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(bladeButton2).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(outsideButton).toHaveAttribute('focused');\n    });\n\n    it('traps focus within the blade', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-button>Unfocusable</market-button>\n        <market-blade trap-focus>\n          <market-header show-navigation>\n            <market-button\n              data-test-id=\"secondary-button\"\n              slot=\"actions\"\n            >\n              Secondary\n            </market-button>\n            <market-button\n              data-test-id=\"primary-button\"\n              slot=\"actions\"\n            >\n              Primary\n            </market-button>\n          </market-header>\n          <section class=\"main\">\n            <form>\n              <market-field>\n                <market-input-text data-test-id=\"first-name-input\">\n                  <label>First name</label>\n                </market-input-text>\n              </market-field>\n              <market-field>\n                <market-input-text data-test-id=\"last-name-input\">\n                  <label>Last name</label>\n                </market-input-text>\n              </market-field>\n            </form>\n          </section>\n        </market-blade>\n        <market-button>Unfocusable</market-button>\n      `);\n      const blade = await page.find('market-blade');\n      const header = await page.find('market-header');\n      const closeButton = await header.find('pierce/market-button[slot=\"navigation\"]');\n      const secondaryButton = await header.find('market-button[data-test-id=\"secondary-button\"]');\n      const primaryButton = await header.find('market-button[data-test-id=\"primary-button\"]');\n      const firstNameInput = await blade.find('market-input-text[data-test-id=\"first-name-input\"]');\n      const lastNameInput = await blade.find('market-input-text[data-test-id=\"last-name-input\"]');\n\n      // Tab navigation across all tabbable elements...\n      await blade.focus();\n      await page.waitForChanges();\n      expect(closeButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(secondaryButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(primaryButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(firstNameInput).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(lastNameInput).toHaveAttribute('focused');\n\n      // ...and back to the first tabbable element\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(closeButton).toHaveAttribute('focused');\n    });\n  });\n});\n"]}