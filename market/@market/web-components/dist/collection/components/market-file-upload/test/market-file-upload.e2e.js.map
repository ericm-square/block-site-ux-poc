{"version":3,"file":"market-file-upload.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-file-upload/test/market-file-upload.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { resolve } from 'path';\n\nimport { E2EPage, newE2EPage } from '@stencil/core/testing';\n\n// declare global node __dirname var\ndeclare let __dirname;\n\nasync function verifySelectedFileRows(page: E2EPage, expectedFiles: Array<string>): Promise<void> {\n  for (const [i, value] of expectedFiles.entries()) {\n    const uploadElement = await page.find('market-file-upload');\n    const fileLabel = await uploadElement.find(`pierce/market-row[data-index=\"${i}\"] > label`);\n    expect(fileLabel.innerHTML).toBe(value);\n  }\n}\n\ndescribe('market-file-upload', () => {\n  it('renders with defaults', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload></market-file-upload>');\n\n    const element = await page.find('market-file-upload');\n    expect(element).not.toBeNull();\n\n    const input = element.shadowRoot.querySelector('input');\n    expect(input).not.toBeNull();\n\n    expect(input).toEqualAttribute('accept', '');\n    expect(input).toEqualAttribute('multiple', null);\n  });\n\n  it('watches and re-renders file updates', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload></market-file-upload>');\n\n    await page.$eval('market-file-upload', (elm: HTMLMarketFileUploadElement) => {\n      const files = [new File([''], 'test.jpg', { type: 'image/jpeg' })];\n      elm.value = files;\n    });\n\n    await page.waitForChanges();\n    await verifySelectedFileRows(page, ['test.jpg']);\n\n    // verify aria-label default is being set on file row deletes\n    const uploadElement = await page.find('market-file-upload');\n    const fileDeleteIcon = await uploadElement.find('pierce/market-row > market-accessory[slot=\"trailing-accessory\"]');\n    expect(fileDeleteIcon).toEqualAttribute('aria-label', 'Delete');\n  });\n\n  it('renders multiple files when multiple is true', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload multiple></market-file-upload>');\n\n    await page.$eval('market-file-upload', (elm: HTMLMarketFileUploadElement) => {\n      const files = [\n        new File([''], 'test.jpg', { type: 'image/jpeg' }),\n        new File([''], 'test2.jpg', { type: 'image/jpeg' }),\n      ];\n      elm.value = files;\n    });\n\n    await page.waitForChanges();\n    await verifySelectedFileRows(page, ['test.jpg', 'test2.jpg']);\n  });\n\n  it('only renders one file when multiple is false', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload></market-file-upload>');\n    await page.$eval('market-file-upload', (elm: HTMLMarketFileUploadElement) => {\n      const files = [\n        new File([''], 'test.jpg', { type: 'image/jpeg' }),\n        new File([''], 'test2.jpg', { type: 'image/jpeg' }),\n      ];\n      elm.value = files;\n    });\n\n    await page.waitForChanges();\n    await verifySelectedFileRows(page, ['test.jpg']);\n    const uploadElement = await page.find('market-file-upload');\n    const secondFile = await uploadElement.find('pierce/market-row[data-index=\"1\"] > label');\n    expect(secondFile).toBeNull();\n  });\n\n  it('renders files on initial render', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<div></div>');\n    await page.$eval('div', (container) => {\n      // since we can't inject objects on the template, via `setContent`...\n      const newFileUploadEl = document.createElement('market-file-upload');\n      newFileUploadEl.multiple = true;\n      newFileUploadEl.value = [\n        new File([''], 'test.jpg', { type: 'image/jpeg' }),\n        new File([''], 'test2.jpg', { type: 'image/jpeg' }),\n      ];\n      container.appendChild(newFileUploadEl);\n    });\n    await page.waitForChanges();\n    await page.waitForSelector('market-file-upload[hydrated]');\n\n    await verifySelectedFileRows(page, ['test.jpg', 'test2.jpg']);\n  });\n\n  it('slotted button opens file chooser', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload>Drag and drop <button>here</button></market-file-upload>');\n\n    const futureFileChooser = page.waitForFileChooser();\n    const button = await page.find('market-file-upload > button');\n    button.click();\n    const fileChooser = await futureFileChooser;\n    await fileChooser.accept([resolve(__dirname, 'test-image.png')]);\n\n    await page.waitForChanges();\n\n    await verifySelectedFileRows(page, ['test-image.png']);\n  });\n\n  it('clicking delete button removes file', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-file-upload>Drag and drop <button>here</button></market-file-upload>');\n\n    await page.$eval('market-file-upload', (elm: HTMLMarketFileUploadElement) => {\n      const files = [new File([''], 'test.jpg', { type: 'image/jpeg' })];\n      elm.value = files;\n    });\n\n    await page.waitForChanges();\n    await verifySelectedFileRows(page, ['test.jpg']);\n\n    const uploadElement = await page.find('market-file-upload');\n    const deleteButton = await uploadElement.find(\n      'pierce/market-row[data-index=\"0\"] > market-accessory[slot=\"trailing-accessory\"]',\n    );\n    deleteButton.click();\n\n    await page.waitForChanges();\n    const row = await uploadElement.find('pierce/market-row[data-index=\"0\"]');\n    expect(row).toBeNull();\n  });\n\n  describe('when the fileMetadata config prop is used', () => {\n    let page;\n    let uploadElement;\n\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent('<market-file-upload multiple></market-file-upload>');\n\n      uploadElement = await page.find('market-file-upload');\n\n      await page.$eval('market-file-upload', (el: HTMLMarketFileUploadElement) => {\n        el.value = [\n          new File([''], 'file1.txt', { type: 'text/plain' }),\n          new File([''], 'file2.csv', { type: 'text/csv' }),\n          new File([''], 'file3.jpg', { type: 'image/jpg' }),\n          new File([''], 'file4.png', { type: 'image/png' }),\n        ];\n      });\n      await page.waitForChanges();\n    });\n\n    it('to set row status', async () => {\n      await page.$eval('market-file-upload', (el: HTMLMarketFileUploadElement) => {\n        el.fileMetadata = [\n          { filename: 'file1.txt', status: 'loading' },\n          { filename: 'file3.jpg', status: 'error' },\n          { filename: 'file4.png', status: 'success' },\n        ];\n      });\n      await page.waitForChanges();\n\n      const loadingRow = await uploadElement.find(`pierce/market-row[data-index=\"0\"]`); // file1.txt\n      const errorRow = await uploadElement.find(`pierce/market-row[data-index=\"2\"]`); // file3.jpg\n      const successRow = await uploadElement.find(`pierce/market-row[data-index=\"3\"]`); // file4.png\n\n      expect(loadingRow).toEqualAttribute('data-status', 'loading');\n      expect(errorRow).toEqualAttribute('data-status', 'error');\n      expect(successRow).toEqualAttribute('data-status', 'success');\n    });\n\n    it('to set row message (secondary text)', async () => {\n      await page.$eval('market-file-upload', (el: HTMLMarketFileUploadElement) => {\n        el.fileMetadata = [\n          { filename: 'file3.jpg', status: 'error', message: 'error message should display' },\n          { filename: 'file4.png', message: 'other messages should not' },\n        ];\n      });\n      await page.waitForChanges();\n\n      const errorRowSubtext = await uploadElement.find(`pierce/market-row[data-index=\"2\"] [slot=\"subtext\"]`); // file3.jpg\n      const regularRowSubtext = await uploadElement.find(`pierce/market-row[data-index=\"3\"] [slot=\"subtext\"]`); // file4.png\n\n      expect(errorRowSubtext).not.toBeNull();\n      expect(regularRowSubtext).toBeNull();\n    });\n\n    it('to set custom row icon (leading accessory)', async () => {\n      await page.$eval('market-file-upload', (el: HTMLMarketFileUploadElement) => {\n        el.fileMetadata = [\n          { filename: 'file2.csv', leadingIconName: 'recommend' }, // semantic icon name\n          { filename: 'file4.png', leadingIconName: 'eye-slash' }, // descriptive icon name\n        ];\n      });\n      await page.waitForChanges();\n\n      const defaultFileRowIcon = await uploadElement.find(\n        `pierce/market-row[data-index=\"0\"] [slot=\"leading-accessory\"] market-icon`, // file1.txt\n      );\n      const customizedFileRowIcon = await uploadElement.find(\n        `pierce/market-row[data-index=\"1\"] [slot=\"leading-accessory\"] market-icon`, // file2.csv\n      );\n      const defaultImageRowIcon = await uploadElement.find(\n        `pierce/market-row[data-index=\"2\"] [slot=\"leading-accessory\"] market-icon`, // file3.jpg\n      );\n      const customizedImageRowIcon = await uploadElement.find(\n        `pierce/market-row[data-index=\"3\"] [slot=\"leading-accessory\"] market-icon`, // file4.png\n      );\n\n      expect(defaultFileRowIcon).toEqualAttribute('name', 'file');\n      expect(customizedFileRowIcon).toEqualAttribute('name', 'recommend');\n      expect(defaultImageRowIcon).toEqualAttribute('name', 'picture');\n      expect(customizedImageRowIcon).toEqualAttribute('name', 'eye-slash');\n    });\n  });\n});\n"]}