{"version":3,"file":"market-context.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-context/test/market-context.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage } from '@stencil/core/testing';\n\ndescribe('market-context', () => {\n  it('renders', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-context></market-context>');\n\n    const element = await page.find('market-context');\n    expect(element).toHaveAttribute('hydrated');\n  });\n\n  describe('internal methods for use by market-context-manager', () => {\n    it('context can be opened and closed', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-context></market-context>\n        <market-blade>Content</market-blade>\n      `);\n\n      const context = await page.find('market-context');\n      const contextElemHandle = await page.$('market-context');\n      const bladeElemHandle = await page.$('market-blade');\n\n      const marketContextContentsChanged = await page.spyOnEvent('marketContextContentsChanged');\n      const marketContextEmptied = await page.spyOnEvent('marketContextEmptied');\n\n      const animationEnterDuration = await context.getProperty('animationEnterDuration');\n      const animationExitDuration = await context.getProperty('animationExitDuration');\n\n      expect(marketContextContentsChanged).toHaveReceivedEventTimes(0);\n      expect(marketContextEmptied).toHaveReceivedEventTimes(0);\n\n      // using context.open(el) method\n      await page.evaluate(\n        (context, dialog) => {\n          context.open(dialog);\n        },\n        contextElemHandle,\n        bladeElemHandle,\n      );\n      await page.waitForChanges();\n      await page.waitForTimeout(animationEnterDuration);\n\n      expect(context).toHaveClass('no-veil'); // expected bc we opened a blade\n      expect(context).not.toHaveAttribute('hidden');\n      expect(marketContextContentsChanged).toHaveReceivedEventTimes(1);\n      expect(marketContextEmptied).toHaveReceivedEventTimes(0);\n\n      // using context.close() method\n      await page.evaluate((context) => {\n        context.close();\n      }, contextElemHandle);\n      await page.waitForTimeout(animationExitDuration * 2); // idk why the exit animation time isn't enough here\n      await page.waitForChanges();\n\n      expect(context).toHaveAttribute('hidden');\n      expect(marketContextContentsChanged).toHaveReceivedEventTimes(2);\n      expect(marketContextEmptied).toHaveReceivedEventTimes(1);\n    });\n\n    it('context opened with persistent dialog cannot be closed', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-context></market-context>\n        <market-dialog persistent>Content</market-blade>\n      `);\n\n      const context = await page.find('market-context');\n      const contextElemHandle = await page.$('market-context');\n      const dialogElemHandle = await page.$('market-dialog');\n\n      const animationEnterDuration = await context.getProperty('animationEnterDuration');\n      const animationExitDuration = await context.getProperty('animationExitDuration');\n\n      // using context.open(el) method\n      await page.evaluate(\n        (context, dialog) => {\n          context.open(dialog);\n        },\n        contextElemHandle,\n        dialogElemHandle,\n      );\n      await page.waitForChanges();\n      await page.waitForTimeout(animationEnterDuration);\n\n      expect(context).not.toHaveClass('no-veil');\n      expect(context).not.toHaveAttribute('hidden');\n\n      // using context.close() method\n      await page.evaluate((context) => {\n        context.close();\n      }, contextElemHandle);\n      await page.waitForTimeout(animationExitDuration);\n      await page.waitForChanges();\n\n      expect(context).not.toHaveAttribute('hidden');\n    });\n  });\n});\n"]}