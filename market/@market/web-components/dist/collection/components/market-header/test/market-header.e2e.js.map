{"version":3,"file":"market-header.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-header/test/market-header.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage } from '@stencil/core/testing';\n\ndescribe('market-header', () => {\n  let page;\n  let el;\n\n  it('can disable close button', async () => {\n    page = await newE2EPage();\n    await page.setContent('<market-header show-navigation disable-close-button></market-header>');\n\n    el = await page.find('market-header');\n    const closeX = await el.find('pierce/market-button[aria-label=\"Close\"]');\n    expect(closeX).toHaveAttribute('disabled');\n  });\n\n  it('emits an event when the close button is clicked', async () => {\n    page = await newE2EPage();\n    await page.setContent('<market-header show-navigation></market-header>');\n\n    el = await page.find('market-header');\n    const closeX = await el.find('pierce/market-button[aria-label=\"Close\"]');\n    const navSpy = await el.spyOnEvent('marketHeaderNavigate');\n\n    await closeX.click();\n    await page.waitForChanges();\n\n    expect(navSpy).toHaveReceivedEventTimes(1);\n    expect(navSpy.lastEvent.detail.action).toBe('close');\n  });\n\n  it('hides the actions menu', async () => {\n    page = await newE2EPage();\n    await page.setContent('<market-header></market-header>');\n\n    el = await page.find('market-header');\n    expect(el).not.toHaveAttribute('show-actions');\n  });\n\n  describe('with slotted navigation', () => {\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent('<market-header><button slot=\"navigation\">Click me</button></market-header>');\n      el = await page.find('market-header');\n      await page.waitForChanges();\n    });\n\n    it('emits an event when the navigation button is clicked', async () => {\n      const navButton = await el.find('[slot=\"navigation\"]');\n      const navSpy = await el.spyOnEvent('marketHeaderNavigate');\n\n      await navButton.click();\n      await page.waitForChanges();\n\n      expect(navSpy).toHaveReceivedEventTimes(1);\n      expect(navSpy.lastEvent.detail.action).toBe('custom');\n    });\n  });\n\n  describe('with slotted actions', () => {\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent('<market-header><button slot=\"actions\">Click me</button></market-header>');\n      el = await page.find('market-header');\n      await page.waitForChanges();\n    });\n\n    it('shows the actions menu', () => {\n      expect(el).toHaveAttribute('show-actions');\n    });\n  });\n\n  describe('with slotted heading and wayfinding elements', () => {\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(\n        '<market-header><small slot=\"wayfinding\">Step 1 of 2</small><h2>A heading</h2></market-header>',\n      );\n      el = await page.find('market-header');\n      await page.waitForChanges();\n    });\n\n    it('clones the slotted content into the compact slot', async () => {\n      const clonedHeading = await el.find('h2[slot=\"compact\"]');\n      expect(clonedHeading.textContent).toBe('A heading');\n\n      const clonedWayfinding = await el.find('.wayfinding[slot=\"compact\"]');\n      expect(clonedWayfinding.textContent).toBe('Step 1 of 2');\n    });\n\n    describe('when the slotted content changes via JS', () => {\n      beforeEach(async () => {\n        el.innerHTML = '<small slot=\"wayfinding\">Step 2 of 2</small><h2>A different heading</h2>';\n        await page.waitForChanges();\n      });\n\n      it('reclones the slotted content into the compact slot', async () => {\n        const clonedHeading = await el.find('h2[slot=\"compact\"]');\n        expect(clonedHeading.textContent).toBe('A different heading');\n\n        const clonedWayfinding = await el.find('.wayfinding[slot=\"compact\"]');\n        expect(clonedWayfinding.textContent).toBe('Step 2 of 2');\n      });\n    });\n  });\n\n  describe('when navigation is present', () => {\n    beforeEach(async () => {\n      page = await newE2EPage();\n      await page.setContent(\n        '<market-header show-navigation><small slot=\"wayfinding\">Step 1 of 2</small><h2>A heading</h2></market-header>',\n      );\n      el = await page.find('market-header');\n    });\n\n    it('reduces the height of the header in compact mode', async () => {\n      // get the default non-compact height\n      let headerStyle = await el.getComputedStyle();\n      const defaultHeight = Number.parseInt(headerStyle.getPropertyValue('height'), 10);\n\n      // get the compact height\n      el.setAttribute('compact', true);\n      await page.waitForChanges();\n      headerStyle = await el.getComputedStyle();\n      const compactHeight = Number.parseInt(headerStyle.getPropertyValue('height'), 10);\n\n      // compact should be shorter\n      expect(compactHeight).toBeLessThan(defaultHeight);\n    });\n  });\n});\n"]}