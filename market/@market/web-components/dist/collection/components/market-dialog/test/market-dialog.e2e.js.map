{"version":3,"file":"market-dialog.e2e.js","sourceRoot":"","sources":["../../../../../src/components/market-dialog/test/market-dialog.e2e.ts"],"names":[],"mappings":"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","sourcesContent":["import { newE2EPage } from '@stencil/core/testing';\n\ndescribe('market-dialog', () => {\n  it('renders', async () => {\n    const page = await newE2EPage();\n    await page.setContent('<market-dialog></market-dialog>');\n\n    const element = await page.find('market-dialog');\n    expect(element).toHaveAttribute('hydrated');\n    expect(element).not.toHaveAttribute('is-loading');\n  });\n\n  describe('a11y', () => {\n    it('allows aria-label to be set', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-dialog aria-label=\"Test hidden label\">\n        </market-dialog>\n      `);\n\n      const element = await page.find('market-dialog');\n      expect(element).toEqualAttribute('aria-label', 'Test hidden label');\n    });\n\n    it('allows aria-labelledby to be set', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-dialog aria-labelledby=\"test-label\">\n          <section class=\"main\"><h2 id=\"test-label\">Test visible label</h2></section>\n        </market-dialog>\n      `);\n\n      const element = await page.find('market-dialog');\n      expect(element).toEqualAttribute('aria-labelledby', 'test-label');\n    });\n  });\n\n  describe('accessibility', () => {\n    it('does not trap focus with trap-focus prop disabled', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-dialog>\n          <market-footer>\n            <market-button-group>\n              <market-button data-test-id=\"agree\">Agree</market-button>\n              <market-button data-test-id=\"disagree\">Disagree</market-button>\n            </market-button-group>\n          </market-footer>\n        </market-dialog>\n        <market-button data-test-id=\"outside-button\">Focusable</market-button>\n      `);\n\n      const dialog = await page.find('market-dialog');\n      const agreeButton = await dialog.find('market-button[data-test-id=\"agree\"]');\n      const disagreeButton = await dialog.find('market-button[data-test-id=\"disagree\"]');\n      const outsideButton = await page.find('market-button[data-test-id=\"outside-button\"]');\n\n      await page.click('body');\n      await page.waitForChanges();\n      expect(agreeButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(disagreeButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(outsideButton).toHaveAttribute('focused');\n    });\n\n    it('traps focus within the dialog', async () => {\n      const page = await newE2EPage();\n      await page.setContent(`\n        <market-button>Unfocusable</market-button>\n        <market-dialog trap-focus>\n          <market-footer>\n            <market-button-group>\n              <market-button data-test-id=\"agree\">Agree</market-button>\n              <market-button data-test-id=\"disagree\">Disagree</market-button>\n            </market-button-group>\n          </market-footer>\n        </market-dialog>\n        <market-button>Unfocusable</market-button>\n      `);\n      await page.waitForChanges();\n      const dialog = await page.find('market-dialog');\n      const agreeButton = await dialog.find('market-button[data-test-id=\"agree\"]');\n      const disagreeButton = await dialog.find('market-button[data-test-id=\"disagree\"]');\n\n      // Tab navigation across all tabbable elements...\n      await dialog.focus();\n      await page.waitForChanges();\n      expect(agreeButton).toHaveAttribute('focused');\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(disagreeButton).toHaveAttribute('focused');\n\n      // ...and back to the first tabbable element\n      await page.keyboard.press('Tab');\n      await page.waitForChanges();\n      expect(agreeButton).toHaveAttribute('focused');\n    });\n  });\n});\n"]}