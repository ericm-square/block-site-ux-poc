{"version":3,"file":"market-tooltip.js","sourceRoot":"","sources":["../../../../src/components/market-tooltip/market-tooltip.tsx"],"names":[],"mappings":"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","sourcesContent":["// note that there is currently no spec test for this component. for some\n// reason, jest chokes when running spec tests on components that use\n// js imports (ex. @market/market-theme/style-dictionary).\n\n// it appears to be a known issue, but i couldn't get the proposed configuration\n// changes to work as expected: https://github.com/ionic-team/stencil/issues/2129\n\nimport type { Placement, PositioningStrategy } from '@popperjs/core';\nimport { Component, Element, Event, EventEmitter, Host, Listen, Prop, h, Method } from '@stencil/core';\n\nimport { getNamespacedTagFor } from '../../utils/namespace';\n\n/**\n * @slot trigger - The text or icon used for the tooltip trigger. Interacting with the\n * slotted content will serve as the trigger that opens the popover. Defaults to\n * an ℹ️ icon.\n * @slot content - Content slotted here will appear in `market-popover`, which\n * becomes visible when the slotted trigger content is interacted with.\n * @part dropdown - the market-dropdown element.\n * @part trigger - the trigger element.\n * @part popover - the popover element.\n */\n@Component({\n  tag: 'market-tooltip',\n  styleUrl: 'market-tooltip.css',\n  shadow: true,\n})\nexport class MarketTooltip {\n  @Element() el: HTMLMarketTooltipElement;\n\n  /**\n   * Defines what types of interaction the tooltip should have\n   * (see `market-dropdown` docs for more granular explanation)\n   */\n  @Prop() readonly interaction: 'click' | 'hover' | 'persistent' | 'none' = 'hover';\n\n  /**\n   * Functionally and visually disables the tooltip trigger.\n   */\n  @Prop({ reflect: true }) readonly disabled: boolean = false;\n\n  /**\n   * Configuration option for Popper.js (used to position the tooltip overlay).\n   * Describes the preferred placement of the popper.\n   * https://popper.js.org/docs/v2/constructors//#placement\n   */\n  @Prop() readonly popoverPlacement: Placement = 'bottom';\n\n  /**\n   * Configuration option for Popper.js (used to position `<market-popover>`).\n   * Describes the positioning strategy to use. By default, it is absolute. If\n   * your reference element is in a fixed container, use the fixed strategy.\n   * https://popper.js.org/docs/v2/constructors//#strategy\n   */\n  @Prop() readonly popoverStrategy: PositioningStrategy = 'absolute';\n\n  /**\n   * Configuration option for Popper.js (used to position `<market-popover>`).\n   * Displaces the popover along the reference element.\n   * https://popper.js.org/docs/v2/modifiers/offset/#skidding-1\n   */\n  @Prop() readonly popoverSkidding: number;\n\n  /**\n   * Configuration option for Popper.js (used to position `<market-popover>`).\n   * Displaces the popper away from, or toward, the reference element in the\n   * direction of its placement.\n   * https://popper.js.org/docs/v2/modifiers/offset/#distance-1\n   */\n  @Prop() readonly popoverDistance: number = 0;\n\n  /**\n   * Whether or not the tooltip is open. Setting it to true means it will be open\n   * by default\n   */\n  // eslint-disable-next-line @stencil-community/props-must-be-readonly\n  @Prop({ reflect: true }) expanded: boolean = false;\n\n  /**\n   * Fired whenever the tooltip is opened.\n   */\n  @Event({ bubbles: true, composed: true }) marketTooltipOpened: EventEmitter;\n\n  /**\n   * Fired whenever the tooltip is closed.\n   */\n  @Event({ bubbles: true, composed: true }) marketTooltipClosed: EventEmitter;\n\n  @Listen('marketDropdownOpened')\n  dropdownOpenedEventHandler(e: CustomEvent<void>) {\n    if (e.target !== this.el) return;\n    this.expanded = true;\n    this.marketTooltipOpened.emit();\n  }\n\n  @Listen('marketDropdownClosed')\n  dropdownClosedEventHandler(e: CustomEvent<void>) {\n    if (e.target !== this.el) return;\n    this.expanded = false;\n    this.marketTooltipClosed.emit();\n  }\n\n  innerDropdown: HTMLMarketDropdownElement;\n\n  /**\n   * Opens the tooltip\n   */\n  @Method()\n  openTooltip(): Promise<void> {\n    return this.innerDropdown.openDropdown();\n  }\n\n  /**\n   * Closes the tooltip\n   */\n  @Method()\n  closeTooltip(): Promise<void> {\n    return this.innerDropdown.closeDropdown();\n  }\n\n  styleLinks() {\n    // since it isn't possible to style slotted child elements, we need to add\n    // inline styles to slotted links in order to style them correctly\n    // https://github.com/WICG/webcomponents/issues/594\n    // https://github.com/WICG/webcomponents/issues/331\n\n    const slottedLinks = [...this.el.children]\n      .find((child) => child.slot === 'content')\n      ?.querySelectorAll<HTMLAnchorElement | HTMLMarketLinkElement>(`a, ${getNamespacedTagFor('market-link')}`);\n\n    slottedLinks.forEach((link) => {\n      link.style.color = 'var(--tooltip-link-color)';\n      link.style.fontSize = 'var(--tooltip-link-size)';\n      link.style.fontWeight = 'var(--tooltip-link-weight)';\n      link.style.lineHeight = 'var(--tooltip-link-leading)';\n      link.style.letterSpacing = 'var(--tooltip-link-tracking)';\n      link.style.textTransform = 'var(--tooltip-link-case)';\n      link.style.textDecoration = 'none';\n    });\n  }\n\n  componentWillRender() {\n    this.styleLinks();\n  }\n\n  render() {\n    const MarketDropdownTagName = getNamespacedTagFor('market-dropdown');\n    return (\n      <Host aria-expanded={this.expanded} class=\"market-tooltip\">\n        <MarketDropdownTagName\n          interaction={this.interaction}\n          popover-placement={this.popoverPlacement}\n          popover-strategy={this.popoverStrategy}\n          popover-distance={this.popoverDistance}\n          popover-skidding={this.popoverSkidding}\n          disabled={this.disabled}\n          aria-expanded={this.expanded}\n          part=\"dropdown\"\n          ref={(el) => (this.innerDropdown = el)}\n        >\n          {/* this gets slotted into market-dropdown's trigger slot */}\n          <div slot=\"trigger\" part=\"trigger\" class=\"trigger-tap-target\">\n            {/* this is tooltip's trigger slot (expects an icon or text) */}\n            <slot name=\"trigger\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  fill-rule=\"evenodd\"\n                  clip-rule=\"evenodd\"\n                  d=\"M9 0C4.04 0 0 4.04 0 9C0 13.96 4.04 18 9 18C13.96 18 18 13.96 18 9C18 4.04 13.96 0 9 0ZM9 16C5.14 16 2 12.86 2 9C2 5.14 5.14 2 9 2C12.86 2 16 5.14 16 9C16 12.86 12.86 16 9 16ZM8 7.5V14H10V7.5H8ZM10.25 5.25C10.25 5.94036 9.69036 6.5 9 6.5C8.30964 6.5 7.75 5.94036 7.75 5.25C7.75 4.55964 8.30964 4 9 4C9.69036 4 10.25 4.55964 10.25 5.25Z\"\n                />\n              </svg>\n            </slot>\n          </div>\n          <aside slot=\"popover\" part=\"popover\">\n            <slot name=\"content\" onSlotchange={() => this.styleLinks()}></slot>\n          </aside>\n        </MarketDropdownTagName>\n      </Host>\n    );\n  }\n}\n"]}