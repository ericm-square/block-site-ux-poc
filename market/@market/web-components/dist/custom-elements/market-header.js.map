{"file":"market-header.js","mappings":"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","names":["MarketHeader","HEADER_CLOSE_BUTTON_ICON_ASSET"],"sources":["src/components/market-header/market-header.css?tag=market-header&encapsulation=shadow","src/components/market-header/market-header.tsx"],"sourcesContent":["@import \"../../styles/mixins/component-base.css\";\n@import \"../../styles/mixins/typography.css\";\n\n:host {\n  --header-animation-duration: 0.2s;\n\n  display: block;\n}\n\n/* remove margin from slotted elements */\n::slotted(*) {\n  margin: 0;\n}\n\n::slotted(.wayfinding),\n::slotted([slot=\"wayfinding\"]) {\n  @extend %paragraph-20;\n\n  display: block;\n  margin-bottom: var(--header-sub-text-spacing-bottom-size);\n  color: var(--header-sub-text-text-color);\n}\n\n::slotted(.subheading),\n::slotted([slot=\"subheading\"]) {\n  @extend %paragraph-20;\n\n  display: block;\n  margin-top: var(--header-sub-text-spacing-bottom-size);\n  color: var(--header-sub-text-text-color);\n}\n\n/* If you change these properties also update their counterparts in styles/components.css */\n:host([show-navigation]) {\n  ::slotted([slot=\"compact\"]:not(.wayfinding):not(.subheading)) {\n    font-weight: var(--core-type-heading-20-weight);\n    font-size: var(--core-type-heading-20-size);\n    font-family: var(--core-type-heading-20-font-family);\n    line-height: var(--core-type-heading-20-leading);\n    letter-spacing: var(--core-type-heading-20-tracking);\n    text-transform: var(--core-type-heading-20-case);\n  }\n}\n\n/* navigation w/ close button */\nnav {\n  padding-right: var(--header-main-text-horizontal-spacing);\n}\n\n/* actions menu w/ buttons */\nmenu {\n  display: none;\n  grid-auto-flow: column;\n  align-items: start;\n  margin: 0;\n  padding-left: var(--header-main-text-horizontal-spacing);\n  column-gap: var(--button-group-spacing);\n\n  :host([show-actions]) & {\n    display: grid;\n  }\n}\n\n.grid {\n  display: none;\n\n  :host([show-actions]) & {\n    /*\n      If actions are present, grid has 2 columns,\n      so stretch the first column (.compact) */\n    display: grid;\n    grid-template-columns: auto minmax(max-content, 1fr);\n  }\n\n  :host([show-navigation]) & {\n    /*\n      If navigation is present, grid has 3 columns.\n      Perfectly center the middle column (.compact) if possible,\n      regardless of the content on the left/right columns.\n      ref: https://stackoverflow.com/a/68292664/17019161 */\n    display: grid;\n    grid-template-columns: minmax(max-content, 1fr) auto minmax(max-content, 1fr);\n  }\n}\n\n.navigation {\n  display: none;\n\n  :host([show-navigation]) & {\n    display: flex;\n  }\n}\n\n.actions {\n  display: flex;\n  place-content: flex-end;\n}\n\n/* vertically center the eyebrow & title in the grid */\n.compact {\n  display: flex;\n  flex-direction: column;\n  place-content: center;\n}\n\n::slotted(p) {\n  margin-top: var(--header-bottom-padding-size);\n}\n\n::slotted(p[slot=\"compact\"]) {\n  display: none;\n}\n\n/* Styles only applied if heading content cloned into center of 3-column layout */\n:host([show-navigation]) .compact {\n  overflow: hidden;\n  text-align: center;\n  opacity: 0%;\n  visibility: hidden;\n\n  /* fade out - delay hiding visibility until after opacity transition */\n  transition:\n    opacity var(--header-animation-duration) ease-in-out,\n    visibility 0s linear var(--header-animation-duration);\n\n  /* truncate compact text to one line */\n  ::slotted([slot=\"compact\"]) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.heading {\n  display: block;\n\n  /* fade in - immediately show visibility before opacity transition */\n  transition: opacity var(--header-animation-duration) ease-in-out, visibility 0s;\n\n  :host([show-navigation]) & {\n    margin-top: var(--header-nav-icon-button-spacing-buttom-size);\n  }\n\n  :host([show-actions]:not([show-navigation])) & {\n    display: none;\n  }\n}\n\n:host([show-navigation][compact]) {\n  .compact {\n    opacity: 100%;\n    visibility: visible;\n\n    /* fade in - immediately show visibility before opacity transition */\n    transition: opacity var(--header-animation-duration) ease-in-out, visibility 0s;\n  }\n\n  .heading {\n    opacity: 0%;\n    visibility: hidden;\n\n    /* fade out - delay hiding visibility until after opacity transition */\n    transition:\n      opacity var(--header-animation-duration) ease-in-out,\n      visibility 0s linear var(--header-animation-duration);\n  }\n}\n\n/*\n  .regular and .wide are added to the host's classList in market-modal-full.tsx.\n  These apply header positioning depending on the `layout` prop on market-modal-full.\n*/\n:host(.regular) {\n  .heading {\n    /* TODO: This token should be renamed to modal-full-regular-layout-width */\n    max-width: var(--modal-full-fixed-layout-width);\n    margin-right: auto;\n    margin-left: auto;\n  }\n}\n\n:host(.wide) {\n  .heading {\n    /* TODO: add a design token for modal full layout=wide */\n    max-width: 1200px;\n    margin-right: auto;\n    margin-left: auto;\n  }\n}\n","import { Component, Host, State, Prop, Element, Event, Watch, EventEmitter, h } from '@stencil/core';\nimport { HEADER_CLOSE_BUTTON_ICON_ASSET } from '@market/market-theme/js/cjs/index.js';\nimport { getNamespacedTagFor } from '../../utils/namespace';\nimport { TMarketHeaderNavigateEventDetail } from './events';\n\n/**\n * @slot - The title. The position of the title varies based on the presence of other slots\n * @slot navigation - navigation buttons, ex close, back, forward, on the left side of the header\n * @slot wayfinding - the smaller \"eyebrow\" text displayed above the title, e.g. \"Step 1 of 2\"\n * @slot actions - for button(s) to perform actions, on the right side of the header\n * @slot subheading - Secondary text for the row\n * @part heading - the heading area where the default, wayfinding, and subheading slot is contained in\n */\n@Component({\n  tag: 'market-header',\n  styleUrl: 'market-header.css',\n  shadow: true,\n})\nexport class MarketHeader {\n  @Element() el: HTMLMarketHeaderElement;\n  customNavEl: any;\n\n  /**\n   * Whether or not the navigation slot is shown\n   */\n  @Prop({ mutable: true, reflect: true }) showNavigation: boolean | null = null;\n\n  /**\n   * String to use for the aria-label accessibility attribute of the default close \"x\" button.\n   */\n  @Prop({ reflect: true }) readonly closeButtonAriaLabel: string = 'Close';\n\n  /**\n   * Disables the default close \"x\" button.\n   */\n  @Prop() readonly disableCloseButton: boolean = false;\n\n  /**\n   * Whether or not the header is in compact mode\n   * when navigation is present.\n   */\n  @Prop({ reflect: true }) readonly compact: boolean = false;\n\n  @State() showActions: boolean = false;\n\n  /**\n   * Emitted when the close icon in the navigation slot is clicked.\n   */\n  @Event() marketHeaderNavigate: EventEmitter<TMarketHeaderNavigateEventDetail>;\n\n  @Watch('compact')\n  handleCompact() {\n    if (this.compact) {\n      const compact = this.el.shadowRoot.querySelector('.grid .compact');\n      const minHeight = Number.parseInt(getComputedStyle(compact).height, 10);\n      this.el.style.height = minHeight !== undefined ? `${minHeight}px` : '';\n    } else {\n      this.el.style.height = '';\n    }\n  }\n\n  handleSlottedNavigation() {\n    // If there is custom navigation passed in, we need to\n    // attach event handlers to the slotted elements manually\n    const customNavEl = this.el.querySelector('[slot=\"navigation\"]');\n    if (customNavEl) {\n      this.showNavigation = true;\n      customNavEl.addEventListener('click', this.handleSlottedNavClick.bind(this));\n    }\n  }\n\n  handleSlottedActions() {\n    const actions = this.el.querySelector('[slot=\"actions\"]');\n    this.showActions = actions ? true : false;\n  }\n\n  handleCloseButtonClick(event) {\n    this.marketHeaderNavigate.emit({\n      event,\n      action: 'close',\n    });\n  }\n\n  handleSlottedNavClick(event) {\n    this.marketHeaderNavigate.emit({\n      event,\n      action: 'custom',\n    });\n  }\n\n  componentWillLoad() {\n    this.checkForNavigation();\n    this.cloneDefaultHeadingToCompactHeading();\n\n    // watch for changes in slotted children content\n    const observer = new MutationObserver(this.handleMutation.bind(this));\n    observer.observe(this.el, { childList: true, characterData: true, subtree: true });\n  }\n\n  componentDidRender() {\n    // this function requires layout computation,\n    // so we need to wait until render to call.\n    this.handleCompact();\n  }\n\n  handleMutation(mutationList) {\n    // We don't want to re-clone the default slot content if\n    // the mutation was already the result of the cloning\n    // because then we would get into an infinite loop!\n    // So we have to look at the mutation data to check if a\n    // compact slotted element was added to prevent re-cloning.\n    let shouldClone = true;\n    mutationList.forEach((mutation) => {\n      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n        mutation.addedNodes.forEach((node) => {\n          if (node.slot === 'compact') {\n            shouldClone = false;\n          }\n        });\n      }\n    });\n\n    if (shouldClone) {\n      this.cloneDefaultHeadingToCompactHeading();\n    }\n  }\n\n  checkForNavigation() {\n    // We want to force the header to be navigable when slotted in modals\n    const hasModalParent = this.el.closest(`\n      ${getNamespacedTagFor('market-modal-full')},\n      ${getNamespacedTagFor('market-modal-partial')}\n    `);\n\n    // The same if custom navigation is slotted in\n    const hasCustomNavigation = this.el.querySelector('[slot=\"navigation\"]');\n\n    // Only set this if the prop hasn't been passed in manually\n    if (this.showNavigation === null) {\n      this.showNavigation = hasModalParent || hasCustomNavigation ? true : false;\n    }\n  }\n\n  cloneDefaultHeadingToCompactHeading() {\n    // clear existing compact slotted content\n    const compactSlottedContent = this.el.querySelectorAll('[slot=\"compact\"]');\n    for (const node of compactSlottedContent) {\n      this.el.removeChild(node);\n    }\n\n    // clone the wayfinding or subheading slot into compact slot\n    const wayfindingEl = this.el.querySelector('[slot=\"wayfinding\"]');\n    const subheadingEl = this.el.querySelector('[slot=\"subheading\"]');\n\n    if (wayfindingEl) {\n      const clone = wayfindingEl.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      clone.classList.add('wayfinding');\n      this.el.appendChild(clone);\n    }\n\n    // clone the rest of the default slot content into compact slot\n    const defaultSlotContent = [...this.el.children].filter((el) => !el.getAttribute('slot'));\n    for (const node of defaultSlotContent) {\n      const clone = node.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      this.el.appendChild(clone);\n    }\n\n    if (!wayfindingEl && subheadingEl) {\n      const clone = subheadingEl.cloneNode(true) as HTMLElement;\n      clone.slot = 'compact';\n      clone.classList.add('subheading');\n      this.el.appendChild(clone);\n    }\n  }\n\n  renderDefaultNavigation() {\n    const MarketButtonTagName = getNamespacedTagFor('market-button');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n\n    return (\n      <MarketButtonTagName\n        rank=\"secondary\"\n        slot=\"navigation\"\n        aria-label={this.closeButtonAriaLabel}\n        disabled={this.disableCloseButton}\n        onClick={(event) => this.handleCloseButtonClick(event)}\n      >\n        <MarketIconTagName slot=\"icon\" name={HEADER_CLOSE_BUTTON_ICON_ASSET}></MarketIconTagName>\n      </MarketButtonTagName>\n    );\n  }\n\n  render() {\n    return (\n      <Host class=\"market-header\" show-actions={this.showActions}>\n        <div class=\"grid\">\n          <div class=\"navigation\">\n            <nav>\n              <slot name=\"navigation\" onSlotchange={() => this.handleSlottedNavigation()}>\n                {this.renderDefaultNavigation()}\n              </slot>\n            </nav>\n          </div>\n          <div class=\"compact\">\n            <slot name=\"compact\"></slot>\n          </div>\n          <div class=\"actions\">\n            <menu>\n              <slot name=\"actions\" onSlotchange={() => this.handleSlottedActions()}></slot>\n            </menu>\n          </div>\n        </div>\n        <div class=\"heading\" part=\"heading\">\n          <slot name=\"wayfinding\"></slot>\n          <slot></slot>\n          <slot name=\"subheading\"></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}