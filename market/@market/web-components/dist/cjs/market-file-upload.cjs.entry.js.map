{"file":"market-file-upload.entry.cjs.js","mappings":"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","names":["getNamespacedTagFor","index","h","Host"],"sources":["src/utils/filesize/index.ts","src/components/market-file-upload/market-file-upload.css?tag=market-file-upload&encapsulation=shadow","src/components/market-file-upload/market-file-upload.tsx"],"sourcesContent":["/**\n * Returns byte size as a human-readable string.\n * Cribbed from https://stackoverflow.com/a/18650828\n *\n * @param bytes File size in bytes\n * @param decimals Decimal precision\n */\nexport const getReadableFilesize = (bytes: number, decimals = 2) => {\n  if (!Number(bytes)) return '0 bytes';\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['bytes', 'kB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${Number.parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n","/* TODO: add design tokens for component */\n\n@import \"../../styles/mixins/component-base.css\";\n@import \"../../styles/mixins/typography.css\";\n\n.label-container {\n  border-width: var(--file-upload-border-width, 1px);\n  border-style: var(--file-upload-normal-state-border-style, dashed);\n  border-color: var(--file-upload-normal-state-border-color, var(--core-fill-30-color));\n  border-radius: var(--file-upload-border-radius, 6px);\n  transition: background-color border-color 0.2s;\n\n  & > label {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding:\n      var(--file-upload-dropzone-vertical-padding, var(--core-metrics-spacing-400))\n      var(--file-upload-dropzone-horizontal-padding, var(--core-metrics-spacing-400));\n    text-align: center;\n    cursor: pointer;\n\n    .market-icon {\n      color: var(--file-upload-label-fill-color, var(--core-text-10-color));\n    }\n  }\n\n  /* Overriding market-row margin since it overflows the container natively */\n  & > .market-row {\n    margin: 0;\n  }\n}\n\nbutton,\n.market-button,\n::slotted(button),\n::slotted(.market-button),\n::slotted(.market-link) {\n  @extend %semibold-30;\n\n  padding: 0;\n}\n\nslot:not([name=\"compact\"]) {\n  button,\n  .market-button,\n  ::slotted(button),\n  ::slotted(.market-button),\n  ::slotted(.market-link) {\n    /* removes the default button styling for drop zone content */\n    border: none;\n    background-color: inherit;\n    color: var(--file-upload-button-label-color, var(--button-normal-variant-tertiary-rank-normal-state-label-color));\n    font-family: inherit;\n    text-align: right;\n    cursor: pointer;\n  }\n}\n\n.has-file-selected {\n  /* stylelint-disable-next-line declaration-no-important */\n  border-style: var(--file-upload-file-selected-state-border-style, solid) !important;\n  border-color: var(--file-upload-file-selected-state-border-color, var(--core-fill-30-color));\n}\n\n@media (hover: hover) {\n  :host(:hover) .label-container {\n    border-style: var(--file-upload-hover-state-border-style, dashed);\n    border-color: var(--file-upload-hover-state-border-color, var(--core-emphasis-fill-color));\n    background-color: var(--file-upload-hover-state-background-color, var(--core-emphasis-40-color));\n  }\n}\n\n:host(:active) {\n  .label-container,\n  .is-dragging-over {\n    border-style: var(--file-upload-active-state-border-style, dashed);\n    border-color: var(--file-upload-active-state-border-color, var(--core-emphasis-fill-color));\n    background-color: var(--file-upload-active-state-background-color, var(--core-emphasis-30-color));\n  }\n}\n\n:host([disabled]) {\n  .label-container {\n    border-style: var(--file-upload-disabled-state-border-style, dashed);\n    border-color: var(--file-upload-disabled-state-border-color, var(--field-disabled-state-border-color));\n    background-color: var(--file-upload-disabled-state-background-color, var(--field-disabled-state-background-color));\n    color: var(--file-upload-disabled-state-label-color, var(--field-disabled-state-empty-phase-label-color));\n  }\n\n  button,\n  ::slotted(button),\n  ::slotted(.market-button),\n  ::slotted(.market-icon),\n  ::slotted(.market-link),\n  label .market-icon,\n  label ::slotted(.market-icon) {\n    opacity: 30%;\n  }\n}\n\n/* COMPACT MODE */\n\nslot[name=\"compact-action\"] {\n  display: none;\n}\n\n:host([compact]) {\n  slot[name=\"compact-action\"] {\n    display: block;\n    width: 100%;\n  }\n\n  slot:not([name=\"compact-action\"]) {\n    display: none;\n  }\n\n  .label-container {\n    border-style: unset;\n    border-color: unset;\n    background-color: unset;\n\n    & > label {\n      padding: 0;\n    }\n  }\n\n  .market-button,\n  .market-link,\n  ::slotted(.market-button),\n  ::slotted(.market-link) {\n    width: 100%;\n  }\n}\n\n/* FILE ROWS */\n\n.market-list {\n  margin-top: var(--file-upload-dropzone-vertical-margin, var(--core-metrics-spacing-100));\n}\n\n/* leading accessory */\n.market-accessory[slot=\"leading-accessory\"] {\n  border-radius: var(--file-upload-border-radius, 6px);\n  background-color: var(--file-upload-leading-accessory-background-color, var(--core-fill-40-color));\n}\n\n/* trailing accessory */\n.market-accessory[slot=\"trailing-accessory\"] {\n  cursor: pointer;\n\n  .market-icon {\n    color: var(--file-upload-delete-fill-color, var(--core-fill-20-color));\n  }\n}\n\n/*  error/success/loading rows */\n[data-status]:not([data-status=\"\"]) .market-accessory[slot=\"leading-accessory\"] {\n  background-color: unset;\n}\n\n[data-status=\"error\"] [slot=\"subtext\"],\n[data-status=\"error\"] .market-accessory[slot=\"leading-accessory\"] {\n  color: var(--file-upload-leading-accessory-error-color, var(--core-critical-fill-color));\n}\n\n:host([disabled]) [data-status=\"error\"] [slot=\"subtext\"] {\n  opacity: 30%;\n}\n\n[data-status=\"success\"] .market-accessory[slot=\"leading-accessory\"] {\n  color: var(--file-upload-leading-accessory-success-color, var(--core-success-fill-color));\n}\n\n[data-status=\"loading\"] .market-accessory[slot=\"leading-accessory\"] {\n  animation: market-file-upload-loading-rotation 1s infinite linear;\n}\n\n@keyframes market-file-upload-loading-rotation {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* DEPRECATED FEATURES / SLOTS */\n\n:host([invalid]) {\n  .label-container {\n    border-color: var(--field-normal-state-invalid-validity-border-color);\n  }\n}\n\n::slotted([slot=\"bottom-accessory\"]) {\n  color: var(--core-text-20-color);\n}\n","import { Component, Element, Event, Host, h, State, Prop, EventEmitter, Watch } from '@stencil/core';\nimport { getReadableFilesize } from '../../utils/filesize';\nimport { getNamespacedTagFor } from '../../utils/namespace';\nimport { TMarketFileUploadFileConfig } from './types';\n\n/**\n * @slot - Used for drop zone content. Intended for an icon (optional), main text, and secondary text (optional).\n * @slot compact-action - Used for \"compact\" mode content. Intended for use with a `market-button` or `market-link`. When this\n * slot is used, default slot content must also be provided. Visible when `compact` is true.\n * @slot bottom-accessory - DEPRECATED: Used for the bottom accessory text. We recommend using the default slot\n * to add secondary text to the drop zone content instead.\n * @slot error - DEPRECATED: Used for input-level error text. We recommend using the fileMetadata prop to set error\n * status and messages on the file level instead.\n */\n\n@Component({\n  tag: 'market-file-upload',\n  styleUrl: 'market-file-upload.css',\n  shadow: true,\n})\nexport class MarketFileUpload {\n  @Element() el: HTMLMarketFileUploadElement;\n\n  /**\n   * String that is a list of file types the uploader should accept. This is\n   * passed to the internal `<input type=\"file\"/>` tag. For more info, see the\n   * [MDN docs](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept).\n   */\n  @Prop() readonly accept: string = '';\n\n  /**\n   * An array of File objects that can be passed in. (If using vanilla JS, this must be set using JS and not in the HTML markup.)\n   */\n  @Prop() readonly value: Array<File> = [];\n\n  /**\n   * Functionally and visually disables the file picker.\n   */\n  @Prop({ reflect: true }) readonly disabled: boolean = false;\n\n  /**\n   * DEPRECATED: Represents whether the input is invalid or not. This represents input-level error states.\n   * We recommend using the fileMetadata prop to set error status and messages on the file level instead.\n   */\n  @Prop({ reflect: true }) readonly invalid: boolean = false;\n\n  /**\n   * Represents whether the selector allows multiple files\n   * to be selected.\n   */\n  @Prop({ reflect: true }) readonly multiple: boolean = false;\n\n  /**\n   * Used to toggle \"compact mode\" (for use on mobile devices and when space is limited)\n   */\n  @Prop({ reflect: true }) readonly compact: boolean = false;\n\n  /**\n   * What type of secondary information, if any, to display on all file rows\n   */\n  @Prop() readonly fileSubtext?: 'size' | 'type';\n\n  /**\n   * What type of custom information, if any, to display on specified file rows.\n   * Expects an array of TMarketFileUploadFileConfig objects (must be set using JS and not in the HTML markup), which\n   * must include `filename` and can include an optional `status`, `message`, or `leadingIconName`.\n   * Note that `message` is only shown when `status` is `'error'`, and `leadingIconName` expects the semantic or\n   * descriptive name of an existing `market-icon`.\n   */\n  @Prop() readonly fileMetadata?: Array<TMarketFileUploadFileConfig>;\n\n  /**\n   * Optional property passed to the delete icons on selected file\n   * rows that will function as its aria-label. Defaults to \"Delete\".\n   */\n  @Prop({ reflect: true }) readonly deleteButtonAriaLabel: string = 'Delete';\n\n  /**\n   * Tracks whether a file is being dragged over the component.\n   */\n  @State() isDraggingOver: boolean = false;\n\n  /**\n   * Files that have been selected by the user either via drag & drop or\n   * the file selector.\n   */\n  @State() files: Array<File>;\n\n  /**\n   * Triggered when the selected files array changes.\n   */\n  @Event() marketFileUploadValueChange: EventEmitter<{ value: Array<File> }>;\n\n  @Watch('value')\n  watchValueHandler(newValue: Array<File>) {\n    if (Array.isArray(newValue)) {\n      this.files = this.multiple ? [...newValue] : [newValue[0]];\n    }\n  }\n\n  @Watch('disabled')\n  watchDisabledHandler() {\n    this.slottedCompactButtons.forEach((el) => (el.disabled = this.disabled));\n  }\n\n  /**\n   * We want to disable certain functions if multiple is false and a file has been selected\n   */\n  get hasSingleFileSelected(): boolean {\n    return !this.multiple && this.files.length === 1;\n  }\n\n  /* returns `market-button` or `market-link` elements in the \"compact\" slot */\n  get slottedCompactButtons() {\n    const interactiveElementTagnames = new Set([\n      getNamespacedTagFor('market-button'),\n      getNamespacedTagFor('market-link'),\n    ]) as Set<string>;\n    return [...this.el.querySelector('[slot=\"compact-action\"]').children].filter((el) =>\n      interactiveElementTagnames.has(el.tagName.toLowerCase()),\n    ) as [HTMLMarketButtonElement | HTMLMarketLinkElement];\n  }\n\n  private fileInputElement: HTMLInputElement;\n\n  draggingOver(e) {\n    if (this.disabled || this.hasSingleFileSelected) {\n      return;\n    }\n\n    this.isDraggingOver = true;\n    e.preventDefault();\n  }\n\n  endDrag(e) {\n    e.preventDefault();\n    if (this.disabled || this.hasSingleFileSelected) {\n      return;\n    }\n\n    this.isDraggingOver = false;\n    if (e.type === 'drop' && e.dataTransfer) {\n      this.addFiles(e.dataTransfer.files);\n    }\n  }\n\n  handleButtonClick() {\n    this.fileInputElement.click();\n  }\n\n  handleDeleteKeydown(e, index) {\n    if (e.key === 'Enter' && !this.disabled) {\n      this.removeFile(index);\n    }\n  }\n\n  removeFile(index: number) {\n    this.files.splice(index, 1);\n    this.files = [...this.files];\n    this.emitFileChange();\n  }\n\n  labelContainerClassNames() {\n    const classNames = [];\n    if (this.isDraggingOver) {\n      classNames.push('is-dragging-over');\n    }\n    if (this.hasSingleFileSelected) {\n      classNames.push('has-file-selected');\n    }\n\n    return classNames;\n  }\n\n  onInputChange(e) {\n    this.addFiles(e.target.files);\n    // unset the file input value so that we can re-add files\n    // if they are removed by the user\n    this.fileInputElement.value = '';\n  }\n\n  addFiles(files: Array<File>) {\n    if (files) {\n      if (!this.multiple) {\n        this.files = [files[0]];\n      } else {\n        this.files = [...files, ...this.files];\n      }\n    }\n    this.emitFileChange();\n  }\n\n  emitFileChange() {\n    this.marketFileUploadValueChange.emit({ value: this.files });\n  }\n\n  handleCompactSlotChange() {\n    this.slottedCompactButtons.forEach((el) => {\n      el.removeEventListener('click', this.handleButtonClick.bind(this));\n      if (!this.disabled) {\n        el.addEventListener('click', this.handleButtonClick.bind(this));\n      }\n      el.disabled = this.disabled;\n    });\n  }\n\n  componentWillLoad() {\n    if (this.value) {\n      this.files = [...this.value];\n    } else {\n      this.files = [];\n    }\n  }\n\n  componentDidLoad() {\n    this.handleCompactSlotChange();\n  }\n\n  renderFilesAsMarketRows() {\n    const MarketRowTagName = getNamespacedTagFor('market-row');\n    const MarketAccessoryTagName = getNamespacedTagFor('market-accessory');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n\n    return this.files.map((file, index) => {\n      const rowConfig = this.fileMetadata?.find((row) => row.filename === file.name);\n\n      // set default icons\n      let leadingIcon = file.type.startsWith('image/') ? 'picture' : 'file';\n      let trailingIcon = 'delete';\n\n      // set default secondary text\n      let secondaryText;\n      switch (this.fileSubtext) {\n        case 'size':\n          secondaryText = getReadableFilesize(file[this.fileSubtext]);\n          break;\n        case 'type':\n          secondaryText = file[this.fileSubtext];\n          break;\n        default:\n          break;\n      }\n\n      // row config status overrides default row appearance\n      switch (rowConfig?.status) {\n        case 'error':\n          leadingIcon = 'warning';\n          trailingIcon = 'clear';\n          // message only displayed if status = error\n          secondaryText = rowConfig?.message;\n          break;\n        case 'loading':\n          leadingIcon = 'loading';\n          trailingIcon = 'clear';\n          break;\n        case 'success':\n          leadingIcon = 'success';\n          break;\n        default:\n          break;\n      }\n\n      // row config custom icon overrides previously set leading icon\n      leadingIcon = rowConfig?.leadingIconName || leadingIcon;\n\n      return (\n        <MarketRowTagName\n          disabled={this.disabled}\n          interactive\n          transient\n          data-index={index}\n          data-status={rowConfig?.status}\n        >\n          <label slot=\"label\">{file.name}</label>\n          {secondaryText && <p slot=\"subtext\">{secondaryText}</p>}\n          <MarketAccessoryTagName slot=\"leading-accessory\" size=\"image\">\n            <MarketIconTagName name={leadingIcon} fidelity={24}></MarketIconTagName>\n          </MarketAccessoryTagName>\n          <MarketAccessoryTagName\n            slot=\"trailing-accessory\"\n            size=\"icon\"\n            tabindex={this.disabled ? -1 : 0}\n            role=\"button\"\n            aria-label={this.deleteButtonAriaLabel}\n            onKeyDown={(e) => this.handleDeleteKeydown(e, index)}\n            onClick={() => this.removeFile(index)}\n          >\n            <MarketIconTagName name={trailingIcon} fidelity={24}></MarketIconTagName>\n          </MarketAccessoryTagName>\n        </MarketRowTagName>\n      );\n    });\n  }\n\n  render() {\n    const MarketListTagName = getNamespacedTagFor('market-list');\n    const MarketAccessoryTagName = getNamespacedTagFor('market-accessory');\n    const MarketIconTagName = getNamespacedTagFor('market-icon');\n    const MarketFieldTagName = getNamespacedTagFor('market-field');\n    const MarketButtonTagName = getNamespacedTagFor('market-button');\n\n    const fileMarketRows = this.renderFilesAsMarketRows();\n    const showUploadLabel = this.multiple || fileMarketRows.length === 0;\n    const showList = this.multiple && fileMarketRows.length > 0;\n\n    return (\n      <Host\n        class=\"market-file-upload\"\n        ondragenter={(e) => this.draggingOver(e)}\n        ondragover={(e) => this.draggingOver(e)}\n        ondragleave={(e) => this.endDrag(e)}\n        ondrop={(e) => this.endDrag(e)}\n      >\n        <MarketFieldTagName disabled={this.disabled} invalid={this.invalid}>\n          <div class={`label-container ${this.labelContainerClassNames()}`}>\n            {!showUploadLabel && fileMarketRows[0]}\n            {showUploadLabel && (\n              // the input is correctly wrapped inside its label, but eslint gets confused by label > span > slot > text\n              // eslint-disable-next-line jsx-a11y/label-has-associated-control\n              <label>\n                <slot>\n                  <MarketAccessoryTagName size=\"image\">\n                    <MarketIconTagName name=\"file\" fidelity={24}></MarketIconTagName>\n                  </MarketAccessoryTagName>\n                  <span>\n                    <button onClick={() => this.handleButtonClick()}>Choose a file</button> or drag and drop it here\n                  </span>\n                </slot>\n                <slot name=\"compact-action\" onSlotchange={() => this.handleCompactSlotChange()}>\n                  <MarketButtonTagName rank=\"primary\" disabled={this.disabled} onClick={() => this.handleButtonClick()}>\n                    Upload file\n                  </MarketButtonTagName>\n                </slot>\n                <input\n                  ref={(el) => (this.fileInputElement = el)}\n                  onChange={(e) => this.onInputChange(e)}\n                  type=\"file\"\n                  name=\"files[]\"\n                  multiple={this.multiple}\n                  accept={this.accept}\n                  hidden\n                />\n              </label>\n            )}\n          </div>\n          {/* DEPRECATED: bottom-accessory slot, to be removed in future major version */}\n          <slot name=\"bottom-accessory\">\n            <small slot=\"bottom-accessory\"></small>\n          </slot>\n          {/* DEPRECATED: error slot, to be removed in future major version */}\n          <slot name=\"error\">\n            <small slot=\"error\"></small>\n          </slot>\n        </MarketFieldTagName>\n        {showList && (\n          <MarketListTagName interactive transient>\n            {fileMarketRows}\n          </MarketListTagName>\n        )}\n      </Host>\n    );\n  }\n}\n"],"version":3}